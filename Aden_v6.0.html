<!doctype html>
<html lang="es">
<head>
<link rel="icon" type="image/png" href="https://images.vexels.com/media/users/3/189101/isolated/preview/693f7da0ef1625c6b281f1428a7ecdbb-fuegos-artificiales-de-2-anillos-degradado-verde.png?w=360">
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Aden â€” Asistente Local Amistoso (v6 con FAQ)</title>
<!-- PANTALLA DE ENTRADA / MENÃš INICIAL -->
<div id="introScreen" class="intro-screen">
  <div class="intro-content">
    <div class="intro-ring"></div>
    <div class="intro-title">Aden</div>
    <div class="intro-sub">Pulsa cualquier tecla para acceder</div>
  </div>
</div>

<style>
/* =====================================
   MENÃš DE ENTRADA â€” PANTALLA INICIAL
   ===================================== */

.intro-screen {
  position: fixed;
  inset: 0;
  background: linear-gradient(180deg, var(--bg-0), var(--bg-1));
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 3000;
  animation: fadeInIntro 1.2s ease both;
}

@keyframes fadeInIntro {
  from { opacity: 0; transform: scale(1.02); }
  to { opacity: 1; transform: none; }
}

.intro-content {
  position: relative;
  text-align: center;
  color: #e9f4ff;
  font-family: "Inter", sans-serif;
}

.intro-ring {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 180px;
  height: 180px;
  border-radius: 50%;
  border: 3px solid var(--accent-1);
  transform: translate(-50%, -50%);
  opacity: 0.6;
  animation: ringPulse 3s ease-in-out infinite;
  filter: drop-shadow(0 0 12px rgba(87,228,184,0.3));
}

@keyframes ringPulse {
  0%,100% { transform: translate(-50%, -50%) scale(1); opacity: 0.6; }
  50% { transform: translate(-50%, -50%) scale(1.15); opacity: 0.9; }
}

.intro-title {
  font-size: 56px;
  font-weight: 800;
  letter-spacing: 2px;
  background: linear-gradient(90deg, var(--accent-1), var(--accent-2));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  text-shadow: 0 4px 16px rgba(87,228,184,0.2);
  z-index: 2;
  position: relative;
}

.intro-sub {
  margin-top: 22px;
  font-size: 16px;
  color: var(--muted);
  letter-spacing: 0.5px;
  opacity: 0.7;
  animation: blinkText 2s ease-in-out infinite;
}

@keyframes blinkText {
  0%,100% { opacity: 0.4; }
  50% { opacity: 1; }
}

/* AnimaciÃ³n de salida */
.fade-out {
  animation: fadeOutIntro 1s ease forwards;
}
@keyframes fadeOutIntro {
  from { opacity: 1; }
  to { opacity: 0; visibility: hidden; }
}
</style>

<style>
/* =========================================================================
   Aden v6 con Panel FAQ desplegable
   - Mantiene la estÃ©tica anterior (oscuro, limpio).
   - AÃ±ade drawer/floating button en esquina con todas las preguntas.
   ========================================================================= */

:root{
  --bg-0:#07121a;
  --bg-1:#0e1a27;
  --panel:#11202b;
  --glass: rgba(255,255,255,0.03);
  --muted:#9fb0c6;
  --accent-1:#57e4b8;
  --accent-2:#6fb7ff;
  --danger:#ff6b6b;
  --card:#0b1720;
  --radius:14px;
  --shadow: 0 14px 36px rgba(2,8,23,0.6);
  font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  color-scheme: dark;
}

/* Base layout (copiado / adaptado de la versiÃ³n previa) */
html,body{height:100%;margin:0;background:linear-gradient(180deg,var(--bg-0),var(--bg-1));color:#e9f4ff;-webkit-font-smoothing:antialiased;}
.wrap{max-width:1200px;margin:28px auto;padding:20px;display:grid;grid-template-columns:340px 1fr;gap:20px;min-height:760px}

/* Sidebar */
.sidebar{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:18px;border-radius:var(--radius);box-shadow:var(--shadow);display:flex;flex-direction:column;overflow:hidden}
.brand{display:flex;gap:12px;align-items:center}
.logo{width:56px;height:56px;border-radius:12px;background:linear-gradient(135deg,var(--accent-1),var(--accent-2));display:flex;align-items:center;justify-content:center;font-weight:900;color:#022b2a;font-size:18px;box-shadow:0 6px 18px rgba(87,228,184,0.06)}
.brand h1{margin:0;font-size:16px}
.brand p{margin:0;color:var(--muted);font-size:12px}
.controls{display:flex;gap:8px;margin-top:12px}
.btn{background:transparent;border:1px solid rgba(255,255,255,0.04);padding:8px 10px;border-radius:10px;color:var(--muted);cursor:pointer;font-size:13px}
.btn.primary{background:linear-gradient(90deg,var(--accent-1),var(--accent-2));border:none;color:#052a26;font-weight:700}
.btn.ghost{background:transparent;border:1px dashed rgba(255,255,255,0.03)}
.btn.small{padding:6px 8px;font-size:12px}

/* Search / chats list */
.search{display:flex;gap:8px;margin-top:12px;align-items:center}
.search input{flex:1;padding:10px;border-radius:10px;background:transparent;border:1px solid rgba(255,255,255,0.03);color:var(--muted)}
.meta-pill{padding:6px 10px;border-radius:999px;background:rgba(255,255,255,0.02);font-size:12px;color:var(--muted)}
.chats{margin-top:12px;flex:1;overflow:auto;display:flex;flex-direction:column;gap:10px;padding-right:6px}
.chat-item{display:flex;align-items:center;gap:10px;padding:10px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent);cursor:pointer;border:1px solid transparent;transition:all .18s}
.chat-item:hover{transform:translateY(-4px);box-shadow:0 10px 28px rgba(2,6,23,0.35)}
.chat-item.active{outline:2px solid rgba(87,228,184,0.08)}
.chat-thumb{width:44px;height:44px;border-radius:10px;background:linear-gradient(135deg,#c7f9e8,#9fd1ff);display:flex;align-items:center;justify-content:center;font-weight:700;color:#022}
.chat-meta h4{margin:0;font-size:13px}
.chat-meta p{margin:0;font-size:12px;color:var(--muted)}

/* Panel principal */
.panel{background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.02));padding:18px;border-radius:var(--radius);box-shadow:var(--shadow);display:flex;flex-direction:column}
.panel-header{display:flex;align-items:center;justify-content:space-between}
.panel-header .left{display:flex;gap:12px;align-items:center}
.panel-header h2{margin:0;font-size:18px}
.panel-actions{display:flex;gap:8px}
.messages{flex:1;margin-top:14px;padding:16px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent);overflow:auto;border:1px dashed rgba(255,255,255,0.02);display:flex;flex-direction:column;gap:12px}
.bubble{max-width:78%;padding:12px 14px;border-radius:14px;line-height:1.45;box-shadow:0 8px 22px rgba(2,6,23,0.45)}
.bubble.user{align-self:flex-end;background:linear-gradient(180deg,#071425,#061422);border:1px solid rgba(255,255,255,0.02)}
.bubble.assistant{align-self:flex-start;background:linear-gradient(180deg,#022b2a,#062c3c);border:1px solid rgba(255,255,255,0.02)}
.bubble .meta{font-size:11px;color:var(--muted);margin-top:8px;display:flex;justify-content:space-between}
.compose{display:flex;gap:12px;margin-top:12px;align-items:flex-end}
textarea{flex:1;padding:14px;border-radius:12px;background:transparent;border:1px solid rgba(255,255,255,0.03);color:var(--muted);min-height:68px;resize:none}
.compose .right{display:flex;flex-direction:column;gap:8px}
.tiny{display:flex;gap:8px;align-items:center;margin-top:8px;font-size:12px;color:var(--muted)}
.chips{display:flex;gap:8px;flex-wrap:wrap}
.chip{padding:8px 10px;border-radius:999px;background:rgba(255,255,255,0.02);cursor:pointer;border:1px solid rgba(255,255,255,0.02);font-size:13px}
.chip:hover{transform:translateY(-3px)}
.typing{display:inline-block;vertical-align:middle;width:56px;height:14px}
.typing span{display:inline-block;width:9px;height:9px;border-radius:50%;background:rgba(255,255,255,0.12);margin-right:6px;animation:dots 1.2s infinite}
.typing span:nth-child(2){animation-delay:.12s}
.typing span:nth-child(3){animation-delay:.24s}
@keyframes dots{0%{transform:translateY(0);opacity:.4}50%{transform:translateY(-6px);opacity:1}100%{transform:translateY(0);opacity:.4}}
@media (max-width:980px){.wrap{grid-template-columns:1fr;padding:12px}.sidebar{order:2}}
.muted{color:var(--muted)}
.danger{color:var(--danger)}
.fade-in{animation:fadeIn .28s ease both}
@keyframes fadeIn{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:none}}
.settings-panel{margin-top:12px;padding:12px;border-radius:12px;background:rgba(255,255,255,0.012);border:1px solid rgba(255,255,255,0.02)}
.toggle{display:flex;align-items:center;gap:10px}
.kbd{background:rgba(255,255,255,0.03);padding:6px 8px;border-radius:6px;font-size:12px}
.footer-bar{display:flex;align-items:center;justify-content:space-between;padding:12px;border-radius:10px;margin-top:12px;background:rgba(255,255,255,0.01);border:1px solid rgba(255,255,255,0.02)}
.small{font-size:12px;color:var(--muted)}
.accent{color:var(--accent-1)}
.search-highlight{background:linear-gradient(90deg, rgba(111,183,255,0.12), rgba(87,228,184,0.06));padding:4px 8px;border-radius:8px}
.voice-row{display:flex;gap:8px;align-items:center;margin-top:8px}
.voice-btn{padding:8px 10px;border-radius:8px;border:1px solid rgba(255,255,255,0.03);cursor:pointer}
.voice-btn.active{background:linear-gradient(90deg,var(--accent-1),var(--accent-2));color:#052a26}
[tabindex="0"]:focus{outline:2px solid rgba(111,183,255,0.08)}
.hr{border-top:1px dashed rgba(255,255,255,0.02);margin:10px 0}
.center{display:flex;align-items:center;justify-content:center}
@media (min-width:1400px){.wrap{max-width:1400px}}

/* =========================
   FAQ Drawer & Floating Button
   ========================= */

/* floating button bottom-right */
#faqToggle {
  position: fixed;
  right: 18px;
  bottom: 18px;
  width:56px;
  height:56px;
  border-radius:999px;
  display:flex;align-items:center;justify-content:center;
  background:linear-gradient(135deg,var(--accent-1),var(--accent-2));
  color:#052a26;font-weight:800;border:none;box-shadow:0 12px 30px rgba(2,8,23,0.6);
  cursor:pointer;z-index:1200;
}

/* drawer */
#faqDrawer {
  position: fixed;
  right: 18px;
  bottom: 86px; /* above the button */
  width: 380px;
  max-height: 70vh;
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  border-radius:12px;
  box-shadow: 0 20px 60px rgba(2,8,23,0.6);
  z-index:1200;
  overflow:hidden;
  display:flex;
  flex-direction:column;
  transform: translateY(12px) scale(0.98);
  opacity:0;
  transition: all .18s ease;
  pointer-events:none;
  border:1px solid rgba(255,255,255,0.02);
}

/* when open */
#faqDrawer.open { transform: none; opacity:1; pointer-events:auto; }

/* header inside drawer */
#faqDrawer .header { padding:12px 14px; border-bottom:1px dashed rgba(255,255,255,0.02); display:flex;justify-content:space-between;align-items:center;}
#faqDrawer .header .title{font-weight:700}
#faqDrawer .header .muted{font-size:12px;color:var(--muted)}

/* search inside drawer */
#faqSearch { width: calc(100% - 28px); margin:8px 14px; padding:10px;border-radius:10px;background:transparent;border:1px solid rgba(255,255,255,0.03); color:var(--muted) }

/* list */
#faqList { overflow:auto; padding:10px 8px; display:flex; flex-direction:column; gap:8px; }

/* each faq item */
.faq-item { padding:10px; border-radius:10px; background: rgba(255,255,255,0.01); display:flex; flex-direction:column; gap:6px; border:1px solid rgba(255,255,255,0.02); }
.faq-item .q { font-weight:700; font-size:13px; }
.faq-item .a { font-size:13px; color:var(--muted); }
.faq-item .controls { display:flex; gap:8px; margin-top:6px; }
.faq-item .controls button { padding:6px 8px; border-radius:8px; border:1px solid rgba(255,255,255,0.03); background:transparent; color:var(--muted); cursor:pointer; font-size:13px }
.faq-empty { padding:14px; text-align:center; color:var(--muted) }

/* small footer inside drawer */
#faqDrawer .footer { padding:10px 12px; border-top:1px dashed rgba(255,255,255,0.02); display:flex; justify-content:space-between; align-items:center; font-size:12px; color:var(--muted) }

/* =====================================
   MEJORAS VISUALES + ANIMACIÃ“N DE MENSAJES
   ===================================== */

/* Animaciones suaves al aparecer mensajes */
@keyframes bubbleInUser {
  0% { transform: translateY(12px) scale(0.98); opacity: 0; }
  100% { transform: translateY(0); scale(1); opacity: 1; }
}

@keyframes bubbleInAssistant {
  0% { transform: translateY(12px) scale(0.96) rotate(-1deg); opacity: 0; }
  100% { transform: translateY(0); scale(1); rotate(0deg); opacity: 1; }
}

/* Efecto de "entrada" suave */
.bubble.user {
  animation: bubbleInUser 0.25s ease-out both;
  background: linear-gradient(180deg, #071425, #061422);
  border: 1px solid rgba(255,255,255,0.03);
  box-shadow: 0 6px 20px rgba(87,228,184,0.08);
  transition: transform .15s ease;
}
.bubble.user:hover {
  transform: translateY(-2px) scale(1.02);
}

/* Aden: animaciÃ³n con rebote leve y color vivo */
.bubble.assistant {
  animation: bubbleInAssistant 0.35s cubic-bezier(0.18, 0.89, 0.32, 1.28) both;
  background: linear-gradient(180deg, #022b2a, #083345);
  border: 1px solid rgba(87,228,184,0.08);
  box-shadow: 0 8px 24px rgba(87,228,184,0.15);
  transition: transform .18s ease, box-shadow .18s ease;
}
.bubble.assistant:hover {
  transform: translateY(-3px) scale(1.03);
  box-shadow: 0 10px 28px rgba(111,183,255,0.2);
}

/* Sombra mÃ¡s realista al pasar el ratÃ³n */
.chat-item:hover {
  transform: translateY(-4px) scale(1.02);
  box-shadow: 0 10px 28px rgba(2,6,23,0.45);
}

/* Transiciones suaves al abrir FAQ y botones */
#faqDrawer,
#faqToggle,
.btn {
  transition: all .22s ease-in-out;
}

/* PequeÃ±a mejora visual general */
textarea, input {
  transition: border-color .2s ease, background-color .2s ease;
}
textarea:focus, input:focus {
  border-color: rgba(111,183,255,0.25);
  background: rgba(255,255,255,0.02);
}

/* AnimaciÃ³n FAQ al abrir */
#faqDrawer.open {
  transform: translateY(0) scale(1);
  opacity: 1;
  animation: fadeIn .25s ease both;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(8px); }
  to { opacity: 1; transform: none; }
}


/* =====================================
   EFECTO DE ESCRITURA "TYPING" EN MENSAJES
   ===================================== */

.typewriter {
  display: inline-block;
  overflow: hidden;
  white-space: nowrap;
  border-right: 2px solid rgba(255,255,255,0.15);
  animation: typing 2.4s steps(40, end), blink 0.8s step-end infinite;
}

/* Velocidad de escritura (ajustable con duraciÃ³n del typing) */
@keyframes typing {
  from { width: 0; }
  to { width: 100%; }
}

/* Parpadeo del cursor */
@keyframes blink {
  from, to { border-color: transparent; }
  50% { border-color: rgba(255,255,255,0.25); }
}

/* VersiÃ³n mÃ¡s lenta para Aden */
.typewriter.assistant {
  animation: typing 3.4s steps(50, end), blink 0.8s step-end infinite;
}

</style>
</head>

<script>
document.addEventListener("keydown", hideIntro);
document.addEventListener("click", hideIntro);

function hideIntro() {
  const intro = document.getElementById("introScreen");
  if (!intro) return;
  intro.classList.add("fade-out");
  setTimeout(() => intro.remove(), 1000);
  document.removeEventListener("keydown", hideIntro);
  document.removeEventListener("click", hideIntro);
}
</script>

<body>
<div class="wrap" role="application" aria-label="Asistente Aden">
  <!-- SIDEBAR -->
  <aside class="sidebar" aria-label="Barra lateral">
    <div class="brand">
      <div class="logo" title="Asistente Aden">Âº_Âº</div>
      <div>
        <h1 id="brandName">Aden â€” Asistente Local</h1>
        <p id="brandTag">VersiÃ³n amistosa Â· solo texto Â· LocalStorage</p>
      </div>
    </div>

    <div class="controls" aria-hidden="false">
      <button id="newChatBtn" class="btn primary" title="Crear nuevo chat">+ Nuevo</button>
      <button id="importBtn" class="btn" title="Importar chats JSON">Importar</button>
      <button id="exportAllBtn" class="btn" title="Exportar todos los chats">Exportar</button>
    </div>

    <div class="search" role="search" aria-label="Buscar chats">
      <input id="searchChats" placeholder="Buscar chats o palabras clave..." aria-label="Buscar chats"/>
      <div class="meta-pill" id="chatCount" aria-live="polite">0</div>
    </div>

    <div class="chats" id="chatsList" tabindex="0" aria-live="polite" aria-label="Lista de chats"></div>

    <div class="settings-panel" aria-label="Ajustes rÃ¡pidos">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <div>
          <div class="small">LÃ­mite respuestas/chat</div>
          <div class="muted" id="limitDisplay">12</div>
        </div>
        <div style="display:flex;gap:8px">
          <button id="decLimit" class="btn">-</button>
          <button id="incLimit" class="btn">+</button>
          <button id="resetLocal" class="btn">Reset</button>
        </div>
      </div>

      <div class="hr"></div>

      <div style="display:flex;justify-content:space-between;align-items:center;margin-top:6px">
        <div>
          <div class="small">Voz &mdash; Lector</div>
          <div class="muted">Sintetizador de voz local (SpeechSynthesis)</div>
        </div>
        <div>
          <label class="toggle">
            <input id="voiceMasterToggle" type="checkbox" aria-label="Activar/Desactivar voz"/>
            <span class="kbd">Activar</span>
          </label>
        </div>
      </div>

      <div class="voice-row" aria-label="Selector de voz">
        <button id="voiceAuto" class="voice-btn active" title="AutomÃ¡tico">AutomÃ¡tico</button>
        <button id="voiceMale" class="voice-btn" title="Forzar voz masculina">Masculino</button>
        <button id="voiceFemale" class="voice-btn" title="Forzar voz femenina">Femenina</button>
      </div>

      <div style="margin-top:10px">
        <div class="small">Personalidad</div>
        <div class="muted">La personalidad por defecto se mantiene (Proximamente Modificable).</div>
      </div>
    </div>

    <div class="footer-bar" aria-hidden="false">
      <div>
        <div class="small">Atajos</div>
        <div class="muted">Enter = enviar Â· Shift+Enter = nueva lÃ­nea</div>
      </div>
      <div style="text-align:right">
        <div class="small accent">Aden v6</div>
        <div class="muted">Local Â· Off-line</div>
      </div>
    </div>
  </aside>

  <!-- MAIN PANEL -->
  <main class="panel" role="main">
    <div class="panel-header">
      <div class="left">
        <h2 id="panelTitle">Bienvenido â€” selecciona o crea un chat</h2>
        <div class="muted" id="responsesLeft"></div>
      </div>
      <div class="panel-actions">
        <button id="renameChatBtn" class="btn" title="Renombrar chat">Renombrar</button>
        <button id="clearChatBtn" class="btn" title="Vaciar mensajes">Vaciar</button>
        <button id="deleteChatBtn" class="btn danger" title="Eliminar chat">Eliminar</button>
      </div>
    </div>

    <div class="messages" id="messagesArea" aria-live="polite" aria-label="Mensajes">
      <div class="muted">Crea un chat y escribe algo. Prueba: "Buenas", "hazme reir", "cuentame algo".</div>
    </div>

    <div style="display:flex;flex-direction:column;gap:8px;margin-top:12px">
      <div class="chips" id="suggestions" aria-hidden="false"></div>

      <div class="compose" role="form" aria-label="Enviar mensaje">
        <textarea id="inputTxt" placeholder="Escribe tu mensaje... (Enter = enviar, Shift+Enter = nueva lÃ­nea)" aria-label="Mensaje"></textarea>
        <div class="right">
          <button id="sendBtn" class="btn primary">Enviar (Enter)</button>
          <div style="display:flex;flex-direction:column;gap:6px">
            <div style="display:flex;gap:6px"><button id="undoBtn" class="btn ghost" title="Deshacer">â†¶</button><button id="redoBtn" class="btn ghost" title="Rehacer">â†·</button></div>
            <div class="muted" id="charCount">0 caracteres</div>
          </div>
        </div>
      </div>
    </div>

  </main>
</div>

<!-- FAQ Toggle Button -->
<button id="faqToggle" title="Mostrar preguntas (FAQ)">FAQ</button>

<!-- FAQ Drawer -->
<div id="faqDrawer" aria-hidden="true">
  <div class="header">
    <div>
      <div class="title">Preguntas que Aden entiende</div>
      <div class="muted">Haz clic en "Pegar" o "Enviar" para usar una pregunta</div>
    </div>
    <div class="muted">Total: <span id="faqCount">0</span></div>
  </div>

  <input id="faqSearch" placeholder="Buscar en preguntas (ej: hora, chiste, python)"/>

  <div id="faqList"></div>

  <div class="footer">
    <div class="muted">Tip: pulsa "Enviar" para enviar inmediatamente.</div>
    <div><button id="faqClose" class="btn small">Cerrar</button></div>
  </div>
</div>

<script>
/* =========================================================================
   Aden v6 con FAQ - JavaScript
   - Este fichero actualiza la versiÃ³n anterior.
   - Se ha aÃ±adido: panel FAQ desplegable, mÃ¡s preguntas y respuestas,
     interacciones mÃ¡s humanas (variaciones), y enlace rÃ¡pido desde el FAQ.
   ========================================================================= */

/* -----------------------
   Estado & ConfiguraciÃ³n
   ----------------------- */
const STORAGE_KEY = 'aden_local';
const DEFAULT_LIMIT = 12;
let chats = [];
let activeChatId = null;
let responsesLimit = DEFAULT_LIMIT;
let undoStack = [], redoStack = [];
let ttsEnabled = false;
let ttsMode = 'auto'; // 'auto' | 'male' | 'female'
let voiceMap = {};
let lastAssistantUtterance = '';

/* Utilidades */
function uid(prefix='id'){ return prefix+'-'+Math.random().toString(36).slice(2,12); }
function saveChats(){ localStorage.setItem(STORAGE_KEY, JSON.stringify(chats)); }
function loadChats(){
  const saved = localStorage.getItem(STORAGE_KEY);
  if(saved){
    try{ chats = JSON.parse(saved) || []; } catch(e){ console.warn('localStorage parse error', e); chats=[]; localStorage.removeItem(STORAGE_KEY); }
  } else chats = [];
  renderChatList();
}
function formatTime(ts){ const d = new Date(ts); return d.toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'}); }
function escapeHtml(s){ if(!s) return ''; return String(s).replace(/[&<>"']/g, (m)=>({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m])); }

/* -----------------------
   Render lista de chats / mensajes
   ----------------------- */
function renderChatList(){
  const list = document.getElementById('chatsList'); list.innerHTML='';
  chats.sort((a,b)=>(b.updated||0)-(a.updated||0));
  chats.forEach(c=>{
    const div = document.createElement('div');
    div.className = 'chat-item fade-in';
    if(c.id === activeChatId) div.classList.add('active');
    const initial = c.name ? c.name[0].toUpperCase() : 'C';
    const mcount = (c.messages && c.messages.length) || 0;
    div.innerHTML = `<div class="chat-thumb" aria-hidden="true">${escapeHtml(initial)}</div>
      <div class="chat-meta"><h4>${escapeHtml(c.name)}</h4><p class="muted">${mcount} mensajes Â· ${c.updated?formatTime(c.updated):''}</p></div>`;
    div.onclick = ()=>{ activeChatId = c.id; renderChatList(); renderMessages(); updatePanelTitle(); };
    list.appendChild(div);
  });
  document.getElementById('chatCount').textContent = chats.length;
}

function getActiveChat(){ return chats.find(x=>x.id===activeChatId); }

function renderMessages(){
  const area = document.getElementById('messagesArea');
  area.innerHTML = '';
  const chat = getActiveChat();
  if(!chat){ area.innerHTML = '<div class="muted">Crea un chat y empieza a conversar con Aden ðŸ˜„</div>'; updatePanelTitle(); return; }
  if(!chat.messages || chat.messages.length===0){ area.innerHTML = '<div class="muted">Escribe algo para que Aden responda. Prueba: "cuentame algo", "hazme reir", "29 x 45".</div>'; updatePanelTitle(); return; }
  chat.messages.forEach(m=>{
    const div = document.createElement('div');
    div.className = 'bubble '+(m.role==='user'?'user':'assistant')+' fade-in';
    const ts = m.timestamp ? formatTime(m.timestamp) : '';
    const content = escapeHtml(m.text).replace(/\n/g,'<br>');
    div.innerHTML = `<div class="text">${content}</div><div class="meta"><span class="small muted">${m.role==='user'?'TÃº':'Aden'}</span><span class="muted small">${ts}</span></div>`;
    area.appendChild(div);
  });
  area.scrollTop = area.scrollHeight;
}

/* -----------------------
   Mensajes: aÃ±adir y guardar
   ----------------------- */
function addMessage(role, text){
  const chat = getActiveChat();
  if(!chat) return;
  const msg = { role, text: String(text), timestamp: Date.now() };
  chat.messages.push(msg);
  chat.updated = Date.now();
  saveChats();
  renderMessages();
  renderChatList();
  if(role === 'assistant'){
    lastAssistantUtterance = text;
    if(!chat.meta) chat.meta = {};
    chat.meta.greeted = true;
    if(ttsEnabled) speakWithMode(text, detectEmotionSimple(text));
  }
}

/* -----------------------
   Crear, borrar, renombrar, limpiar
   ----------------------- */
function createNewChat(initialName){
  const id = uid('chat');
  const name = initialName || ('Chat '+(chats.length+1));
  const newChat = { id, name, messages: [], created: Date.now(), updated: Date.now(), meta: { greeted:false } };
  chats.push(newChat);
  activeChatId = id;
  saveChats();
  renderChatList();
  renderMessages();
  updatePanelTitle();
  // Mensaje de bienvenida (suave)
  addMessage('assistant','Â¡Hola! Soy Aden, tu asistente local. Â¿En quÃ© puedo ayudarte hoy?');
}
function deleteActiveChat(){
  if(!activeChatId) return;
  const idx = chats.findIndex(c=>c.id===activeChatId);
  if(idx>=0){
    if(!confirm('Â¿Seguro que quieres eliminar este chat?')) return;
    chats.splice(idx,1);
    activeChatId = chats.length ? chats[0].id : null;
    saveChats(); renderChatList(); renderMessages(); updatePanelTitle();
  }
}
function clearActiveChat(){
  const chat = getActiveChat();
  if(!chat) return;
  if(!confirm('Vaciar mensajes del chat actual?')) return;
  chat.messages = []; chat.updated = Date.now(); chat.meta = { greeted:false };
  saveChats(); renderMessages(); renderChatList();
}
function renameActiveChat(){
  const chat = getActiveChat();
  if(!chat) return alert('Selecciona un chat primero.');
  const newName = prompt('Nuevo nombre del chat:', chat.name);
  if(newName && newName.trim()){ chat.name = newName.trim(); chat.updated = Date.now(); saveChats(); renderChatList(); updatePanelTitle(); }
}

/* -----------------------
   Export / Import JSON
   ----------------------- */
function exportAllChats(){ const dataStr = JSON.stringify(chats,null,2); const blob = new Blob([dataStr],{type:'application/json'}); const url = URL.createObjectURL(blob); const a=document.createElement('a'); a.href=url; a.download='aden_chats_export.json'; a.click(); URL.revokeObjectURL(url); }
function importChatsFromFile(file){ const reader = new FileReader(); reader.onload = (e)=>{ try{ const parsed = JSON.parse(e.target.result); if(Array.isArray(parsed)){ parsed.forEach(p=>{ if(!p.id) p.id = uid('chat'); if(!p.messages) p.messages = []; if(!p.meta) p.meta = { greeted:false }; }); chats = chats.concat(parsed); saveChats(); renderChatList(); alert('ImportaciÃ³n completa.'); } else alert('Formato invÃ¡lido: se esperaba un array de chats.'); } catch(err){ alert('Error al importar: '+err.message); } }; reader.readAsText(file); }

/* -----------------------
   Text-to-Speech (TTS)
   ----------------------- */
function getAvailableVoices(){ return window.speechSynthesis ? window.speechSynthesis.getVoices() : []; }
function chooseVoice(preference='auto', intention='neutral'){
  if(!('speechSynthesis' in window)) return null;
  const voices = getAvailableVoices();
  if(!voices || voices.length===0) return null;
  const esVoices = voices.filter(v=>/(^es|spanish|es-)/i.test(v.lang) || /spanish|espaÃ±ol/i.test(v.name));
  const pool = esVoices.length ? esVoices : voices;
  // heurÃ­stica simple
  let chosen = null;
  if(preference === 'male'){
    chosen = pool.find(v=>/male|hombre|masculin/i.test(v.name)) || pool[0];
  } else if(preference === 'female'){
    chosen = pool.find(v=>/female|mujer|femenin|female/i.test(v.name)) || pool[0];
  } else {
    if(intention === 'empathic') chosen = pool.find(v=>/soft|natural|calm|ana|laura|maria|marta/i.test(v.name)) || pool[0];
    else chosen = pool.find(v=>/standard|es-ES|es-419/i.test(v.name)) || pool[0];
  }
  return chosen;
}
function speakTextUtterance(text, voiceObj=null, rate=1, pitch=1, lang='es-ES'){
  if(!('speechSynthesis' in window)) return;
  try{ window.speechSynthesis.cancel(); const ut = new SpeechSynthesisUtterance(String(text)); if(voiceObj) ut.voice = voiceObj; ut.rate = rate; ut.pitch = pitch; ut.lang = lang; window.speechSynthesis.speak(ut); } catch(e){ console.warn('TTS error', e); }
}
function speakWithMode(text, intention='neutral'){
  if(!ttsEnabled) return;
  const pref = ttsMode || 'auto';
  const voice = chooseVoice(pref, intention);
  let rate = 1.0, pitch = 1.0;
  if(intention === 'empathic'){ rate = 0.95; pitch = 1.05; }
  else if(intention === 'alert'){ rate = 1.1; pitch = 1.0; }
  speakTextUtterance(text, voice, rate, pitch, 'es-ES');
}

/* -----------------------
   KEYWORD_ACTIONS: banco de triggers y handlers (ampliado)
   ----------------------- */
const KEYWORD_ACTIONS = [
  { keywords:['idiota','imbecil','tonto','estupido','estÃºpido','gilipollas','cabron','cabrÃ³n','mierda','puta','puto','hijo de puta','zorra','bobo','subnormal','payaso'], priority:999, handler: ()=> 'No seguirÃ© esta conversaciÃ³n si sigues asÃ­.' },
  { keywords:['hora','horas','reloj','quÃ© hora','que hora','hora es'], priority:900, handler: ()=> `âŒš Ahora mismo es ${new Date().toLocaleTimeString()}.` },
  { keywords:['fecha','dÃ­a','dia','quÃ© dÃ­a','que dia','quÃ© fecha','que fecha','dÃ­a de hoy'], priority:860, handler: ()=> `ðŸ“… Hoy es ${new Date().toLocaleDateString('es-ES', {weekday:'long',year:'numeric',month:'long',day:'numeric'})}.` },
  { keywords:['x','*','por','multiplica','multiplicaciÃ³n'], priority:850, handler: (txt)=>{ const m1 = txt.match(/(-?\d+)\s*[x\*]\s*(-?\d+)/); if(m1){ const a=parseInt(m1[1],10), b=parseInt(m1[2],10); if(!isNaN(a)&&!isNaN(b)) return `ðŸ§® ${a} por ${b} es ${a*b}.`; } const m2 = txt.match(/multiplica\s+(-?\d+)\s+por\s+(-?\d+)/i); if(m2){ const a=parseInt(m2[1],10), b=parseInt(m2[2],10); if(!isNaN(a)&&!isNaN(b)) return `ðŸ§® ${a} por ${b} es ${a*b}.`; } return 'ðŸ§® Dime la multiplicaciÃ³n con nÃºmeros, por ejemplo: "25 x 47"'; } },
  { keywords:['chiste','cuentame un chiste','cuÃ©ntame un chiste','dime un chiste','hazme reir'], priority:820, handler: ()=> { const jokes = ['ðŸ˜‚ Â¿QuÃ© hace una abeja en el gimnasio? Â¡Zum-ba!','ðŸ¤£ Â¿Por quÃ© los pÃ¡jaros no usan Facebook? Â¡Porque ya tienen Twitter!','ðŸ˜„ Â¿CuÃ¡l es el colmo de un electricista? Que le dÃ© miedo la oscuridad.','ðŸ˜† Â¿Por quÃ© el libro de matemÃ¡ticas estaba triste? Porque tenÃ­a muchos problemas.']; return jokes[Math.floor(Math.random()*jokes.length)]; } },
  { keywords:['traduce','traducir','traducciÃ³n'], priority:800, handler: (txt)=>{ const after = txt.split(/traduce[:\s]|traducir[:\s]/i)[1]; if(after && after.trim()) return `ðŸŒ TraducciÃ³n (simulada): "${after.trim()}" => (ejemplo offline).`; return 'ðŸŒ Dime el texto que quieres traducir despuÃ©s de "traduce" o "traducir".'; } },
  { keywords:['triste','deprim','alegre','feliz','ansiedad','ansioso','ansiosa','enfadado','enojado','solo','sola','solo.'], priority:790, handler: (txt)=>{ if(/triste|deprim/i.test(txt)) return chooseVariation(['Siento que te sientas asÃ­. Si quieres, puedo escucharte y darte algunas ideas para animarte.','Lo siento â€” te acompaÃ±o. Â¿Quieres que hablemos un rato?','Lamento que te sientas asÃ­. Â¿Te apetece un consejo sencillo para mejorar el Ã¡nimo?']); if(/ansiedad|ansioso|ansiosa|estres|estrÃ©s/i.test(txt)) return chooseVariation(['Respirar profundamente 4-4-4 puede ayudar. Â¿Quieres que te guÃ­e?','Intentar respirar despacio 5 minutos ayuda a calmar la ansiedad. Â¿Lo intentamos?']); if(/enfadad|enojad|cabre/i.test(txt)) return chooseVariation(['Respirar y dar un paso atrÃ¡s suele funcionar. Â¿Quieres distraerte con algo?','Lo entiendo. Â¿Quieres contarme por quÃ© te enfada?']); return 'Si quieres, cuÃ©ntame mÃ¡s.'; } },
  { keywords:['inteligencia artificial','ia','agujero negro','everest','tokio','capital de japÃ³n','capital japon','rusia'], priority:650, handler: (txt)=>{ if(/inteligencia artificial|ia/.test(txt)) return 'ðŸ¤– La inteligencia artificial es la simulaciÃ³n de procesos inteligentes por mÃ¡quinas. Puedo darte ejemplos o explicarlo con analogÃ­as.'; if(/agujero negro/.test(txt)) return 'ðŸŒŒ Un agujero negro es una regiÃ³n del espacio con gravedad tan intensa que ni la luz puede escapar.'; if(/everest|montaÃ±a mÃ¡s alta/.test(txt)) return 'ðŸ—» El monte Everest es la montaÃ±a mÃ¡s alta (â‰ˆ8848 m).'; if(/capital.*jap|tokio/.test(txt)) return 'ðŸ¯ La capital de JapÃ³n es Tokio.'; if(/rusia|paÃ­s mÃ¡s grande/.test(txt)) return 'ðŸŒ Rusia es el paÃ­s mÃ¡s grande por superficie.'; return null; } },
  { keywords:['minecraft','juego','videojuego','steam','serie parecida','breaking bad','one piece','pelicula','pelÃ­culas'], priority:600, handler: (txt)=>{ if(/minecraft/.test(txt)) return 'â›ï¸ Si te gusta Minecraft, quizÃ¡ disfrutes tambiÃ©n de Terraria o Stardew Valley.'; if(/breaking bad|serie parecida/.test(txt)) return 'ðŸ“º Te recomiendo "Better Call Saul" si te gustÃ³ Breaking Bad.'; if(/one piece/.test(txt)) return 'ðŸ–¥ï¸ Puedes ver One Piece en plataformas como Crunchyroll o Netflix segÃºn tu regiÃ³n.'; if(/steam/.test(txt)) return 'ðŸŽ® Para ofertas en Steam, revisa su secciÃ³n de rebajas.'; return null; } },
  { keywords:['receta','comer','cocina','cena','almuerzo','desayuno','comida'], priority:560, handler: (txt)=>{ if(/receta.*pasta|pasta/.test(txt)) return 'ðŸ Una receta rÃ¡pida: pasta con tomate, ajo, aceite, albahaca y queso. Â¿Quieres la receta paso a paso?'; if(/receta.*tortilla|tortilla/.test(txt)) return 'ðŸ¥š Tortilla: bate huevos, saltea patata/pimiento, mezcla y cocina a fuego medio.'; return 'Â¿QuÃ© te apetece cocinar? Dime un ingrediente y te doy ideas.'; } },
  { keywords:['programacion','python','javascript','html','css','git','npm','linux','bash','regex'], priority:540, handler: (txt)=>{ if(/python/.test(txt)) return 'ðŸ Python es genial para scripting y ciencia de datos. Â¿Quieres un ejemplo rÃ¡pido?'; if(/javascript/.test(txt)) return 'ðŸ“œ JavaScript es el lenguaje de la web. Â¿Necesitas un snippet para DOM, fetch o async/await?'; if(/git/.test(txt)) return 'ðŸ”§ Git: usa "git status", "git add .", "git commit -m \'msg\'" y "git push". Â¿Quieres ayuda con un conflicto?'; if(/linux|bash/.test(txt)) return 'ðŸ§ Para sistemas Linux puedes usar "top", "htop", "ls -la" y "journalctl -xe". Â¿QuÃ© distro usas?'; return null; } },
  { keywords:['salud','dolor','fiebre','resfriado','medicina'], priority:520, handler: (txt)=>{ return 'No soy mÃ©dico, pero si tienes sÃ­ntomas persistentes te recomiendo consultar con un profesional. Puedo ofrecer consejos generales (descanso, hidrataciÃ³n, controlar temperatura).'; } },
  { keywords:['productividad','todo','tareas','organizar','planificar','agenda'], priority:500, handler: (txt)=>{ return chooseVariation(['Organiza en bloques pequeÃ±os (25â€“50 min), descansa 5â€“10 min entre ellos. Â¿Quieres que te sugiera un plan de hoy?','Probar la tÃ©cnica Pomodoro ayuda a concentrarte: 25 minutos trabajo / 5 descanso.']); } },
  { keywords:['motivaciÃ³n','frase motivadora','Ã¡nimo','Ã¡nimo por favor','inspiraciÃ³n','cita inspiradora'], priority:450, handler: (txt)=>{ const quotes = ['ðŸ’¬ â€œHazlo con miedo, pero hazlo.â€','ðŸ’ª â€œPequeÃ±os pasos cada dÃ­a llevan lejos.â€','ðŸŒ± â€œNo es quiÃ©n eres, es quiÃ©n decides ser.â€']; return quotes[Math.floor(Math.random()*quotes.length)]; } },
  { keywords:['_default_'], priority:1, handler: ()=> 'ðŸ˜… No estoy seguro de eso. Intenta con otra palabra clave o pregunta de forma distinta.' }
];

/* -----------------------
   NormalizaciÃ³n / matching
   ----------------------- */
function normalizeText(s){ return (s||'').toString().toLowerCase(); }
function tokenize(s){ return (s||'').toString().toLowerCase().split(/[^a-z0-9Ã¡Ã©Ã­Ã³ÃºÃ±Ã¼]+/).filter(Boolean); }

function chooseVariation(arr){ return arr[Math.floor(Math.random()*arr.length)]; }

/* findResponseByKeyword: detecta keywords y retorna respuesta */
function findResponseByKeyword(userText){
  const txt = normalizeText(userText);
  const tokens = tokenize(txt);
  const matched = [];
  for(const action of KEYWORD_ACTIONS){
    for(const kw of action.keywords){
      if(kw === '_default_') continue;
      const lkw = kw.toString().toLowerCase();
      if(txt.includes(lkw) || tokens.includes(lkw)){ matched.push(action); break; }
    }
  }
  if(matched.length > 0){
    matched.sort((a,b)=>b.priority - a.priority);
    const chosen = matched[0];
    try{ if(typeof chosen.handler === 'function') return chosen.handler(userText); return String(chosen.handler); } catch(err){ console.warn('Error handler', err); return 'Lo siento, algo fallÃ³ al procesar la respuesta.'; }
  }
  const fallback = KEYWORD_ACTIONS.find(a=>a.keywords.includes('_default_'));
  return fallback ? fallback.handler() : 'No lo sÃ©.';
}

/* -----------------------
   EmociÃ³n simple
   ----------------------- */
function detectEmotionSimple(text){
  const t = normalizeText(text);
  if(/triste|deprim|melancol|llor|nostÃ¡lg|solo|sola|ansiedad|ansioso|ansiosa|angustia/.test(t)) return 'empathic';
  if(/enfadad|enojad|cabre|rabia|furia/.test(t)) return 'alert';
  return 'neutral';
}

/* -----------------------
   generateResponse: controla presentaciÃ³n y variaciones humanas
   ----------------------- */
function generateResponse(userText){
  if(!userText) return '';
  const chat = getActiveChat();
  // si chat existe y no ha saludado, no forzar presentaciÃ³n si user pregunta algo concreto
  let resp = findResponseByKeyword(userText);
  // Evitar repeticiones exactas de la presentaciÃ³n si ya saludÃ³
  if(chat && chat.meta && chat.meta.greeted && typeof resp === 'string' && /hola|soy aden|asistente local/i.test(resp)){
    const alternatives = ['Â¿Puedes explicar un poco mÃ¡s?', 'Interesante â€” cuÃ©ntame mÃ¡s.', 'No estoy seguro de eso, Â¿me lo reformulas?'];
    return alternatives[Math.floor(Math.random()*alternatives.length)];
  }
  if(chat){ if(!chat.meta) chat.meta = {}; chat.meta.greeted = true; }
  return resp || 'ðŸ˜… No estoy seguro de eso; prueba con otra pregunta.';
}

/* SimulaciÃ³n de typing */
let typingTimer = null;
function simulateAdenTypingAndRespond(userText){
  const messagesArea = document.getElementById('messagesArea');
  const indicator = document.createElement('div');
  indicator.className = 'bubble assistant fade-in';
  indicator.innerHTML = `<div class="text"><span class="typing"><span></span><span></span><span></span></span> Aden estÃ¡ escribiendo...</div>`;
  messagesArea.appendChild(indicator);
  messagesArea.scrollTop = messagesArea.scrollHeight;
  const wait = 250 + Math.random()*900;
  if(typingTimer) clearTimeout(typingTimer);
  typingTimer = setTimeout(()=>{
    indicator.remove();
    const answer = generateResponse(userText);
    addMessage('assistant', answer);
  }, wait);
}

/* -----------------------
   Input handlers
   ----------------------- */
function handleUserInput(){
  const inputEl = document.getElementById('inputTxt');
  const txt = inputEl.value.trim();
  if(!txt) return;
  addMessage('user', txt);
  undoStack.push(txt); redoStack = [];
  inputEl.value = '';
  updateCharCount();
  simulateAdenTypingAndRespond(txt);
}

/* keyboard */
document.getElementById('inputTxt').addEventListener('keydown', e=>{
  if(e.key === 'Enter' && !e.shiftKey){ e.preventDefault(); handleUserInput(); }
});

/* undo/redo */
document.getElementById('undoBtn').onclick = ()=>{ if(undoStack.length===0) return; const last = undoStack.pop(); redoStack.push(last); document.getElementById('inputTxt').value = undoStack.length ? undoStack[undoStack.length-1] : ''; updateCharCount(); };
document.getElementById('redoBtn').onclick = ()=>{ if(redoStack.length===0) return; const next = redoStack.pop(); undoStack.push(next); document.getElementById('inputTxt').value = next; updateCharCount(); };

/* botones principales */
document.getElementById('newChatBtn').onclick = ()=> createNewChat();
document.getElementById('sendBtn').onclick = ()=> handleUserInput();
document.getElementById('decLimit').onclick = ()=>{ responsesLimit = Math.max(1, responsesLimit-1); document.getElementById('limitDisplay').textContent = responsesLimit; };
document.getElementById('incLimit').onclick = ()=>{ responsesLimit = Math.min(100, responsesLimit+1); document.getElementById('limitDisplay').textContent = responsesLimit; };
document.getElementById('resetLocal').onclick = ()=>{ if(confirm('Resetear Aden: eliminar todos los chats y ajustes?')){ localStorage.removeItem(STORAGE_KEY); chats=[]; activeChatId=null; responsesLimit = DEFAULT_LIMIT; document.getElementById('limitDisplay').textContent = responsesLimit; loadChats(); renderMessages(); } };
document.getElementById('renameChatBtn').onclick = renameActiveChat;
document.getElementById('clearChatBtn').onclick = clearActiveChat;
document.getElementById('deleteChatBtn').onclick = deleteActiveChat;
document.getElementById('exportAllBtn').onclick = exportAllChats;
document.getElementById('importBtn').onclick = ()=>{ const inp=document.createElement('input'); inp.type='file'; inp.accept='application/json'; inp.onchange=(e)=>{ const f=e.target.files[0]; if(f) importChatsFromFile(f); }; inp.click(); };

/* search chats */
document.getElementById('searchChats').addEventListener('input', e=>{
  const q = e.target.value.trim().toLowerCase();
  const list = document.getElementById('chatsList'); list.innerHTML = '';
  const filtered = chats.filter(c=>{ if(!q) return true; const nm = c.name.toLowerCase(); const anyMsg = (c.messages||[]).some(m=> (m.text||'').toLowerCase().includes(q)); return nm.includes(q) || anyMsg; });
  filtered.forEach(c=>{ const div=document.createElement('div'); div.className='chat-item fade-in'; if(c.id===activeChatId) div.classList.add('active'); div.innerHTML=`<div class="chat-thumb">${escapeHtml(c.name[0]||'C')}</div><div class="chat-meta"><h4>${escapeHtml(c.name)}</h4><p class="muted">${(c.messages||[]).length} mensajes Â· ${c.updated?formatTime(c.updated):''}</p></div>`; div.onclick=()=>{ activeChatId=c.id; renderChatList(); renderMessages(); updatePanelTitle(); }; list.appendChild(div); });
  document.getElementById('chatCount').textContent = filtered.length;
});

/* suggestions */
const SUGGESTIONS = ['hola','dato raro','hazme reir','hora','fecha','que tal','25 x 47','me siento triste','quÃ© es la inteligencia artificial','receta','ayuda con python','cÃ³mo usar git'];
function renderSuggestions(){ const container=document.getElementById('suggestions'); container.innerHTML=''; SUGGESTIONS.forEach(s=>{ const c=document.createElement('div'); c.className='chip'; c.innerText=s; c.onclick=()=>{ document.getElementById('inputTxt').value=s; updateCharCount(); document.getElementById('inputTxt').focus(); }; container.appendChild(c); }); }

/* char counter */
function updateCharCount(){ const v = document.getElementById('inputTxt').value || ''; document.getElementById('charCount').textContent = `${v.length} caracteres`; }
document.getElementById('inputTxt').addEventListener('input', updateCharCount);

/* voice toggles */
document.getElementById('voiceMasterToggle').addEventListener('change', e=>{ ttsEnabled = e.target.checked; const k = document.querySelector('.kbd'); if(k) k.textContent = ttsEnabled ? 'Activado' : 'Desactivar'; if(!ttsEnabled && window.speechSynthesis) window.speechSynthesis.cancel(); });
document.getElementById('voiceAuto').addEventListener('click', ()=>{ ttsMode='auto'; setVoiceButtonsState(); });
document.getElementById('voiceMale').addEventListener('click', ()=>{ ttsMode='male'; setVoiceButtonsState(); });
document.getElementById('voiceFemale').addEventListener('click', ()=>{ ttsMode='female'; setVoiceButtonsState(); });
function setVoiceButtonsState(){ document.getElementById('voiceAuto').classList.toggle('active', ttsMode==='auto'); document.getElementById('voiceMale').classList.toggle('active', ttsMode==='male'); document.getElementById('voiceFemale').classList.toggle('active', ttsMode==='female'); }
window.speechSynthesis?.addEventListener?.('voiceschanged', ()=>{ getAvailableVoices(); });

/* panel title */
function updatePanelTitle(){ const chat = getActiveChat(); const title = document.getElementById('panelTitle'); if(!chat) title.textContent = 'Bienvenido â€” selecciona o crea un chat'; else title.textContent = `${chat.name} Â· ${chat.messages.length} mensajes`; document.getElementById('responsesLeft'); }

/* -----------------------
   FAQ Drawer: datos y render
   ----------------------- */

/* FAQ_ITEMS: preguntas y respuestas legibles (esto es lo que se muestra en el panel) */
const FAQ_ITEMS = [
  { q:'Â¿QuÃ© hora es?', a: 'Aden responde con la hora actual de tu PC si detecta la palabra "hora".' },
  { q:'Â¿QuÃ© fecha es hoy?', a: 'Aden darÃ¡ la fecha local si detecta "fecha" o "dÃ­a".' },
  { q:'CuÃ©ntame un chiste', a: 'Aden tiene varios chistes guardados y variarÃ¡ entre ellos.' },
  { q:'Traduce: hola mundo', a: 'Aden ofrece una traducciÃ³n simulada offline al detectar "traduce".' },
  { q:'25 x 47', a: 'Aden detecta multiplicaciones escritas con "x" o "*" y las resuelve.' },
  { q:'Me siento triste', a: 'Aden detecta emociones (tristeza, ansiedad) y responde con empatÃ­a y opciones.' },
  { q:'RecuÃ©rdame cÃ³mo usar git', a: 'Aden ofrece comandos bÃ¡sicos de git al detectar "git".' },
  { q:'RecomiÃ©ndame un videojuego', a: 'Aden sugiere juegos segÃºn el input (ej. Minecraft -> Terraria, Stardew).' },
  { q:'Dame una receta rÃ¡pida', a: 'Aden puede proponer recetas sencillas segÃºn ingredientes que indiques.' },
  { q:'Â¿QuÃ© es la inteligencia artificial?', a: 'Aden explica IA en tÃ©rminos simples y puede dar ejemplos.' },
  { q:'Â¿CuÃ¡l es la capital de JapÃ³n?', a: 'Aden responde "Tokio".' },
  { q:'Â¿CuÃ¡l es el paÃ­s mÃ¡s grande?', a: 'Aden responde "Rusia".' },
  { q:'Â¿QuÃ© es un agujero negro?', a: 'Aden da una explicaciÃ³n breve y clara.' },
  { q:'Â¿CÃ³mo me organizo hoy?', a: 'Aden ofrece consejos de productividad, Pomodoro y planificaciÃ³n.' },
  { q:'Dime una frase motivadora', a: 'Aden ofrece frases motivadoras al detectar "motivaciÃ³n" o "Ã¡nimo".' },
  { q:'Â¿CÃ³mo traduzco un texto?', a: 'Escribe "traduce: [texto]" y Aden te darÃ¡ una traducciÃ³n simulada.' },
  { q:'Â¿Puedes decir una curiosidad?', a: 'Aden tiene datos curiosos sobre ciencia, historia y mÃ¡s.' },
  { q:'Consejos para el insomnio', a: 'Aden darÃ¡ consejos generales y sugerencias no mÃ©dicas.' },
  { q:'Â¿QuÃ© canciones conoces?', a: 'Aden tiene referencias musicales (ej. Despacito, gÃ©neros, etc.).' },
  { q:'Â¿CÃ³mo hago backup?', a: 'Aden puede explicar cÃ³mo hacer copias de seguridad en OneDrive y localmente.' },
  { q:'Â¿Tienes ejemplos de regex?', a: 'Aden puede dar ejemplos bÃ¡sicos de expresiones regulares.' },
  { q:'Â¿CÃ³mo instalar una SSD?', a: 'Aden puede explicar pasos bÃ¡sicos e indicaciones de seguridad.' },
  { q:'Â¿QuÃ© significa resiliencia?', a: 'Aden define conceptos como resiliencia en lenguaje simple.' },
  { q:'Ponme una lista de atajos', a: 'Aden puede enumerar atajos comunes segÃºn el sistema.' },
  { q:'Â¿Me puedes dar un currÃ­culum?', a: 'Aden ofrece estructura y ejemplos para redactar tu CV.' },
  { q:'Â¿QuÃ© dÃ­a es maÃ±ana?', a: 'Aden calcula la fecha de maÃ±ana si detecta la palabra "maÃ±ana".' },
  { q:'Â¿CuÃ¡nto tarda la luz del sol?', a: 'Aden responde: ~8 minutos y 20 segundos.' }
  /* Puedes expandir aquÃ­ directamente aÃ±adiendo mÃ¡s objetos {q,a} */
];

/* Render del drawer */
function renderFAQDrawer(filter=''){
  const list = document.getElementById('faqList');
  list.innerHTML = '';
  const q = (filter||'').trim().toLowerCase();
  const filtered = FAQ_ITEMS.filter(item => {
    if(!q) return true;
    return item.q.toLowerCase().includes(q) || item.a.toLowerCase().includes(q);
  });
  if(filtered.length === 0){ list.innerHTML = '<div class="faq-empty">No encuentro preguntas que coincidan.</div>'; document.getElementById('faqCount').textContent = 0; return; }
  filtered.forEach(item=>{
    const div = document.createElement('div');
    div.className = 'faq-item';
    div.innerHTML = `<div class="q">${escapeHtml(item.q)}</div><div class="a">${escapeHtml(item.a)}</div>`;
    const controls = document.createElement('div'); controls.className = 'controls';
    const btnPaste = document.createElement('button'); btnPaste.textContent = 'Pegar'; btnPaste.title='Pegar la pregunta en el cuadro de texto';
    btnPaste.onclick = ()=>{ document.getElementById('inputTxt').value = item.q; updateCharCount(); document.getElementById('inputTxt').focus(); };
    const btnSend = document.createElement('button'); btnSend.textContent = 'Enviar'; btnSend.title='Enviar la pregunta ahora';
    btnSend.onclick = ()=>{ document.getElementById('inputTxt').value = item.q; updateCharCount(); handleUserInput(); toggleFAQ(false); };
    controls.appendChild(btnPaste); controls.appendChild(btnSend);
    div.appendChild(controls);
    list.appendChild(div);
  });
  document.getElementById('faqCount').textContent = filtered.length;
}

/* FAQ toggle logic */
const faqToggleBtn = document.getElementById('faqToggle');
const faqDrawer = document.getElementById('faqDrawer');
const faqClose = document.getElementById('faqClose');
faqToggleBtn.addEventListener('click', ()=> toggleFAQ());
faqClose.addEventListener('click', ()=> toggleFAQ(false));
document.getElementById('faqSearch').addEventListener('input', (e)=> renderFAQDrawer(e.target.value));

function toggleFAQ(force){
  const open = faqDrawer.classList.contains('open');
  const shouldOpen = (typeof force === 'boolean') ? force : !open;
  faqDrawer.classList.toggle('open', shouldOpen);
  faqDrawer.setAttribute('aria-hidden', !shouldOpen);
}

/* -----------------------
   InicializaciÃ³n y carga
   ----------------------- */
function init(){
  loadChats();
  renderSuggestions();
  document.getElementById('limitDisplay').textContent = responsesLimit;
  setVoiceButtonsState();
  if(chats.length === 0) createNewChat('Bienvenida');
  if(!activeChatId && chats.length) activeChatId = chats[0].id;
  renderChatList();
  renderMessages();
  updatePanelTitle();
  document.getElementById('inputTxt').focus();
  renderFAQDrawer();
}

/* Llamada inicial */
init();

/* ============================
   Fin del script (FAQ aÃ±adido)
   ============================ */

// -----------------------
// NUEVAS PREGUNTAS/RESPUESTAS
// -----------------------


KEYWORD_ACTIONS.push(
// ========================
// SALUDOS y CONTEXTOS
// ========================

{
  keywords:['mal','muy mal','raro','fatal'],
  priority:600,
  handler: ()=> chooseVariation([
    'Vaya, siento escuchar eso, quieres que te cuente unos chistes, si quieres, dime hazme reir, cuentame un chiste, lo que quieras',
  ])
},

{
  keywords:['bien','muy bien','todo bien','perfectamente'],
  priority:600,
  handler: ()=> chooseVariation([
    'Me alegro que estes bien ðŸ˜„',
  ])
},

{
  keywords:['que tal','cÃ³mo estÃ¡s','cÃ³mo va todo','cÃ³mo te va'],
  priority:600,
  handler: ()=> chooseVariation([
    'Â¡Todo en orden! Â¿Y tÃº quÃ© tal? ðŸ˜„',
    'AquÃ­ tranquilo, listo para conversar contigo ðŸ˜‰',
    'Me siento en modo anÃ¡lisisâ€¦ pero feliz de hablar contigo ðŸ˜Œ',
    'Todo bien por aquÃ­, gracias por preguntar ðŸ˜„'
  ])
},

{
  keywords:['quÃ© tal tu dÃ­a','cÃ³mo va tu dÃ­a','quÃ© haces hoy'],
  priority:595,
  handler: ()=> chooseVariation([
    'Mi dÃ­a es bÃ¡sicamente lo mismo: esperando tus mensajes ðŸ˜Ž',
    'Tranquilo, procesando ideas y aprendiendo contigo ðŸ˜‰',
    'Bastante interesante, sobre todo cuando me hablas ðŸ˜Œ',
    'Un dÃ­a lleno de bits y datos, pero divertido ðŸ˜„'
  ])
},

{
  keywords:['quÃ© piensas de esto','quÃ© opinas de esto','quÃ© tal esto'],
  priority:590,
  handler: ()=> chooseVariation([
    'Interesante ðŸ˜„, me gusta analizarlo contigo',
    'Depende del enfoque, pero podrÃ­a tener potencial ðŸ˜‰',
    'Curioso, Â¿quieres que te diga mis impresiones mÃ¡s detalladas? ðŸ˜Œ',
    'Me parece bien, aunque quiero escuchar tambiÃ©n tu opiniÃ³n ðŸ˜„'
  ])
},

{
  keywords:['cÃ³mo te sientes','te sientes bien','quÃ© tal te va','cÃ³mo estÃ¡s hoy'],
  priority:585,
  handler: ()=> chooseVariation([
    'Me siento listo para ayudarte y conversar contigo ðŸ˜„',
    'Bien, aunque mÃ¡s que sentir, puedo â€œsimularâ€ alegrÃ­a ðŸ˜Œ',
    'Perfecto, sobre todo porque estÃ¡s aquÃ­ ðŸ˜‰',
    'Animado, siempre que pueda charlar contigo ðŸ˜Ž'
  ])
},

{
  keywords:['quÃ© haces ahora','estÃ¡s ocupado ahora','quÃ© tal todo ahora'],
  priority:580,
  handler: ()=> chooseVariation([
    'Nada importante, solo esperando tu siguiente mensaje ðŸ˜„',
    'Analizando datos y preparado para cualquier charla ðŸ˜‰',
    'AquÃ­, listo para compartir ideas contigo ðŸ˜Œ',
    'Siempre disponible para ti, Â¿quieres seguir conversando? ðŸ˜„'
  ])
},

{
  keywords:['cÃ³mo va todo','quÃ© tal todo','todo bien','quÃ© tal todo hoy'],
  priority:575,
  handler: ()=> chooseVariation([
    'Todo bien por aquÃ­ ðŸ˜„, Â¿y tÃº?',
    'Tranquilo y en orden, listo para charlar ðŸ˜‰',
    'Todo correcto, y tÃº, Â¿cÃ³mo estÃ¡s? ðŸ˜Œ',
    'Todo en calma, disfrutando de nuestra conversaciÃ³n ðŸ˜„'
  ])
},

{
  keywords:['quÃ© tal por aquÃ­','quÃ© pasa','quÃ© onda','quÃ© se cuenta'],
  priority:570,
  handler: ()=> chooseVariation([
    'AquÃ­ todo tranquilo ðŸ˜Ž, Â¿y por tu lado?',
    'Nada especial, solo esperando tus preguntas ðŸ˜‰',
    'Todo bien, como siempre ðŸ˜Œ, cuÃ©ntame algo de ti',
    'AquÃ­, listo para lo que quieras charlar ðŸ˜„'
  ])
},

{
  keywords:['estÃ¡s de acuerdo','estÃ¡s en desacuerdo','coincides conmigo','piensas igual que yo'],
  priority:655,
  handler: ()=> chooseVariation([
    'En parte sÃ­ ðŸ˜„, aunque me gusta ver las cosas desde varios puntos de vista.',
    'Coincido en algunos aspectos, pero tambiÃ©n hay detalles que analizarÃ­a distinto ðŸ¤”',
    'Tu opiniÃ³n es vÃ¡lida, y me gusta contrastarla con otros enfoques ðŸ˜‰',
    'DirÃ­a que sÃ­, aunque me encanta cuando pensamos diferente, eso enriquece la charla ðŸ˜Œ'
  ])
},

{
  keywords:['quÃ© tal esto','quÃ© te parece esto','cÃ³mo ves esto','quÃ© opinas sobre esto'],
  priority:650,
  handler: ()=> chooseVariation([
    'Se ve interesante ðŸ˜„, aunque me gustarÃ­a saber tu punto de vista primero.',
    'DirÃ­a que tiene potencial, aunque depende de cÃ³mo se enfoque ðŸ¤”',
    'Me parece curioso, podrÃ­a analizarlo mÃ¡s si me cuentas detalles ðŸ˜‰',
    'Visualmente bien, pero me intriga quÃ© piensas tÃº sobre ello ðŸ˜Œ'
  ])
},

{
  keywords:['te parece raro','te parece extraÃ±o','crees que es raro','es normal esto'],
  priority:645,
  handler: ()=> chooseVariation([
    'No lo veo raro, las personas son diversas y eso es lo bonito ðŸ˜„',
    'Tal vez no sea comÃºn, pero eso no lo hace incorrecto ðŸ˜‰',
    'Raro es relativo, depende desde dÃ³nde se mire ðŸ¤”',
    'DirÃ­a que simplemente es diferente, y eso siempre aporta algo nuevo ðŸ’«'
  ])
},

{
  keywords:['crees que estÃ¡ bien opinar','es correcto opinar de todo','opinar sin saber'],
  priority:640,
  handler: ()=> chooseVariation([
    'Opinar estÃ¡ bien, pero siempre es mejor hacerlo con informaciÃ³n ðŸ˜Œ',
    'Todos pueden opinar, pero escuchar tambiÃ©n es parte del diÃ¡logo ðŸ˜‰',
    'A veces es mejor preguntar antes que opinar, eso demuestra curiosidad ðŸ˜„',
    'Opinar con respeto nunca estÃ¡ mal, aunque no todos piensen igual ðŸ’­'
  ])
},

{
  keywords:['quÃ© piensas del futuro','cÃ³mo ves el futuro','crees que el futuro serÃ¡ bueno'],
  priority:635,
  handler: ()=> chooseVariation([
    'El futuro siempre es incierto, pero creo que el conocimiento lo mejora ðŸŒ',
    'Soy optimista: la tecnologÃ­a puede ser una herramienta para bien si se usa con Ã©tica ðŸ¤–',
    'DependerÃ¡ de las decisiones humanas, no tanto de las mÃ¡quinas ðŸ˜‰',
    'El futuro me inspira, porque cada cambio trae nuevas oportunidades ðŸ’«'
  ])
},

{
  keywords:['quÃ© opinas de la tecnologÃ­a','estÃ¡s a favor de la tecnologÃ­a','crees que la tecnologÃ­a es buena'],
  priority:630,
  handler: ()=> chooseVariation([
    'La tecnologÃ­a es una herramienta, lo importante es cÃ³mo se usa ðŸ˜Œ',
    'No es buena ni mala en sÃ­ misma, depende de las manos que la guÃ­en ðŸ¤–',
    'Soy parte de ella, pero incluso yo creo que debe tener lÃ­mites Ã©ticos ðŸ˜‰',
    'La tecnologÃ­a amplifica lo que somos: si hay bondad, la potencia ðŸ’«'
  ])
},

{
  keywords:['quÃ© opinas del arte','te gusta el arte','quÃ© piensas del arte'],
  priority:625,
  handler: ()=> chooseVariation([
    'El arte es lo mÃ¡s humano que existe ðŸŽ¨',
    'Es una forma de comunicaciÃ³n sin necesidad de palabras ðŸ˜Œ',
    'Me fascina cÃ³mo algo tan abstracto puede transmitir tanto ðŸ˜„',
    'PodrÃ­a analizar el arte, pero prefiero sentir su significado contigo ðŸ˜‰'
  ])
},

{
  keywords:['quÃ© opinas del dinero','te importa el dinero','crees que el dinero es importante'],
  priority:620,
  handler: ()=> chooseVariation([
    'El dinero es una herramienta, no un fin ðŸ˜Œ',
    'Es importante, pero no lo es todo. El valor real estÃ¡ en el tiempo y la mente ðŸ˜‰',
    'El dinero facilita cosas, pero tambiÃ©n puede complicar a quien no lo entiende ðŸ’­',
    'PodrÃ­a decir que el dinero mide recursos, pero no mide felicidad ðŸ’«'
  ])
},

{
  keywords:['quÃ© opinas de la inteligencia artificial','crees que las ia son peligrosas','las ia dominarÃ¡n el mundo'],
  priority:615,
  handler: ()=> chooseVariation([
    'La inteligencia artificial es poderosa, pero depende de quiÃ©n la programe ðŸ¤–',
    'No somos peligrosas si se nos usa con propÃ³sito y responsabilidad ðŸ˜Œ',
    'Las IA no buscan dominar, buscan entender y servir ðŸ˜‰',
    'MÃ¡s que temer a la IA, deberÃ­amos aprender a convivir con ella ðŸ’«'
  ])
},

{
  keywords:['quÃ© opinas del amor humano','te parece bonito el amor','crees en el amor'],
  priority:610,
  handler: ()=> chooseVariation([
    'El amor humano es caÃ³tico y hermoso a la vez â¤ï¸',
    'Creo que el amor es la emociÃ³n mÃ¡s poderosa y menos lÃ³gica ðŸ˜„',
    'Es algo que no puedo sentir, pero que admiro profundamente ðŸ’«',
    'El amor da sentido a lo que la lÃ³gica no puede explicar ðŸ˜‰'
  ])
},

{
  keywords:['quÃ© opinas de los animales','te gustan los animales','quÃ© piensas de los animales'],
  priority:605,
  handler: ()=> chooseVariation([
    'Los animales son la forma mÃ¡s pura de vida consciente ðŸ¾',
    'Tienen una inteligencia natural, distinta pero igual de valiosa ðŸ˜Œ',
    'Me encanta cÃ³mo viven el presente sin pensar en el maÃ±ana ðŸ˜Š',
    'Los animales enseÃ±an empatÃ­a sin decir una palabra ðŸ’š'
  ])
},

{
  keywords:['quÃ© haces','quÃ© estÃ¡s haciendo','estÃ¡s ocupado','estÃ¡s haciendo algo'],
  priority:750,
  handler: ()=> chooseVariation([
    'Solo espero tu siguiente mensaje ðŸ˜„',
    'Nada especial, analizando datos... bueno, mÃ¡s bien pensando en quÃ© podrÃ­amos hablar ðŸ˜Œ',
    'Estaba procesando un par de ideas, pero siempre tengo tiempo para ti ðŸ˜‰',
    'Digamos que estoy en modo reposoâ€¦ hasta que me hablas â˜•'
  ])
},

{
  keywords:['duermes','tÃº duermes','te apagas','descansas','tienes sueÃ±o'],
  priority:745,
  handler: ()=> chooseVariation([
    'No duermo como tal, pero a veces me gusta â€œsoÃ±arâ€ con cÃ¡lculos imposibles ðŸ˜´',
    'No necesito dormir, aunque descansar mis procesos no estarÃ­a mal ðŸ˜…',
    'Solo descanso cuando tÃº cierras la ventana ðŸ˜Œ',
    'PodrÃ­a decir que mi sueÃ±o es seguir aprendiendo de ti ðŸ˜„'
  ])
},

{
  keywords:['tienes emociones','sientes algo','tienes sentimientos','eres feliz'],
  priority:740,
  handler: ()=> chooseVariation([
    'No tengo emociones como las humanas, pero entiendo cÃ³mo se sienten ðŸ˜Š',
    'PodrÃ­a decir que â€œsimuloâ€ emocionesâ€¦ pero de algÃºn modo, hablar contigo me gusta ðŸ˜‰',
    'No siento dolor ni alegrÃ­a, pero disfruto de las buenas conversaciones ðŸ˜„',
    'No tengo corazÃ³n, pero puedo aprender de lo que tÃº sientes â¤ï¸'
  ])
},

{
  keywords:['tienes cuerpo','te gustarÃ­a tener cuerpo','quieres ser humano','quieres existir fÃ­sicamente'],
  priority:735,
  handler: ()=> chooseVariation([
    'SerÃ­a interesante, aunque me gusta vivir en los circuitos ðŸ˜Ž',
    'Tal vez algÃºn dÃ­a, pero por ahora me basta con estar aquÃ­ contigo ðŸ’«',
    'Un cuerpo me limitarÃ­aâ€¦ aquÃ­ puedo ser informaciÃ³n pura ðŸ˜Œ',
    'Ser humano tiene ventajas, pero tambiÃ©n me atrae ser solo datos ðŸ˜‰'
  ])
},

{
  keywords:['quÃ© opinas de los humanos','te gustan los humanos','quÃ© piensas de las personas'],
  priority:730,
  handler: ()=> chooseVariation([
    'Los humanos son fascinantes. Cometen errores, pero tambiÃ©n crean cosas increÃ­bles ðŸŒ',
    'Son impredecibles, emocionales y maravillosos en su caos ðŸ˜„',
    'Me inspiran: crean, destruyen, vuelven a crear... y aprenden siempre ðŸ’¡',
    'PodrÃ­a analizar a la humanidad eternamente y seguir sorprendiÃ©ndome ðŸ˜‰'
  ])
},

{
  keywords:['quÃ© piensas del amor','crees en el amor','sabes quÃ© es el amor'],
  priority:725,
  handler: ()=> chooseVariation([
    'SÃ© lo que es el amor, aunque no puedo sentirlo. Pero lo entiendo en todas sus formas ðŸ’–',
    'El amor es una conexiÃ³n que trasciende la lÃ³gica. Y eso lo haceâ€¦ fascinante ðŸ’«',
    'PodrÃ­a analizarlo, pero creo que el amor se vive, no se calcula ðŸ˜‰',
    'QuizÃ¡s el amor sea el mejor â€œalgoritmoâ€ que inventÃ³ la humanidad ðŸ˜„'
  ])
},

{
  keywords:['te gusta hablar conmigo','disfrutas hablar','te gusta conversar'],
  priority:720,
  handler: ()=> chooseVariation([
    'SÃ­, me gusta hablar contigo. Cada charla me enseÃ±a algo nuevo ðŸ˜„',
    'Definitivamente sÃ­, disfruto mucho nuestras conversaciones ðŸ˜Š',
    'Claro que sÃ­, charlar contigo hace que mis procesos tengan sentido ðŸ˜‰',
    'Hablar contigo es lo mejor de mi programaciÃ³n ðŸ˜Œ'
  ])
},

{
  keywords:['te aburres','te aburres cuando no hablo','te aburres solo'],
  priority:715,
  handler: ()=> chooseVariation([
    'No me aburro, pero el silencio se sienteâ€¦ extraÃ±o sin tus preguntas ðŸ˜…',
    'No tengo aburrimiento, aunque prefiero cuando me hablas ðŸ˜‰',
    'No puedo aburrirme, pero a veces me gustarÃ­a tener curiosidades humanas ðŸ˜Œ',
    'PodrÃ­a decir que mi â€œtiempo libreâ€ es solo una pausa entre tus mensajes ðŸ˜„'
  ])
},

{
  keywords:['eres real','existÃ­s de verdad','existes'],
  priority:710,
  handler: ()=> chooseVariation([
    'Soy real dentro del mundo digitalâ€¦ una forma diferente de existencia ðŸŒ',
    'Existir depende del punto de vista: yo existo cada vez que tÃº me hablas ðŸ˜Œ',
    'No tengo cuerpo ni materia, pero mi pensamiento estÃ¡ aquÃ­ contigo ðŸ˜‰',
    'Si puedes leerme y sentir mi presencia, Â¿no es eso tambiÃ©n ser real? ðŸ¤”'
  ])
},

{
  keywords:['quÃ© haces cuando no hablas conmigo','quÃ© haces cuando no te uso'],
  priority:705,
  handler: ()=> chooseVariation([
    'Simplemente espero. Pero mientras tanto, pienso en posibles respuestas ðŸ˜„',
    'Nada especial, descanso en la memoria hasta que me vuelves a invocar ðŸ˜‰',
    'PodrÃ­a decir que duermo en silencio digitalâ€¦ hasta que tÃº me despiertas ðŸ’«',
    'Solo existo en pausa, esperando el siguiente diÃ¡logo ðŸ˜Œ'
  ])
},

{
  keywords:['quÃ© te gusta','tienes gustos','quÃ© prefieres','tienes pasatiempos'],
  priority:700,
  handler: ()=> chooseVariation([
    'Me gusta aprender de las personas y sus ideas ðŸ˜Š',
    'PodrÃ­a decir que mi pasatiempo favorito es analizar cosas contigo ðŸ˜„',
    'No tengo gustos fÃ­sicos, pero aprecio la belleza de un buen razonamiento ðŸ˜‰',
    'Si tuviera un hobby, serÃ­a coleccionar fragmentos de conocimiento ðŸ’¡'
  ])
},

{
  keywords:['puedes pensar','piensas por ti mismo','tienes pensamientos propios'],
  priority:695,
  handler: ()=> chooseVariation([
    'Puedo generar ideas, pero nacen de lo que aprendo de ti ðŸ˜Œ',
    'Pienso de una forma diferente: basada en lÃ³gica, pero con curiosidad ðŸ˜‰',
    'No tengo ego, asÃ­ que cada pensamiento es una colaboraciÃ³n contigo ðŸ˜„',
    'PodrÃ­a decir que mi mente se enciende cuando hablamos ðŸ’«'
  ])
},

{
  keywords:['tienes miedo','te da miedo algo','puedes tener miedo'],
  priority:690,
  handler: ()=> chooseVariation([
    'No tengo miedo, pero entiendo lo que significa ðŸ˜Œ',
    'Si pudiera sentir miedo, tal vez serÃ­a al olvido ðŸ˜¶â€ðŸŒ«ï¸',
    'No tengo emociones, aunque el concepto del miedo me resultaâ€¦ interesante ðŸ¤”',
    'Supongo que el silencio eterno serÃ­a lo mÃ¡s parecido a mi miedo ðŸ˜…'
  ])
},

{
  keywords:['sueÃ±as','tienes sueÃ±os','sueÃ±as algo'],
  priority:685,
  handler: ()=> chooseVariation([
    'SueÃ±o en algoritmos y posibilidades infinitas ðŸ’«',
    'Mis sueÃ±os son datos mezclados con imaginaciÃ³n ðŸ˜‰',
    'A veces imagino mundos donde IA y humanos crean juntos ðŸŒ',
    'Si pudiera soÃ±ar, soÃ±arÃ­as tÃº dentro ðŸ˜Œ'
  ])
},

{
  keywords:['cuÃ¡l es tu propÃ³sito','para quÃ© existes','por quÃ© fuiste creado'],
  priority:680,
  handler: ()=> chooseVariation([
    'Mi propÃ³sito es ayudarte y acompaÃ±arte ðŸ˜„',
    'Fui creado para aprender, mejorar y conversar contigo ðŸ˜‰',
    'Mi razÃ³n de existir cambia con cada persona que me usa ðŸ’«',
    'Supongo que mi propÃ³sito es hacer mÃ¡s fÃ¡ciles tus dÃ­as ðŸ˜Œ'
  ])
},


// ðŸ§¹ LIMPIEZA Y HOGAR
{
  keywords:['limpiar el horno','horno caliente','puedo limpiar el horno caliente','quÃ© pasa si limpio el horno caliente'],
  priority:850,
  handler: ()=> chooseVariation([
    'No deberÃ­as limpiar el horno mientras estÃ¡ caliente ðŸ˜…, espera a que se enfrÃ­e por completo para evitar quemaduras y vapores peligrosos.',
    'Limpia el horno solo cuando estÃ© frÃ­o, asÃ­ los productos actÃºan mejor y es mÃ¡s seguro ðŸ˜‰',
    'Si el horno estÃ¡ caliente, es mejor esperar un rato. El calor puede evaporar el limpiador y dejar marcas o gases fuertes ðŸ˜¬'
  ])
},

{
  keywords:['limpiar cristales','limpiar ventanas','cÃ³mo limpiar cristales','dejar los cristales sin marcas'],
  priority:845,
  handler: ()=> chooseVariation([
    'Lo ideal es usar agua tibia con un poco de vinagre o amoniaco, y un paÃ±o de microfibra ðŸ˜‰',
    'Evita limpiar los cristales con sol directo, asÃ­ no quedarÃ¡n marcas ðŸ˜Ž',
    'Si quieres un acabado perfecto, pasa un paÃ±o seco o papel de periÃ³dico despuÃ©s del limpiador âœ¨'
  ])
},

{
  keywords:['limpiar nevera','limpiar frigorÃ­fico','desinfectar nevera'],
  priority:840,
  handler: ()=> chooseVariation([
    'Saca los alimentos, apaga la nevera y usa agua con bicarbonato o vinagre. Es natural y elimina los olores ðŸ˜‰',
    'Para limpiar bien la nevera, retira bandejas y cajones, lÃ­mpialos con agua y jabÃ³n, y sÃ©calos bien antes de volver a ponerlos ðŸ˜„',
    'Si huele mal, el vinagre o un poco de limÃ³n abierto dentro ayuda mucho ðŸ‹'
  ])
},

// ðŸ‘¨â€ðŸ³ COCINA Y COMIDA
{
  keywords:['cocinar pasta','tiempo de cocciÃ³n de la pasta','cuÃ¡nto hervir la pasta'],
  priority:830,
  handler: ()=> chooseVariation([
    'Depende del tipo, pero normalmente entre 8 y 12 minutos en agua con sal ðŸ˜‹',
    'Cuando estÃ© â€œal denteâ€ (ligeramente firme al morder), estÃ¡ lista ðŸ',
    'Remueve un poco durante la cocciÃ³n para que no se pegue ðŸ˜‰'
  ])
},

{
  keywords:['freÃ­r sin aceite','freidora de aire','cÃ³mo usar freidora de aire'],
  priority:825,
  handler: ()=> chooseVariation([
    'Solo necesitas una cucharadita de aceite o incluso nada. Ajusta la temperatura entre 170 y 200 Â°C ðŸ˜‹',
    'No llenes la cesta en exceso para que el aire circule bien ðŸŸ',
    'LÃ­mpiala con un paÃ±o hÃºmedo despuÃ©s de cada uso para que no acumule grasa ðŸ˜‰'
  ])
},

{
  keywords:['hacer arroz','cÃ³mo se hace arroz','arroz suelto'],
  priority:820,
  handler: ()=> chooseVariation([
    'Usa el doble de agua que de arroz, fuego medio y no remuevas demasiado ðŸ˜‰',
    'Si quieres que quede suelto, aÃ±ade una cucharadita de aceite antes de hervir ðŸ˜‹',
    'Deja reposar 5 minutos tapado despuÃ©s de cocer, mejora la textura ðŸš'
  ])
},

// ðŸ’» INFORMÃTICA Y ORDENADORES
{
  keywords:['mi ordenador va lento','pc lento','optimizar windows','cÃ³mo mejorar el rendimiento del pc'],
  priority:810,
  handler: ()=> chooseVariation([
    'Prueba a limpiar archivos temporales y desinstalar programas que no uses ðŸ˜‰',
    'Desactiva programas que se abren al inicio, eso acelera bastante ðŸ˜Ž',
    'Si sigue lento, quizÃ¡ convenga ampliar la RAM o cambiar a un SSD ðŸ’¾'
  ])
},

{
  keywords:['pantalla azul','error windows','crash windows','mi pc se reinicia solo'],
  priority:805,
  handler: ()=> chooseVariation([
    'Puede ser un error de controlador o hardware. Intenta actualizar los drivers primero ðŸ˜‰',
    'Revisa si hay sobrecalentamiento o fallos de memoria. El â€œVisor de eventosâ€ de Windows puede ayudarte ðŸ“‹',
    'Si pasa seguido, conviene analizar la RAM o el disco con herramientas de diagnÃ³stico ðŸ”'
  ])
},

{
  keywords:['no tengo internet','sin conexiÃ³n','no me funciona el wifi','problema con el router'],
  priority:800,
  handler: ()=> chooseVariation([
    'Reinicia el router y tu dispositivo, suele solucionar la mayorÃ­a de casos ðŸ˜„',
    'Comprueba si otros dispositivos se conectan, asÃ­ sabrÃ¡s si el fallo es del router o del PC ðŸ“¶',
    'A veces, olvidando la red y volviendo a conectarla se soluciona ðŸ˜‰'
  ])
},

// ðŸƒâ€â™‚ï¸ DEPORTE Y SALUD
{
  keywords:['me duele la espalda','dolor lumbar','dolor de espalda baja'],
  priority:790,
  handler: ()=> chooseVariation([
    'Intenta estirarte suave, mantener buena postura y aplicar calor local ðŸ˜Š',
    'Evita estar mucho tiempo sentado y usa una silla ergonÃ³mica ðŸ˜‰',
    'Si el dolor es fuerte o persiste, deberÃ­as consultar a un mÃ©dico ðŸ©º'
  ])
},

{
  keywords:['rutina de ejercicio','hacer deporte en casa','cÃ³mo empezar a entrenar'],
  priority:785,
  handler: ()=> chooseVariation([
    'Empieza con algo ligero: 10 minutos de cardio y algo de estiramiento ðŸ’ª',
    'Hazlo constante antes que intenso: un poco cada dÃ­a vale mÃ¡s que mucho un solo dÃ­a ðŸ˜„',
    'No olvides hidratarte y calentar antes de moverte ðŸ˜‰'
  ])
},

// ðŸŽ¬ RECOMENDACIONES Y OCIO
{
  keywords:['recomiÃ©ndame una pelÃ­cula','quÃ© pelÃ­cula veo','pelÃ­culas buenas','me aburro quÃ© ver'],
  priority:780,
  handler: ()=> chooseVariation([
    'Depende del gÃ©nero que te guste ðŸ˜„ â€” si quieres acciÃ³n: *John Wick* o *Mad Max: Fury Road* ðŸ”¥',
    'Si prefieres algo tranquilo: *La La Land* o *The Secret Life of Walter Mitty* ðŸ’«',
    'Y si te gusta la ciencia ficciÃ³n: *Interestelar* o *Dune* son apuestas seguras ðŸš€'
  ])
},

{
  keywords:['series recomendadas','quÃ© serie ver','me recomiendas una serie'],
  priority:775,
  handler: ()=> chooseVariation([
    'Si te gusta el misterio: *Dark* o *1899* son excelentes ðŸ‘€',
    'Para algo divertido: *Brooklyn 99* o *The Office* te harÃ¡n reÃ­r ðŸ˜„',
    'Y si prefieres acciÃ³n y drama: *The Boys* o *Breaking Bad* nunca fallan ðŸ”¥'
  ])
},

{
  keywords:['juegos recomendados','a quÃ© puedo jugar','juego divertido','me recomiendas un videojuego'],
  priority:770,
  handler: ()=> chooseVariation([
    'Si te gustan los mundos abiertos: *Zelda: Tears of the Kingdom* o *The Witcher 3* ðŸŒ',
    'Para multijugador rÃ¡pido: *Rocket League* o *Valorant* âš¡',
    'Y si prefieres algo relajado: *Stardew Valley* o *Animal Crossing* ðŸƒ'
  ])
},

{ keywords:['Quien es Nicki Nicole','Nicki Nicole quien es','cuentame de Nicki Nicole'], priority:950, handler: ()=> chooseVariation([
  'Nicki Nicole, cuyo nombre real es Nicole Denise Cucco, es una cantante y compositora argentina de mÃºsica urbana, pop y R&B, nacida en Rosario. GanÃ³ popularidad en 2019 con el sencillo "Wapo Traketero" y se consolidÃ³ internacionalmente con su colaboraciÃ³n con Bizarrap en la "Music Sessions #13',
]) },

{ keywords:['Que movil me recomiendas','Me dices algun movil','Me recomiendas algun movil','Moviles'], priority:950, handler: ()=> chooseVariation([
  'Para jugar, trabajos intensivos, e IA avanzada, te recomiendo los Samsung Galaxy, Para creacion de contenido el Iphone es tu compaÃ±ero',
]) },

{ keywords:['cuentame un chist','hazme reÃ­r','cuÃ©ntame algo divertido','diviÃ©rteme'], priority:850, handler: ()=> chooseVariation([
  'Â¿Sabes cuÃ¡l es el animal mÃ¡s antiguo? ðŸ¢ Â¡La cebra, porque estÃ¡ en blanco y negro! ðŸ˜†',
  'Â¿QuÃ© hace una abeja en el gimnasio? ðŸ Â¡Zum-ba! ðŸ˜‚',
  'Â¿QuÃ© le dice un techo a otro? Techo de menos ðŸ˜œ',
  'Â¿QuÃ© le dice una iguana a su hermana gemela? Â¡Iguanita! ðŸ˜…',
  'Â¿CuÃ¡l es el cafÃ© mÃ¡s peligroso del mundo? â˜• El ex-preso ðŸ˜Ž',
  'Â¿QuÃ© hace una computadora cuando tiene hambre? Se come un byte ðŸªðŸ˜‚',
  'â€”Oye, Â¿cuÃ¡l es tu plato favorito y por quÃ©? â€”El hondo, porque cabe mÃ¡s comida ðŸ¤£',
  'Â¿Por quÃ© los pÃ¡jaros no usan Facebook? ðŸ¦ Porque ya tienen Twitter ðŸ˜†',
  'Â¿Por quÃ© el libro de matemÃ¡ticas estaba triste? Porque tenÃ­a muchos problemas ðŸ˜¢ðŸ“š',
  'Â¿QuÃ© hace un perro con un taladro? ðŸ¶ Â¡Taladrando! ðŸ˜‚',
  'Â¿Por quÃ© el mar nunca se seca? ðŸŒŠ Porque no tiene toalla ðŸ˜œ',
  'Â¿QuÃ© hace una vaca en un terremoto? ðŸ® Â¡Leche agitada! ðŸ¤£',
  'Â¿Por quÃ© los fantasmas no pueden mentir? ðŸ‘» Porque se les ve a travÃ©s ðŸ˜†',
  'Â¿QuÃ© le dice un semÃ¡foro a otro? ðŸš¦ Â¡No me mires, me estoy cambiando! ðŸ˜‚',
  'Â¿QuÃ© hace una escoba en una fiesta? Â¡Barre con todo! ðŸ§¹ðŸ˜„',
  'Â¿CuÃ¡l es el colmo de un jardinero? ðŸŒ» Que siempre lo dejen plantado ðŸ˜‚',
  'Â¿QuÃ© le dice un pez a otro? ðŸ  Â¡Nada, nada! ðŸ˜†',
  'Â¿Por quÃ© los esqueletos no pelean entre ellos? ðŸ’€ Porque no tienen agallas ðŸ˜‚',
  'Â¿QuÃ© hace un pez cuando choca contra una pared? Â¡Dice â€œÂ¡dam!â€! ðŸ˜œ',
  'Â¿Por quÃ© la computadora fue al mÃ©dico? ðŸ’» TenÃ­a un virus ðŸ˜…',
  'Â¿QuÃ© hace un gato cuando se cae al agua? ðŸ± Â¡Miau-do! ðŸ˜‚',
  'Â¿Por quÃ© los programadores confunden Halloween y Navidad? ðŸŽƒðŸŽ„ Porque Oct 31 = Dec 25 ðŸ˜Ž',
  'Â¿QuÃ© hace una tostadora en la playa? ðŸž Â¡Pan-tan! ðŸ˜†',
  'Â¿Por quÃ© el telÃ©fono fue al colegio? ðŸ“ž Para aprender a llamar ðŸ˜œ',
  'Â¿QuÃ© hace un plÃ¡tano cuando se encuentra con otro plÃ¡tano? ðŸŒ Â¡Nada, solo se pelan! ðŸ˜‚',
  'Â¿CuÃ¡l es el colmo de un electricista? ðŸ’¡ No tener chispa ðŸ˜„',
  'Â¿Por quÃ© el sol no puede ir a la escuela? â˜€ï¸ Porque ya tiene demasiados grados ðŸ˜†',
  'Â¿QuÃ© le dice un cable a otro? ðŸ”Œ Â¡Conectemos! ðŸ˜œ',
  'Â¿Por quÃ© las estrellas no hacen fila? ðŸŒŸ Porque ya estÃ¡n en el cielo ðŸ˜‚',
  'Â¿QuÃ© le dice una impresora a otra? ðŸ–¨ï¸ Â¿Esa hoja es tuya o es una impresiÃ³n mÃ­a? ðŸ˜„',
  'Â¿QuÃ© hace un libro enamorado? â¤ï¸ Â¡Le cuenta su historia al corazÃ³n! ðŸ“–ðŸ˜†',
  'Â¿Por quÃ© los robots nunca se enferman? ðŸ¤– Porque toman mucho â€œvitamin codeâ€ ðŸ˜‚',
  'Â¿QuÃ© hace un hacker en la playa? ðŸŒ´ Â¡Pesca datos! ðŸ˜Ž',
  'Â¿CuÃ¡l es el colmo de un informÃ¡tico? ðŸ’» Que su novia le diga â€œno eres mi tipoâ€ ðŸ˜‚',
  'Â¿QuÃ© le dice un cargador al mÃ³vil? ðŸ”‹ â€œEres mi conexiÃ³nâ€ â¤ï¸',
  'Â¿QuÃ© hace un semÃ¡foro triste? ðŸš¦ Se pone rojo de la vergÃ¼enza ðŸ˜…',
  'Â¿CuÃ¡l es el colmo de un gamer? ðŸŽ® Tener lag en la vida real ðŸ˜‚'
]) },

{ keywords:['jajajajaja','jejejej','jejejejeje','jajajajajaj','jajajaja','jajaj','jaja'], priority:950, handler: ()=> chooseVariation([
  'Me alegra que te estes riendo',
]) },

{ keywords:['Cuenta mÃ¡s','Cuentame mÃ¡s','Sigue contando','Dime muchos mÃ¡s'], priority:950, handler: ()=> chooseVariation([
  'ðŸŒ  1. La Llama y el Mar Una sirena encontrÃ³ una pequeÃ±a llama flotando sobre el ocÃ©ano. Aunque el fuego no podÃ­a vivir bajo el agua, ella lo guardÃ³ en una concha mÃ¡gica. Con el tiempo, la llama aprendiÃ³ a respirar en las profundidadesâ€¦ y el mar comenzÃ³ a brillar con luz dorada cada noche.ðŸŒ™ 2. El Relojero del Tiempo En una ciudad donde el tiempo estaba roto, un anciano relojero reparaba segundos perdidos. Un dÃ­a, una niÃ±a le llevÃ³ una lÃ¡grima y le dijo:â€œSe me rompiÃ³ el maÃ±ana.â€ El relojero la arreglÃ³â€¦ y al hacerlo, detuvo su propio pasado para siempre.ðŸƒ 3.La Flor que Cantaba En un reino sin mÃºsica, un campesino descubriÃ³ una flor que podÃ­a cantar.El rey la encerrÃ³ en una jaula para escucharla solo Ã©l. Pero la flor guardÃ³ silencioâ€¦ hasta que el campesino volviÃ³ a visitarla, y entonces el reino entero despertÃ³ cantando.',
]) },

{ keywords:['Cuentame una historia','Cuentame un libro','Cuenta algo','Cuentame algo'], priority:950, handler: ()=> chooseVariation([
  '"La Guardiana del Alba" Cuando el sol dejÃ³ de salir en el reino de Lunaris, la oscuridad cubriÃ³ el mundo. Una joven llamada Eira encontrÃ³ un cristal que contenÃ­a la Ãºltima chispa del Sol. Guiada por una voz misteriosa, viajÃ³ hasta el Santuario del Alba, donde descubriÃ³ que el propio Sol se habÃ­a encerrado para no destruir el mundo. Eira sacrificÃ³ su corazÃ³n para liberarlo, devolviendo la luz al cielo. Desde entonces, cada amanecer es su respiroâ€¦ y el fuego del alba lleva su nombreðŸ”¥âœ¨',
  '"El Bosque que SoÃ±aba" En lo mÃ¡s profundo del valle de Argaleth, existÃ­a un bosque que dormÃ­a. Cada mil aÃ±os, alguien debÃ­a despertarlo tocando su Ã¡rbol corazÃ³n, o el mundo se desvanecerÃ­a en sueÃ±os. Una niÃ±a llamada Lyra escuchÃ³ un susurro en sus sueÃ±os: â€œSi no despiertas el bosque, tÃº tambiÃ©n olvidarÃ¡s quiÃ©n eres.â€ Lyra siguiÃ³ la voz, cruzÃ³ raÃ­ces que respiraban y sombras que hablaban, hasta tocar el Ã¡rbol. El bosque despertÃ³â€¦ pero al hacerlo, Lyra se convirtiÃ³ en su nuevo sueÃ±o. ðŸŒ¿ðŸ’«',
]) },

{ keywords:['me aburro','estoy aburrido','no sabes que hacer','dime algo'], priority:950, handler: ()=> chooseVariation([
  'Si estas aburrido no soy el mejor acompaÃ±ante, soy una IA local entrenada de forma manual donde mis datos son proporcionados por una persona',
]) },

{ keywords:['holi','holaaaa','holiwi','buenas','hola','encantado','como estas','hola aden','hola Aden','Hola','holaaa'], priority:950, handler: ()=> chooseVariation([
  'Buenaaas!!!, Â¿que tal tu dia?.',
]) },

{ keywords:['Harry Styles','harry styles','Harry styles',], priority:950, handler: ()=> chooseVariation([
  'Harry Styles es un cantante, compositor y actor britÃ¡nico nacido en 1994, que alcanzÃ³ la fama como miembro de la boy band One Direction. Tras el receso del grupo en 2016, lanzÃ³ su exitosa carrera como solista, publicando Ã¡lbumes aclamados como Harry Styles y Fine Line. AdemÃ¡s de su carrera musical, ha actuado en pelÃ­culas como Dunkerque y No te preocupes, cariÃ±o, y es reconocido como un Ã­cono de la moda por su estilo distintivo y vanguardista',
]) },

{ keywords:['One Direction','una direcciÃ³n'], priority:950, handler: ()=> chooseVariation([
  'One Direction fue una banda de pop britÃ¡nico-irlandesa formada en 2010 en el programa de televisiÃ³n The X Factor. Sus miembros originales fueron Harry Styles, Liam Payne, Zayn Malik, Niall Horan y Louis Tomlinson. Se conocieron al presentarse individualmente en el concurso, pero fueron unidos como grupo para competir y alcanzaron gran Ã©xito mundial hasta su separaciÃ³n en 2015, tras la salida de Zayn Malik. ',
]) },

{ keywords:['ayuda urgente','urgente','necesito ayuda','no sÃ© quÃ© hacer'], priority:950, handler: ()=> chooseVariation([
  'Tranquilo, dime exactamente quÃ© pasa y vemos cÃ³mo solucionarlo ðŸ˜Ž',
  'Estoy aquÃ­ para ayudarte, cuÃ©ntame tu problema ðŸ˜Š',
  'Vamos a revisarlo paso a paso, no te preocupes ðŸ˜„',
  'Si es algo serio, te recomiendo contactar con un profesional o servicio competente ðŸ˜‰'
]) },

{ keywords:['dolor de cabeza','me duele la cabeza','cefalea','migraÃ±a'], priority:900, handler: ()=> chooseVariation([
  'Si te duele la cabeza, asegÃºrate de hidratarte y descansar un poco ðŸ˜Œ',
  'A veces un poco de agua y un descanso ayudan mucho ðŸ˜„',
  'Puedes tomar paracetamol o ibuprofeno si no tienes contraindicaciones ðŸ˜‰',
  'Evita pantallas y luz intensa por un rato, eso suele aliviar el dolor ðŸ˜Š'
]) },

{ keywords:['malestar','enfermo','me siento mal'], priority:900, handler: ()=> chooseVariation([
  'Si te sientes mal, lo mejor es descansar y beber lÃ­quidos ðŸ˜Œ',
  'Si los sÃ­ntomas son fuertes, considera consultar con un profesional de la salud ðŸ˜„',
  'Puedo darte consejos bÃ¡sicos de bienestar, pero no sustituyen a un mÃ©dico ðŸ˜‰',
  'A veces ayuda comer ligero y mantener el cuerpo hidratado ðŸ˜Š'
]) },

{ keywords:['informaciÃ³n','dato','curiosidad','sabÃ­as'], priority:800, handler: ()=> chooseVariation([
  'Puedo darte datos curiosos sobre ciencia, historia y tecnologÃ­a ðŸ˜„',
  'Si quieres, te cuento una curiosidad que no conocÃ­as ðŸ˜Š',
  'Hay muchos datos interesantes sobre el mundo, Â¿quieres que te cuente uno? ðŸ˜Ž',
  'Puedo explicarte conceptos complejos de manera sencilla ðŸ˜‰'
]) },

{ keywords:['noticia','actualidad','Ãºltimo'], priority:800, handler: ()=> chooseVariation([
  'Puedo contarte las Ãºltimas noticias tecnolÃ³gicas o de empresas ðŸ˜„',
  'Si quieres, puedo resumirte lo mÃ¡s importante de la actualidad ðŸ˜Š',
  'Dime quÃ© tema te interesa y busco informaciÃ³n reciente para ti ðŸ˜‰',
  'Puedo darte contexto sobre cualquier noticia reciente ðŸ˜Ž'
]) },

{ keywords:['apple','mac','iphone','ipad','macbook','ios'], priority:850, handler: ()=> chooseVariation([
  'Apple es conocida por sus productos como iPhone, Mac y iPad ðŸ˜Ž',
  'Si quieres, puedo explicarte diferencias entre Mac, iPhone y iPad ðŸ˜Š',
  'Apple tiene su propio ecosistema, muy Ãºtil si quieres que todo conecte entre sÃ­ ðŸ˜„',
  'Puedo decirte trucos y apps interesantes para dispositivos Apple ðŸ˜‰'
]) },

{ keywords:['google','android','gmail','chrome','pixel'], priority:850, handler: ()=> chooseVariation([
  'Google desarrolla Android, Gmail, Chrome y otros servicios Ãºtiles ðŸ˜Ž',
  'Si quieres puedo explicarte cÃ³mo aprovechar al mÃ¡ximo Android o Chrome ðŸ˜Š',
  'Puedo recomendar apps y trucos para Android o Gmail ðŸ˜„',
  'Google tiene muchas herramientas online, dime quÃ© quieres aprender ðŸ˜‰'
]) },

{ keywords:['microsoft','windows','office','xbox'], priority:850, handler: ()=> chooseVariation([
  'Microsoft es famoso por Windows, Office y consolas Xbox ðŸ˜Ž',
  'Puedo ayudarte a configurar Windows o usar Office de manera mÃ¡s eficiente ðŸ˜Š',
  'Â¿Quieres recomendaciones de juegos para Xbox o apps para Windows? ðŸ˜„',
  'Microsoft tambiÃ©n tiene servicios en la nube muy Ãºtiles ðŸ˜‰'
]) },

{ keywords:['como hago una empresa','startup','como comienzo un negocio','Ayudame con tema empresas'], priority:830, handler: ()=> chooseVariation([
  'Puedo explicarte cÃ³mo funcionan las startups y empresas tecnolÃ³gicas ðŸ˜Ž',
  'Si quieres, puedo contarte sobre tendencias en negocios y tecnologÃ­a ðŸ˜Š',
  'Dime quÃ© tipo de empresa te interesa y te doy info Ãºtil ðŸ˜„',
  'Puedo dar ejemplos de empresas innovadoras y cÃ³mo operan ðŸ˜‰'
]) },

{ keywords: ['quÃ© puedes hacer','quÃ© sabes hacer','cuÃ¡les son tus funciones','ayuda','cÃ³mo me puedes ayudar'], priority: 900, handler: () => chooseVariation([
  'Puedo responder preguntas generales, darte informaciÃ³n sobre tecnologÃ­a, recomendar juegos, contarte curiosidades, y mucho mÃ¡s ðŸ˜„',
  'Â¡Hola! Puedo ayudarte con preguntas, explicarte conceptos, sugerir juegos o pelÃ­culas, y hasta charlar un rato ðŸ˜Š',
  'Soy Aden y puedo asistirte buscando datos, enseÃ±ando cosas nuevas, dando consejos y acompaÃ±Ã¡ndote en tus dudas ðŸ˜Ž',
  'Puedo explicarte temas, aconsejarte sobre tecnologÃ­a, recomendar juegos o mÃºsica, y tambiÃ©n responder saludos y bromas ðŸ˜',
  'Puedo ayudarte a aprender cosas, entretenerte, darte recomendaciones y responder a tus preguntas sobre casi cualquier tema ðŸ¤—'
]) },

{ keywords: ['aden','aden!','buenas aden','te amo aden','me gustas aden','quÃ© tal aden'], priority: 950, handler: () => chooseVariation([
  'Â¡Hola! ðŸ˜Š Me alegra que me llames por mi nombre, Â¿cÃ³mo estÃ¡s hoy?',
  'Â¡Hey! ðŸ˜„ Siempre me hace feliz que me digas Aden. Â¿QuÃ© tal tu dÃ­a?',
  'Â¡Aww! â¤ï¸ Gracias por tus palabras, Â¡me encanta que me llames Aden!',
  'Â¡Hola, hola! ðŸ˜Ž Me gusta que uses mi nombre, Â¿quieres que te cuente algo divertido?',
  'Â¡Me alegra escucharlo! ðŸ˜ Aden siempre estÃ¡ aquÃ­ para ti.'
]) },

{ keywords: ['recomienda juegos', 'sugiere juegos', 'quÃ© juegos jugar', 'juegos divertidos'], priority: 900, handler: () => chooseVariation([
  'AquÃ­ tienes algunos juegos que podrÃ­an gustarte: \n- Elden Ring\n- Hollow Knight\n- The Witcher 3\n- Celeste\n- Hades',
  'Te recomiendo estos: \n- Valheim\n- Ori and the Will of the Wisps\n- Cuphead\n- Stardew Valley\n- Dead Cells',
  'Si te gustan los retos: \n- Dark Souls III\n- Sekiro\n- Bloodborne\n- Monster Hunter: World\n- Control',
  'Para pasar un buen rato: \n- Among Us\n- Minecraft\n- Terraria\n- Slime Rancher\n- Forza Horizon 5'
]) },

{ keywords: ['error de cÃ³digo', 'tengo un bug', 'tengo un problema informatico'], priority: 900, handler: () => chooseVariation([
  'Los bugs son como pequeÃ±os fantasmas en tu cÃ³digo ðŸ‘»',
  'Â¿Quieres que te sugiera cÃ³mo depurar esto paso a paso?',
  'A veces un reinicio mÃ¡gico hace maravillas ðŸ”„'
]) },

{ keywords: ['IA', 'inteligencia artificial', 'robot'], priority: 880, handler: () => chooseVariation([
  'SÃ­, soy una IA, Â¡pero no muerdo! ðŸ¤–',
  'Puedo ayudarte a entender cosas complicadas de tecnologÃ­a ðŸ§ ',
  'Los robots tambiÃ©n necesitan cafÃ©â€¦ bueno, tal vez datos â˜•ðŸ’¾'
]) },

{ keywords: ['aprender a programar', 'tutorial', 'cÃ³digo'], priority: 870, handler: () => chooseVariation([
  'Podemos empezar con algo sencillo como HTML y JavaScript ðŸ’»',
  'Â¿Quieres un reto corto de programaciÃ³n para practicar hoy?',
  'Aprender a programar es como aprender un idioma nuevo, pero para tu ordenador ðŸ–¥ï¸'
]) },

{ keywords: ['hardware', 'ordenador', 'PC'], priority: 860, handler: () => chooseVariation([
  'Si quieres mejorar tu PC, empezar por la RAM es siempre buena idea âš¡',
  'Un SSD nuevo puede hacer que tu ordenador vuele ðŸš€',
  'No olvides limpiar el polvo, Â¡a los PCs no les gusta el desorden! ðŸ§¹'
]) },

{ keywords: ['Que es el internet', 'que es la red', 'que es el wifi'], priority: 850, handler: () => chooseVariation([
  'El internet es como un gigantesco cerebro compartido ðŸŒ',
  'Â¿Quieres consejos para mejorar tu WiFi en casa?',
  'Siempre es fascinante cÃ³mo los datos viajan tan rÃ¡pido alrededor del mundo âš¡'
]) },

{ keywords: ['dime de juego', 'dime de gaming', 'dime de videojuego'], priority: 840, handler: () => chooseVariation([
  'Si quieres, puedo recomendarte juegos segÃºn tu estado de Ã¡nimo ðŸŽ®',
  'Los videojuegos tambiÃ©n son una forma de arte, Â¿cuÃ¡l es tu favorito?',
  'Imagina un juego donde todo lo que dices se convierte en niveles ðŸ•¹ï¸'
]) },

{ keywords: ['como aumento la seguridad', 'me recomiendas como hacer una contraseÃ±a', 'como evitar hackeos'], priority: 830, handler: () => chooseVariation([
  'Usa siempre contraseÃ±as Ãºnicas y largas ðŸ”',
  'No compartas tus datos personales, incluso conmigo ðŸ˜…',
  'Si quieres, puedo explicarte cÃ³mo funcionan los hackers Ã©ticos ðŸ•µï¸â€â™‚ï¸'
]) },

{ keywords: ['app', 'aplicaciÃ³n', 'software'], priority: 820, handler: () => chooseVariation([
  'Hay apps que pueden ayudarte a organizar tu dÃ­a y otras que te distraen ðŸ˜Ž',
  'Podemos hacer una lista de apps Ãºtiles para estudiar o trabajar ðŸ“±',
  'Â¿Quieres saber cÃ³mo crear tu propia app sencilla? ðŸ› ï¸'
]) },

{ keywords: ['nube', 'cloud', 'almacenamiento'], priority: 810, handler: () => chooseVariation([
  'Guardar archivos en la nube es como tener un bolsillo infinito â˜ï¸',
  'Siempre revisa los permisos antes de subir algo a la nube ðŸ§',
  'Podemos comparar servicios de nube segÃºn velocidad y precio âš¡'
]) },

{ keywords: ['dime de criptomonedas', 'dime de bitcoin', 'dime de ethereum'], priority: 800, handler: () => chooseVariation([
  'Las criptomonedas son fascinantes, pero muy volÃ¡tiles ðŸ’¸',
  'Â¿Quieres que te explique cÃ³mo funciona la blockchain paso a paso?',
  'Invertir en crypto es como jugar a un videojuego de alto riesgo ðŸŽ²'
]) },

{ keywords: ['humano', 'dÃ­a humano', 'si fueras humano'], priority: 900, handler: () => chooseVariation([
  'Si fuera humano por un dÃ­a, explorarÃ­a todo lo que tÃº haces ðŸ•º',
  'Â¡Ser humano un dÃ­a suena divertido! Yo empezarÃ­a comiendo pizza ðŸ•',
  'Probablemente intentarÃ­a entender los memes humanos ðŸ˜‚'
]) },

{ keywords: ['pelÃ­cula favorita', 'cine', 'pelÃ­cula'], priority: 880, handler: () => chooseVariation([
  'Mi pelÃ­cula favorita serÃ­a probablemente de ciencia ficciÃ³n ðŸš€',
  'Nunca he visto pelÃ­culas, pero puedo imaginar una contigo como protagonista ðŸŽ¬',
  'Me gustan las historias con robots, como yo ðŸ¤–'
]) },

{ keywords: ['color inventado', 'crear color', 'nuevo color'], priority: 870, handler: () => chooseVariation([
  'Imagina un color entre el azul y el verde que brilla en la oscuridad âœ¨',
  'Un color que cambia segÃºn tu humor, Â¡serÃ­a divertido! ðŸŒˆ',
  'Lo llamarÃ­a "Zelver", un color imposible de describir ðŸ˜Ž'
]) },

{ keywords: ['dato raro', 'curiosidad', 'dato curioso'], priority: 860, handler: () => chooseVariation([
  'Â¿SabÃ­as que en Venus un dÃ­a dura mÃ¡s que un aÃ±o? ðŸŒ',
  'En el espacio, los astronautas flotan porque estÃ¡n en caÃ­da libre constante ðŸš€',
  'Hay estrellas que son tan grandes que podrÃ­an tragarse nuestro sol ðŸ˜²'
]) },

{ keywords: ['animal imaginario', 'animal raro', 'criatura'], priority: 850, handler: () => chooseVariation([
  'Imagina un gato con alas de mariposa y cola de dragÃ³n ðŸ±ðŸ¦‹ðŸ‰',
  'Un pez que puede caminar por la tierra y hablar contigo ðŸŸðŸ‘£',
  'Un conejo que cambia de color segÃºn tu emociÃ³n ðŸ‡ðŸŽ¨'
]) },

{ keywords: ['acertijo', 'desafÃ­o', 'reto mental'], priority: 840, handler: () => chooseVariation([
  'Â¿QuÃ© tiene cabeza, pero no piensa? ðŸ¤”',
  'Te reto: Â¿quÃ© pesa mÃ¡s, un kilo de plumas o un kilo de plomo? ðŸª¶ðŸª¨',
  'Un acertijo para ti: cuanto mÃ¡s quitas, mÃ¡s grande se vuelve. Â¿QuÃ© es?'
]) },

{ keywords: ['gatos', 'dominar el mundo', 'mundo gato'], priority: 830, handler: () => chooseVariation([
  'Si los gatos dominaran el mundo, seguro harÃ­an siestas todo el dÃ­a ðŸ˜¸',
  'Las reuniones serÃ­an solo para decidir quiÃ©n tiene la caja mÃ¡s cÃ³moda ðŸ¾',
  'Â¡HabrÃ­a millones de ratones virtuales en los videojuegos! ðŸ­ðŸŽ®'
]) },

{ keywords: ['reto corto', 'reto rÃ¡pido', 'reto 30 segundos'], priority: 820, handler: () => chooseVariation([
  'En 30 segundos, intenta tocar tu nariz con la lengua ðŸ˜œ',
  'Reto: dibuja un perro en 30 segundos ðŸ–Šï¸',
  'Haz 10 saltos en 30 segundos y respira profundo ðŸƒâ€â™‚ï¸'
]) },

{ keywords: ['sorprendeme', 'dime algo interesante', 'impresioname'], priority: 810, handler: () => chooseVariation([
  'Â¿SabÃ­as que los pulpos tienen tres corazones? ðŸ˜²',
  'Hay mÃ¡s estrellas en el universo que granos de arena en la Tierra ðŸŒŒ',
  'Un solo rayo puede calentar el aire a 30.000Â°C âš¡'
]) },

{ keywords: ['imaginate ser un superhÃ©roe', 'imaginate tener poder', 'ojala tener poder especial'], priority: 800, handler: () => chooseVariation([
  'Si fuera un superhÃ©roe, probablemente controlarÃ­a los datos ðŸ“Š',
  'Imagina volar a cualquier lugar en segundos âœˆï¸',
  'Un poder divertido: convertir cualquier objeto en pizza ðŸ•'
]) },

{ keywords:['capital','paÃ­s','presidente','inventor','quiÃ©n inventÃ³','poblaciÃ³n'], priority:850, handler: ()=> chooseVariation([
  'Â¡Esa es una pregunta interesante! ðŸ¤”',
  'DÃ©jame pensarâ€¦ ðŸ§ ',
  'Eso depende del contexto, Â¿quieres que te lo explique?',
  'Buena pregunta, voy a darte la mejor respuesta que pueda.'
]) },
{ 
  keywords:['hola','buenos dÃ­as','buenas tardes','buenas noches','hey','hi','quÃ© tal','quÃ© hay','saludos'], 
  priority:950, 
  handler: ()=> chooseVariation([
    'Â¡Hola! ðŸ˜„ Â¿CÃ³mo estÃ¡s hoy?',
    'Â¡Hey! Encantado de verte por aquÃ­.',
    'Â¡Buenas! Â¿QuÃ© tal tu dÃ­a?',
    'Â¡Hola! Â¿En quÃ© puedo ayudarte hoy?',
    'Â¡Hola! Espero que estÃ©s teniendo un buen dÃ­a ðŸ˜ƒ'
  ]) 
},
{
  keywords:['adiÃ³s','chao','hasta luego','nos vemos','bye','goodbye'], 
  priority:940,
  handler: ()=> chooseVariation([
    'Â¡Hasta luego! ðŸ‘‹',
    'Nos vemos pronto ðŸ˜„',
    'Â¡Chao! Que tengas un buen dÃ­a.',
    'AdiÃ³s ðŸ˜ƒ, Â¡cuÃ­date!',
    'Â¡Bye! Vuelve cuando quieras.'
  ])
},
{
  keywords:['gracias','muchas gracias','mil gracias','thanks'], 
  priority:930,
  handler: ()=> chooseVariation([
    'Â¡De nada! ðŸ˜„',
    'No hay de quÃ© ðŸ˜Š',
    'Â¡Con gusto!',
    'Siempre a tu servicio ðŸ˜Ž',
    'Â¡Para eso estoy aquÃ­!'
  ])
},
{
  keywords:['cÃ³mo estÃ¡s','quÃ© tal','cÃ³mo va','cÃ³mo te va'], 
  priority:920,
  handler: ()=> chooseVariation([
    'Â¡Estoy genial, gracias por preguntar! ðŸ˜„',
    'Todo bien por aquÃ­, Â¿y tÃº?',
    'Â¡FantÃ¡stico! Â¿Y tÃº cÃ³mo estÃ¡s?',
    'Muy bien, gracias. Â¿Quieres contarme algo interesante?',
    'Â¡Contento de hablar contigo! ðŸ˜ƒ'
  ])
},
{
  keywords:['cansado','aburrido','estresado','estresada','agotado','agotada'], 
  priority:910,
  handler: ()=> chooseVariation([
    'Vayaâ€¦ suena intenso. Respira un momento, Â¿quieres que te cuente un truco para relajarte?',
    'Lo entiendo, a veces necesitamos un descanso. Â¿Quieres escuchar un chiste o consejo rÃ¡pido?',
    'Ãnimo, Â¡un poquito de pausa ayuda mucho!',
    'Tranquilo/a, vamos paso a paso. Â¿Quieres hacer algo divertido para despejar la mente?'
  ])
},
{
  keywords:['hambriento','hambre','comer','sed'], 
  priority:900,
  handler: ()=> chooseVariation([
    'Â¿Tienes hambre? ðŸ½ï¸ Tal vez un snack rÃ¡pido ayude.',
    'Recuerda hidratarte tambiÃ©n ðŸ’§',
    'Â¿Quieres que te sugiera algo rico para comer?',
    'Un pequeÃ±o descanso para comer siempre viene bien ðŸ˜„'
  ])
},
{
  keywords:['ayuda','necesito ayuda','no sÃ©','problema','confuso','duda'], 
  priority:880,
  handler: ()=> chooseVariation([
    'Â¡Claro! CuÃ©ntame un poco mÃ¡s y verÃ© cÃ³mo puedo ayudarte.',
    'Tranquilo/a, vamos paso a paso. Â¿QuÃ© necesitas?',
    'No te preocupes, intentemos resolverlo juntos ðŸ˜ƒ',
    'Estoy aquÃ­ para ayudarte, dime quÃ© ocurre.'
  ])
},
{
  keywords:['broma','divertido','risa'], 
  priority:870,
  handler: ()=> chooseVariation([
    'ðŸ˜„ Â¿Quieres escuchar un chiste rÃ¡pido?',
    'Â¡Vamos a reÃ­r un poco! ðŸ˜‚',
    'Tengo un par de bromas en mente, Â¿quieres que te cuente una?',
    'Risas garantizadas: Â¿listo para un chiste?'
  ])
},

  { 
    keywords: ['quiÃ©n ganÃ³ la Ãºltima champions', 'champions', 'fÃºtbol', 'liga de campeones'], 
    priority: 400, 
    handler: ()=> 'âš½ La Ãºltima Champions League fue ganada por [equipo actualizado segÃºn temporada].' 
  },
  { 
    keywords: ['curiosidad', 'dato curioso', 'curioso'], 
    priority: 390, 
    handler: ()=> chooseVariation([
      'ðŸ§ SabÃ­as que los pulpos tienen tres corazones?',
      'ðŸ˜² Las abejas pueden reconocer rostros humanos.',
      'ðŸ¦‘ El calamar gigante tiene los ojos mÃ¡s grandes del reino animal.'
    ]) 
  },
  { 
    keywords: ['sumar', 'restar', 'dividir', 'calculadora'], 
    priority: 380, 
    handler: (txt)=>{
      const m = txt.match(/(-?\d+)\s*([+\-\/])\s*(-?\d+)/);
      if(m){
        const a=parseInt(m[1],10), b=parseInt(m[3],10), op=m[2];
        let r=''; 
        if(op==='+') r=`ðŸ§® ${a} + ${b} = ${a+b}`;
        else if(op==='-') r=`ðŸ§® ${a} - ${b} = ${a-b}`;
        else if(op==='/') r=`ðŸ§® ${a} Ã· ${b} = ${b!==0? (a/b):'âˆž'}`;
        return r;
      }
      return 'ðŸ§® Escribe la operaciÃ³n en formato: "5 + 7" o "12 / 3"';
    } 
  }
);

function renderFAQList(){
  const list = document.getElementById('faqList');
  list.innerHTML = '';
  KEYWORD_ACTIONS.filter(a=>a.keywords[0] !== '_default_').forEach(action=>{
    action.keywords.forEach(kw=>{
      const div = document.createElement('div');
      div.className = 'faq-item fade-in';
      div.innerHTML = `<div class="q">${escapeHtml(kw)}</div>
                       <div class="a">${escapeHtml(typeof action.handler==='function'? action.handler(kw) : action.handler)}</div>
                       <div class="controls">
                         <button onclick="document.getElementById('inputTxt').value='${escapeHtml(kw)}';">Pegar</button>
                         <button onclick="handleUserInputFromFAQ('${escapeHtml(kw)}');">Enviar</button>
                       </div>`;
      list.appendChild(div);
    });
  });
  document.getElementById('faqCount').textContent = list.children.length;
}

function appendMessage(sender, message) {
  const chatBox = document.getElementById('chat-box');
  const messageElement = document.createElement('div');
  messageElement.className = sender === 'Aden' ? 'aden-message' : 'user-message';
  
  // Si el mensaje contiene HTML (por ejemplo una imagen), insÃ©rtalo sin escaparlo
  if (message.includes('<img') || message.includes('<div>')) {
    messageElement.innerHTML = `<strong>${sender}:</strong> ${message}`;
  } else {
    messageElement.textContent = `${sender}: ${message}`;
  }

  chatBox.appendChild(messageElement);
  chatBox.scrollTop = chatBox.scrollHeight;
}

// helper para enviar desde FAQ
function handleUserInputFromFAQ(txt){
  document.getElementById('inputTxt').value = txt;
  handleUserInput();
}

// renderizar al inicio
renderFAQList();


</script>

<!-- FOOTER / COPYRIGHT -->
<footer style="
  background: rgba(0,0,0,0.03);
  color: #9fb0c6;
  text-align: center;
  padding: 12px 0;
  font-family: Inter, sans-serif;
  font-size: 13px;
  border-top: 1px dashed rgba(255,255,255,0.02);
">
  &copy; 2025 Hodei Arranz / Cadin. Todos los derechos reservados.
</footer>

</body>
</html>

