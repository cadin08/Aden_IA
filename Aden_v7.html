<!doctype html>
<html lang="es">
<head>
<link rel="icon" type="image/png" href="https://images.vexels.com/media/users/3/189101/isolated/preview/693f7da0ef1625c6b281f1428a7ecdbb-fuegos-artificiales-de-2-anillos-degradado-verde.png?w=360">
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Aden ‚Äî Asistente Local Amistoso (v7 con FAQ)</title>
<!-- PANTALLA DE ENTRADA / MEN√ö INICIAL -->
<div id="introScreen" class="intro-screen">
  <div class="intro-content">
    <div class="intro-ring"></div>
    <div class="intro-title">Aden</div>
    <div class="intro-sub">Pulsa cualquier tecla para acceder</div>
  </div>
</div>
<!-- ===== Bloque: Micr√≥fono Ne√≥n (incrustar tal cual) ===== -->
<!-- Aseg√∫rate de tener: <input id="inputAsistente"> o <textarea id="inputAsistente"> en la p√°gina -->

<div id="micContainer" aria-hidden="false">
  <div id="microfono" role="button" aria-pressed="false" title="Activar micr√≥fono">
    <span class="icon">üéôÔ∏è</span>
    <span class="glow"></span>
    <span class="base-ring"></span>
  </div>
</div>

<style>
  /* contenedor pegado abajo-izquierda */
  #micContainer {
    position: fixed;
    bottom: 28px;
    left: 28px;
    z-index: 99999;
    pointer-events: none; /* el bot√≥n interior s√≠ recibe eventos */
  }

  #microfono {
    pointer-events: auto;
    width: 74px;
    height: 74px;
    border-radius: 50%;
    display: grid;
    place-items: center;
    position: relative;
    cursor: pointer;
    transform: translateZ(0);
    background: linear-gradient(135deg,#05293b 0%, #023b3a 60%, #00e6b8 100%);
    box-shadow:
      0 6px 18px rgba(0,0,0,0.6),
      0 0 18px rgba(0,230,184,0.18),
      0 0 42px rgba(0,160,255,0.08),
      inset 0 -6px 14px rgba(0,0,0,0.3);
    transition: transform .18s ease, box-shadow .25s ease;
    overflow: visible;
  }

  #microfono:hover { transform: translateY(-4px) scale(1.02); }

  #microfono .icon {
    font-size: 28px;
    filter: drop-shadow(0 0 8px rgba(0,230,184,0.85));
    transition: transform .18s ease;
  }

  /* anillo base azul-verdoso */
  #microfono .base-ring {
    position: absolute;
    bottom: -10px;
    left: 50%;
    transform: translateX(-50%);
    width: 120%;
    height: 10px;
    border-radius: 50%;
    background: linear-gradient(90deg, rgba(0,230,184,0.14), rgba(0,140,255,0.12));
    filter: blur(6px);
    z-index: -1;
  }

  /* glow interno/ne√≥n cuando activo */
  #microfono.active {
    animation: neonPulse 1.6s infinite;
    box-shadow:
      0 10px 30px rgba(0,230,184,0.16),
      0 0 50px rgba(0,230,184,0.18),
      0 0 120px rgba(0,160,255,0.06);
  }

  @keyframes neonPulse {
    0% { transform: scale(1); filter: none; }
    50% { transform: scale(1.03); }
    100% { transform: scale(1); }
  }

  /* aro expansivo grande (creado din√°micamente) */
  .ring {
    position: fixed;
    border-radius: 50%;
    pointer-events: none;
    z-index: 99990;
    mix-blend-mode: screen;
    box-shadow: 0 0 40px currentColor, 0 0 120px currentColor;
    opacity: .9;
    transform: translate(-50%, -50%) scale(0);
    animation: ringExpand 1000ms cubic-bezier(.2,.9,.2,1) forwards;
  }

  @keyframes ringExpand {
    0% { transform: translate(-50%, -50%) scale(0); opacity: 0.9; }
    70% { opacity: 0.25; }
    100% { transform: translate(-50%, -50%) scale(8.2); opacity: 0; }
  }

  /* anillo central breve (para micro-eco) */
  .micro-pulse {
    position: absolute;
    border-radius: 50%;
    width: 100%;
    height: 100%;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%) scale(0.2);
    pointer-events: none;
    opacity: .9;
    animation: pulseSmall 700ms ease-out forwards;
  }
  @keyframes pulseSmall {
    0% { transform: translate(-50%, -50%) scale(0.2); opacity: .9; }
    100% { transform: translate(-50%, -50%) scale(1.5); opacity: 0; }
  }
</style>

<script>
  (function () {
    // Buscamos el input/textarea destino:
    const preferId = 'inputAsistente';
    let inputAsistente = document.getElementById(preferId) || document.querySelector('input[type="text"], textarea, [contenteditable="true"]');

    // Si no hay input en la p√°gina avisamos por consola y terminamos (no bloqueamos la carga)
    if (!inputAsistente) {
      console.warn('MicNeon: no se encontr√≥ un campo de texto (id="inputAsistente" o first input/textarea). A√±ade uno para que funcione.');
    }

    const micBtn = document.getElementById('microfono');
    let isRecording = false;
    let finalTranscript = '';
    let interimTranscript = '';

    // Compatibilidad
    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
    if (!SpeechRecognition) {
      console.warn('MicNeon: SpeechRecognition no soportado en este navegador. Usa Chrome o Edge.');
      // seguir mostrando bot√≥n pero sin funcionalidad
      micBtn.addEventListener('click', () => {
        // breve pulso visual aunque no funcione
        micBtn.classList.add('active');
        setTimeout(() => micBtn.classList.remove('active'), 600);
      });
      return;
    }

    const recognition = new SpeechRecognition();
    recognition.lang = 'es-ES';
    recognition.interimResults = true;
    recognition.continuous = true;

    // Lanzador de aros (verde cuando inicia, rojo cuando para)
    function lanzarAro(color) {
      const rect = micBtn.getBoundingClientRect();
      const ring = document.createElement('div');
      ring.className = 'ring';
      ring.style.left = (rect.left + rect.width/2) + 'px';
      ring.style.top = (rect.top + rect.height/2) + 'px';
      ring.style.width = rect.width + 'px';
      ring.style.height = rect.height + 'px';
      ring.style.border = `3px solid ${color}`;
      ring.style.color = color;
      document.body.appendChild(ring);
      setTimeout(() => { ring.remove(); }, 1100);
      // micro pulse inside button for fast feedback
      const microPulse = document.createElement('span');
      microPulse.className = 'micro-pulse';
      microPulse.style.background = color;
      micBtn.appendChild(microPulse);
      setTimeout(()=> microPulse.remove(), 700);
    }

    // function para intentar "enviar" el mensaje
    function sendMessageIfNeeded(text) {
      if (!text || !text.trim()) return;
      // 1) si el input est√° en un form, intentar submit
      if (inputAsistente) {
        let form = inputAsistente.closest && inputAsistente.closest('form');
        if (form) {
          // Trigger native submit
          try {
            form.requestSubmit ? form.requestSubmit() : form.submit();
            return;
          } catch (e) { /* fallthrough */ }
        }
      }

      // 2) buscar un bot√≥n de submit en la p√°gina (priorizando el del mismo contenedor)
      try {
        let btn;
        if (inputAsistente) {
          const root = inputAsistente.closest('form') || document;
          btn = root.querySelector('button[type="submit"], input[type="submit"], button[data-send], [data-send]');
        }
        if (!btn) {
          btn = document.querySelector('button[type="submit"], input[type="submit"], button[data-send], [data-send]');
        }
        if (btn) { btn.click(); return; }
      } catch (e) { /* ignore */ }

      // 3) Simular Enter keydown sobre el input (puede que la app escuche keydown)
      try {
        if (inputAsistente) {
          const ev = new KeyboardEvent('keydown', { bubbles: true, cancelable: true, key: 'Enter', code: 'Enter', which: 13, keyCode: 13 });
          inputAsistente.dispatchEvent(ev);
        }
      } catch (e) { /* ignore */ }
    }

    // ONRESULT: combinamos final + interim y escribimos en el input
    recognition.onresult = (evt) => {
      interimTranscript = '';
      for (let i = evt.resultIndex; i < evt.results.length; ++i) {
        const res = evt.results[i];
        if (res.isFinal) finalTranscript += res[0].transcript;
        else interimTranscript += res[0].transcript;
      }
      const combined = (finalTranscript + ' ' + interimTranscript).trim();
      if (inputAsistente) {
        // si es contenteditable
        if (inputAsistente.isContentEditable) inputAsistente.innerText = combined;
        else inputAsistente.value = combined;
      }
    };

    recognition.onstart = () => {
      isRecording = true;
      micBtn.classList.add('active');
      micBtn.setAttribute('aria-pressed', 'true');
      lanzarAro('#32e08a'); // verde
    };

    recognition.onend = () => {
      // Si se par√≥ grabando (no por fallo) enviamos el texto final
      if (isRecording) {
        isRecording = false;
        micBtn.classList.remove('active');
        micBtn.setAttribute('aria-pressed', 'false');
        lanzarAro('#ff4f6d'); // rojo
        // mandar el mensaje reconocido tras detener
        const textoFinal = finalTranscript.trim();
        // dar peque√±o delay para que el UI actualice el input antes de enviar
        setTimeout(() => sendMessageIfNeeded(textoFinal), 80);
        // reset transcripts para la pr√≥xima sesi√≥n
        finalTranscript = '';
        interimTranscript = '';
      }
    };

    recognition.onerror = (e) => {
      console.error('MicNeon - recognition error:', e);
      // desmontar estado visual
      isRecording = false;
      micBtn.classList.remove('active');
      micBtn.setAttribute('aria-pressed', 'false');
      // mostrar aro rojo de fallo
      lanzarAro('#ff4f6d');
      // no llamar a send en error
      finalTranscript = '';
      interimTranscript = '';
    };

    // Toggle via bot√≥n
    micBtn.addEventListener('click', (ev) => {
      ev.preventDefault();
      if (!isRecording) {
        finalTranscript = '';
        interimTranscript = '';
        try {
          recognition.start();
        } catch (err) {
          // algunos navegadores lanzan si start se llama dos veces r√°pido
          console.warn('MicNeon: start error', err);
        }
      } else {
        // parar y onend se encargar√° de enviar
        try { recognition.stop(); } catch (e) { console.warn(e); }
      }
    });

    // si el usuario hace foco manual en el input y pulsa Enter, queremos que no se rompa nada
    if (inputAsistente) {
      inputAsistente.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' && !e.shiftKey) {
          // si el usuario env√≠a manualmente, reset transcripts
          finalTranscript = '';
          interimTranscript = '';
        }
      });
    }
  })();
</script>

<!-- ======= BLOQUE CENTRAL DE NOTAS ======= -->
<div id="notesPopup">
  <div id="notesHeader">
    <h3>üìù Notas</h3>
    <button id="closeNotes">‚úñ</button>
  </div>
  <textarea id="notesArea" placeholder="Escribe tus notas aqu√≠..."></textarea>
</div>

<!-- Bot√≥n flotante para abrir -->
<button id="openNotes">üóíÔ∏è</button>

<style>
  /* Bot√≥n flotante de apertura (lateral izquierdo centrado) */
  #openNotes {
    position: fixed;
    top: 50%;
    left: 20px;
    transform: translateY(-50%);
    width: 60px;
    height: 60px;
    border-radius: 50%;
    border: none;
    font-size: 24px;
    color: #00ffd0;
    background: rgba(0, 255, 170, 0.15);
    box-shadow: 0 0 15px #00ffd0, inset 0 0 15px #00b3ff;
    backdrop-filter: blur(10px);
    cursor: pointer;
    transition: all 0.3s ease;
    z-index: 10000;
  }
  #openNotes:hover {
    transform: translateY(-50%) scale(1.1);
    box-shadow: 0 0 25px #00ffea, inset 0 0 20px #00ccff;
  }

  /* Ventana central */
  #notesPopup {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) scale(0.8);
    width: 420px;
    height: 400px;
    background: rgba(0, 40, 50, 0.3);
    backdrop-filter: blur(15px) saturate(160%);
    border: 2px solid rgba(0, 255, 200, 0.25);
    box-shadow: 0 0 25px rgba(0, 255, 255, 0.2);
    border-radius: 18px;
    color: white;
    font-family: "Segoe UI", sans-serif;
    opacity: 0;
    transition: all 0.35s ease;
    z-index: 9999;
    display: flex;
    flex-direction: column;
    pointer-events: none;
  }

  /* Cuando est√° visible */
  #notesPopup.active {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1);
    pointer-events: auto;
  }

  /* Cabecera del men√∫ */
  #notesHeader {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 14px 18px;
    background: rgba(0, 255, 170, 0.1);
    border-bottom: 1px solid rgba(0, 255, 170, 0.2);
    border-top-left-radius: 18px;
    border-top-right-radius: 18px;
  }

  #notesHeader h3 {
    margin: 0;
    font-size: 18px;
    color: #00ffd5;
    text-shadow: 0 0 8px #00ffee;
  }

  #notesHeader button {
    background: none;
    border: none;
    color: #00ffd5;
    font-size: 18px;
    cursor: pointer;
    transition: 0.3s;
  }

  #notesHeader button:hover {
    color: #ff4d6d;
    transform: scale(1.2);
  }

  /* √Årea de notas */
  #notesArea {
    flex: 1;
    background: transparent;
    border: none;
    resize: none;
    padding: 15px;
    font-size: 16px;
    color: #cafff4;
    outline: none;
    font-family: "Consolas", monospace;
  }

  #notesArea::placeholder {
    color: rgba(200, 255, 255, 0.5);
  }

  /* Scroll personalizado */
  #notesArea::-webkit-scrollbar {
    width: 8px;
  }
  #notesArea::-webkit-scrollbar-thumb {
    background: linear-gradient(#00ffc3, #0099ff);
    border-radius: 8px;
  }

  /* Efecto de entrada/salida */
  #notesPopup.active {
    animation: popIn 0.4s ease forwards;
  }

  @keyframes popIn {
    from {
      opacity: 0;
      transform: translate(-50%, -50%) scale(0.8);
    }
    to {
      opacity: 1;
      transform: translate(-50%, -50%) scale(1);
    }
  }
</style>

<script>
  const openNotes = document.getElementById("openNotes");
  const closeNotes = document.getElementById("closeNotes");
  const notesPopup = document.getElementById("notesPopup");
  const notesArea = document.getElementById("notesArea");

  // Mostrar / ocultar men√∫
  openNotes.addEventListener("click", () => notesPopup.classList.add("active"));
  closeNotes.addEventListener("click", () => notesPopup.classList.remove("active"));

  // Guardar notas en localStorage autom√°ticamente
  notesArea.value = localStorage.getItem("userNotes") || "";
  notesArea.addEventListener("input", () => {
    localStorage.setItem("userNotes", notesArea.value);
  });
</script>

<style>
/* =====================================
   MEN√ö DE ENTRADA ‚Äî PANTALLA INICIAL
   ===================================== */

.intro-screen {
  position: fixed;
  inset: 0;
  background: linear-gradient(180deg, var(--bg-0), var(--bg-1));
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 3000;
  animation: fadeInIntro 1.2s ease both;
}

@keyframes fadeInIntro {
  from { opacity: 0; transform: scale(1.02); }
  to { opacity: 1; transform: none; }
}

.intro-content {
  position: relative;
  text-align: center;
  color: #e9f4ff;
  font-family: "Inter", sans-serif;
}

.intro-ring {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 180px;
  height: 180px;
  border-radius: 50%;
  border: 3px solid var(--accent-1);
  transform: translate(-50%, -50%);
  opacity: 0.6;
  animation: ringPulse 3s ease-in-out infinite;
  filter: drop-shadow(0 0 12px rgba(87,228,184,0.3));
}

@keyframes ringPulse {
  0%,100% { transform: translate(-50%, -50%) scale(1); opacity: 0.6; }
  50% { transform: translate(-50%, -50%) scale(1.15); opacity: 0.9; }
}

.intro-title {
  font-size: 56px;
  font-weight: 800;
  letter-spacing: 2px;
  background: linear-gradient(90deg, var(--accent-1), var(--accent-2));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  text-shadow: 0 4px 16px rgba(87,228,184,0.2);
  z-index: 2;
  position: relative;
}

.intro-sub {
  margin-top: 22px;
  font-size: 16px;
  color: var(--muted);
  letter-spacing: 0.5px;
  opacity: 0.7;
  animation: blinkText 2s ease-in-out infinite;
}

@keyframes blinkText {
  0%,100% { opacity: 0.4; }
  50% { opacity: 1; }
}

/* Animaci√≥n de salida */
.fade-out {
  animation: fadeOutIntro 1s ease forwards;
}
@keyframes fadeOutIntro {
  from { opacity: 1; }
  to { opacity: 0; visibility: hidden; }
}
</style>

<style>
	
:root {
  /* Paleta actualizada para efecto glass oscuro suave */
  --bg-0: #0b1118;
  --bg-1: #101923;
  --glass-bg: rgba(255, 255, 255, 0.06);
  --glass-border: rgba(255, 255, 255, 0.15);
  --glass-highlight: rgba(255, 255, 255, 0.25);
  --muted: #b8c6d8;
  --accent-1: #66ffd1;
  --accent-2: #7ab8ff;
  --danger: #ff6b6b;
  --radius: 16px;
  --shadow: 0 20px 50px rgba(0, 0, 0, 0.35);
  font-family: "Inter", ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto;
  color-scheme: dark;
}

/* Aplicaci√≥n del efecto cristal l√≠quido */
.sidebar,
.panel,
#faqDrawer {
  background: var(--glass-bg);
  border: 1px solid var(--glass-border);
  backdrop-filter: blur(22px) saturate(180%);
  box-shadow: 0 12px 40px rgba(0, 0, 0, 0.45);
  border-radius: var(--radius);
  transition: all 0.4s ease;
}

/* Sombra difusa y reflejos al pasar */
.sidebar:hover,
.panel:hover,
#faqDrawer:hover {
  box-shadow: 0 16px 50px rgba(0, 0, 0, 0.55), inset 0 1px 1px var(--glass-highlight);
  background: rgba(255, 255, 255, 0.08);
}

/* Botones con relieve transl√∫cido */
.btn {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.08);
  color: var(--muted);
  backdrop-filter: blur(10px);
  transition: all 0.25s ease;
}
.btn:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(255, 255, 255, 0.25);
}
.btn.primary {
  background: linear-gradient(90deg, var(--accent-1), var(--accent-2));
  color: #052a26;
  font-weight: 700;
  border: none;
  box-shadow: 0 0 18px rgba(111,183,255,0.35);
}
.btn.primary:hover {
  transform: translateY(-2px);
  box-shadow: 0 0 24px rgba(111,183,255,0.45);
}

/* Burbuja tipo cristal */
.bubble.user,
.bubble.assistant {
  background: rgba(255,255,255,0.06);
  backdrop-filter: blur(18px);
  border: 1px solid rgba(255,255,255,0.12);
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.35);
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}
.bubble.user:hover,
.bubble.assistant:hover {
  transform: translateY(-2px);
  box-shadow: 0 14px 30px rgba(0, 0, 0, 0.4);
}

/* Input y textarea con vidrio difuminado */
input, textarea {
  background: rgba(255,255,255,0.04);
  border: 1px solid rgba(255,255,255,0.12);
  backdrop-filter: blur(12px);
  color: var(--muted);
}
input:focus, textarea:focus {
  border-color: var(--accent-2);
  background: rgba(255,255,255,0.07);
}

/* FAQ Drawer con m√°s transparencia */
#faqDrawer {
  background: rgba(16, 26, 36, 0.55);
  border: 1px solid rgba(255,255,255,0.15);
  backdrop-filter: blur(20px) saturate(180%);
}

/* Fondo transl√∫cido del bot√≥n flotante */
#faqToggle {
  background: linear-gradient(135deg, var(--accent-1), var(--accent-2));
  box-shadow: 0 12px 30px rgba(87,228,184,0.3);
}
#faqToggle:hover {
  transform: scale(1.08);
  box-shadow: 0 18px 40px rgba(111,183,255,0.45);
}

/* Intro screen glass */
.intro-screen {
  background: radial-gradient(ellipse at top, rgba(16,26,36,0.9), rgba(8,12,18,0.98));
  backdrop-filter: blur(14px);
}

/* Ajuste general para textos y contraste */
.muted {
  color: rgba(200, 220, 240, 0.75);
}

/* Peque√±o brillo ambiental */
body::before {
  content: "";
  position: fixed;
  inset: 0;
  background: radial-gradient(circle at 20% 20%, rgba(87,228,184,0.08), transparent 60%),
              radial-gradient(circle at 80% 80%, rgba(111,183,255,0.06), transparent 60%);
  pointer-events: none;
  z-index: 0;
}

/* =========================================================================
   Aden v7 con Panel FAQ desplegable
   - Mantiene la est√©tica anterior (oscuro, limpio).
   - A√±ade drawer/floating button en esquina con todas las preguntas.
   ========================================================================= */

:root{
  --bg-0:#07121a;
  --bg-1:#0e1a27;
  --panel:#11202b;
  --glass: rgba(255,255,255,0.03);
  --muted:#9fb0c6;
  --accent-1:#57e4b8;
  --accent-2:#6fb7ff;
  --danger:#ff6b6b;
  --card:#0b1720;
  --radius:14px;
  --shadow: 0 14px 36px rgba(2,8,23,0.6);
  font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  color-scheme: dark;
}

/* Base layout (copiado / adaptado de la versi√≥n previa) */
html,body{height:100%;margin:0;background:linear-gradient(180deg,var(--bg-0),var(--bg-1));color:#e9f4ff;-webkit-font-smoothing:antialiased;}
.wrap{max-width:1200px;margin:28px auto;padding:20px;display:grid;grid-template-columns:340px 1fr;gap:20px;min-height:760px}

/* Sidebar */
.sidebar{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:18px;border-radius:var(--radius);box-shadow:var(--shadow);display:flex;flex-direction:column;overflow:hidden}
.brand{display:flex;gap:12px;align-items:center}
.logo{width:56px;height:56px;border-radius:12px;background:linear-gradient(135deg,var(--accent-1),var(--accent-2));display:flex;align-items:center;justify-content:center;font-weight:900;color:#022b2a;font-size:18px;box-shadow:0 6px 18px rgba(87,228,184,0.06)}
.brand h1{margin:0;font-size:16px}
.brand p{margin:0;color:var(--muted);font-size:12px}
.controls{display:flex;gap:8px;margin-top:12px}
.btn{background:transparent;border:1px solid rgba(255,255,255,0.04);padding:8px 10px;border-radius:10px;color:var(--muted);cursor:pointer;font-size:13px}
.btn.primary{background:linear-gradient(90deg,var(--accent-1),var(--accent-2));border:none;color:#052a26;font-weight:700}
.btn.ghost{background:transparent;border:1px dashed rgba(255,255,255,0.03)}
.btn.small{padding:6px 8px;font-size:12px}

/* Search / chats list */
.search{display:flex;gap:8px;margin-top:12px;align-items:center}
.search input{flex:1;padding:10px;border-radius:10px;background:transparent;border:1px solid rgba(255,255,255,0.03);color:var(--muted)}
.meta-pill{padding:6px 10px;border-radius:999px;background:rgba(255,255,255,0.02);font-size:12px;color:var(--muted)}
.chats{margin-top:12px;flex:1;overflow:auto;display:flex;flex-direction:column;gap:10px;padding-right:6px}
.chat-item{display:flex;align-items:center;gap:10px;padding:10px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent);cursor:pointer;border:1px solid transparent;transition:all .18s}
.chat-item:hover{transform:translateY(-4px);box-shadow:0 10px 28px rgba(2,6,23,0.35)}
.chat-item.active{outline:2px solid rgba(87,228,184,0.08)}
.chat-thumb{width:44px;height:44px;border-radius:10px;background:linear-gradient(135deg,#c7f9e8,#9fd1ff);display:flex;align-items:center;justify-content:center;font-weight:700;color:#022}
.chat-meta h4{margin:0;font-size:13px}
.chat-meta p{margin:0;font-size:12px;color:var(--muted)}

/* Panel principal */
.panel{background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.02));padding:18px;border-radius:var(--radius);box-shadow:var(--shadow);display:flex;flex-direction:column}
.panel-header{display:flex;align-items:center;justify-content:space-between}
.panel-header .left{display:flex;gap:12px;align-items:center}
.panel-header h2{margin:0;font-size:18px}
.panel-actions{display:flex;gap:8px}
.messages{flex:1;margin-top:14px;padding:16px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent);overflow:auto;border:1px dashed rgba(255,255,255,0.02);display:flex;flex-direction:column;gap:12px}
.bubble{max-width:78%;padding:12px 14px;border-radius:14px;line-height:1.45;box-shadow:0 8px 22px rgba(2,6,23,0.45)}
.bubble.user{align-self:flex-end;background:linear-gradient(180deg,#071425,#061422);border:1px solid rgba(255,255,255,0.02)}
.bubble.assistant{align-self:flex-start;background:linear-gradient(180deg,#022b2a,#062c3c);border:1px solid rgba(255,255,255,0.02)}
.bubble .meta{font-size:11px;color:var(--muted);margin-top:8px;display:flex;justify-content:space-between}
.compose{display:flex;gap:12px;margin-top:12px;align-items:flex-end}
textarea{flex:1;padding:14px;border-radius:12px;background:transparent;border:1px solid rgba(255,255,255,0.03);color:var(--muted);min-height:68px;resize:none}
.compose .right{display:flex;flex-direction:column;gap:8px}
.tiny{display:flex;gap:8px;align-items:center;margin-top:8px;font-size:12px;color:var(--muted)}
.chips{display:flex;gap:8px;flex-wrap:wrap}
.chip{padding:8px 10px;border-radius:999px;background:rgba(255,255,255,0.02);cursor:pointer;border:1px solid rgba(255,255,255,0.02);font-size:13px}
.chip:hover{transform:translateY(-3px)}
.typing{display:inline-block;vertical-align:middle;width:56px;height:14px}
.typing span{display:inline-block;width:9px;height:9px;border-radius:50%;background:rgba(255,255,255,0.12);margin-right:6px;animation:dots 1.2s infinite}
.typing span:nth-child(2){animation-delay:.12s}
.typing span:nth-child(3){animation-delay:.24s}
@keyframes dots{0%{transform:translateY(0);opacity:.4}50%{transform:translateY(-6px);opacity:1}100%{transform:translateY(0);opacity:.4}}
@media (max-width:980px){.wrap{grid-template-columns:1fr;padding:12px}.sidebar{order:2}}
.muted{color:var(--muted)}
.danger{color:var(--danger)}
.fade-in{animation:fadeIn .28s ease both}
@keyframes fadeIn{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:none}}
.settings-panel{margin-top:12px;padding:12px;border-radius:12px;background:rgba(255,255,255,0.012);border:1px solid rgba(255,255,255,0.02)}
.toggle{display:flex;align-items:center;gap:10px}
.kbd{background:rgba(255,255,255,0.03);padding:6px 8px;border-radius:6px;font-size:12px}
.footer-bar{display:flex;align-items:center;justify-content:space-between;padding:12px;border-radius:10px;margin-top:12px;background:rgba(255,255,255,0.01);border:1px solid rgba(255,255,255,0.02)}
.small{font-size:12px;color:var(--muted)}
.accent{color:var(--accent-1)}
.search-highlight{background:linear-gradient(90deg, rgba(111,183,255,0.12), rgba(87,228,184,0.06));padding:4px 8px;border-radius:8px}
.voice-row{display:flex;gap:8px;align-items:center;margin-top:8px}
.voice-btn{padding:8px 10px;border-radius:8px;border:1px solid rgba(255,255,255,0.03);cursor:pointer}
.voice-btn.active{background:linear-gradient(90deg,var(--accent-1),var(--accent-2));color:#052a26}
[tabindex="0"]:focus{outline:2px solid rgba(111,183,255,0.08)}
.hr{border-top:1px dashed rgba(255,255,255,0.02);margin:10px 0}
.center{display:flex;align-items:center;justify-content:center}
@media (min-width:1400px){.wrap{max-width:1400px}}

/* =========================
   FAQ Drawer & Floating Button
   ========================= */

/* floating button bottom-right */
#faqToggle {
  position: fixed;
  right: 18px;
  bottom: 18px;
  width:56px;
  height:56px;
  border-radius:999px;
  display:flex;align-items:center;justify-content:center;
  background:linear-gradient(135deg,var(--accent-1),var(--accent-2));
  color:#052a26;font-weight:800;border:none;box-shadow:0 12px 30px rgba(2,8,23,0.6);
  cursor:pointer;z-index:1200;
}

/* drawer */
#faqDrawer {
  position: fixed;
  right: 18px;
  bottom: 86px; /* above the button */
  width: 380px;
  max-height: 70vh;
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  border-radius:12px;
  box-shadow: 0 20px 60px rgba(2,8,23,0.6);
  z-index:1200;
  overflow:hidden;
  display:flex;
  flex-direction:column;
  transform: translateY(12px) scale(0.98);
  opacity:0;
  transition: all .18s ease;
  pointer-events:none;
  border:1px solid rgba(255,255,255,0.02);
}

/* when open */
#faqDrawer.open { transform: none; opacity:1; pointer-events:auto; }

/* header inside drawer */
#faqDrawer .header { padding:12px 14px; border-bottom:1px dashed rgba(255,255,255,0.02); display:flex;justify-content:space-between;align-items:center;}
#faqDrawer .header .title{font-weight:700}
#faqDrawer .header .muted{font-size:12px;color:var(--muted)}

/* search inside drawer */
#faqSearch { width: calc(100% - 28px); margin:8px 14px; padding:10px;border-radius:10px;background:transparent;border:1px solid rgba(255,255,255,0.03); color:var(--muted) }

/* list */
#faqList { overflow:auto; padding:10px 8px; display:flex; flex-direction:column; gap:8px; }

/* each faq item */
.faq-item { padding:10px; border-radius:10px; background: rgba(255,255,255,0.01); display:flex; flex-direction:column; gap:6px; border:1px solid rgba(255,255,255,0.02); }
.faq-item .q { font-weight:700; font-size:13px; }
.faq-item .a { font-size:13px; color:var(--muted); }
.faq-item .controls { display:flex; gap:8px; margin-top:6px; }
.faq-item .controls button { padding:6px 8px; border-radius:8px; border:1px solid rgba(255,255,255,0.03); background:transparent; color:var(--muted); cursor:pointer; font-size:13px }
.faq-empty { padding:14px; text-align:center; color:var(--muted) }

/* small footer inside drawer */
#faqDrawer .footer { padding:10px 12px; border-top:1px dashed rgba(255,255,255,0.02); display:flex; justify-content:space-between; align-items:center; font-size:12px; color:var(--muted) }

/* =====================================
   MEJORAS VISUALES + ANIMACI√ìN DE MENSAJES
   ===================================== */

/* Animaciones suaves al aparecer mensajes */
@keyframes bubbleInUser {
  0% { transform: translateY(12px) scale(0.98); opacity: 0; }
  100% { transform: translateY(0); scale(1); opacity: 1; }
}

@keyframes bubbleInAssistant {
  0% { transform: translateY(12px) scale(0.96) rotate(-1deg); opacity: 0; }
  100% { transform: translateY(0); scale(1); rotate(0deg); opacity: 1; }
}

/* Efecto de "entrada" suave */
.bubble.user {
  animation: bubbleInUser 0.25s ease-out both;
  background: linear-gradient(180deg, #071425, #061422);
  border: 1px solid rgba(255,255,255,0.03);
  box-shadow: 0 6px 20px rgba(87,228,184,0.08);
  transition: transform .15s ease;
}
.bubble.user:hover {
  transform: translateY(-2px) scale(1.02);
}

/* Aden: animaci√≥n con rebote leve y color vivo */
.bubble.assistant {
  animation: bubbleInAssistant 0.35s cubic-bezier(0.18, 0.89, 0.32, 1.28) both;
  background: linear-gradient(180deg, #022b2a, #083345);
  border: 1px solid rgba(87,228,184,0.08);
  box-shadow: 0 8px 24px rgba(87,228,184,0.15);
  transition: transform .18s ease, box-shadow .18s ease;
}
.bubble.assistant:hover {
  transform: translateY(-3px) scale(1.03);
  box-shadow: 0 10px 28px rgba(111,183,255,0.2);
}

/* Sombra m√°s realista al pasar el rat√≥n */
.chat-item:hover {
  transform: translateY(-4px) scale(1.02);
  box-shadow: 0 10px 28px rgba(2,6,23,0.45);
}

/* Transiciones suaves al abrir FAQ y botones */
#faqDrawer,
#faqToggle,
.btn {
  transition: all .22s ease-in-out;
}

/* Peque√±a mejora visual general */
textarea, input {
  transition: border-color .2s ease, background-color .2s ease;
}
textarea:focus, input:focus {
  border-color: rgba(111,183,255,0.25);
  background: rgba(255,255,255,0.02);
}

/* Animaci√≥n FAQ al abrir */
#faqDrawer.open {
  transform: translateY(0) scale(1);
  opacity: 1;
  animation: fadeIn .25s ease both;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(8px); }
  to { opacity: 1; transform: none; }
}


/* =====================================
   EFECTO DE ESCRITURA "TYPING" EN MENSAJES
   ===================================== */

.typewriter {
  display: inline-block;
  overflow: hidden;
  white-space: nowrap;
  border-right: 2px solid rgba(255,255,255,0.15);
  animation: typing 2.4s steps(40, end), blink 0.8s step-end infinite;
}

/* Velocidad de escritura (ajustable con duraci√≥n del typing) */
@keyframes typing {
  from { width: 0; }
  to { width: 100%; }
}

/* Parpadeo del cursor */
@keyframes blink {
  from, to { border-color: transparent; }
  50% { border-color: rgba(255,255,255,0.25); }
}

/* Versi√≥n m√°s lenta para Aden */
.typewriter.assistant {
  animation: typing 3.4s steps(50, end), blink 0.8s step-end infinite;
}

</style>
</head>

<script>
document.addEventListener("keydown", hideIntro);
document.addEventListener("click", hideIntro);

function hideIntro() {
  const intro = document.getElementById("introScreen");
  if (!intro) return;
  intro.classList.add("fade-out");
  setTimeout(() => intro.remove(), 1000);
  document.removeEventListener("keydown", hideIntro);
  document.removeEventListener("click", hideIntro);
}
</script>

<!-- ===== Sistema de Cuentas (local) ===== -->
<!-- Requiere: ning√∫n recurso externo. Todo localStorage. -->
<div id="acctWidget">
  <button id="acctBtn" aria-haspopup="true" aria-expanded="false" title="Cuentas">
    <span class="ring"></span>
    <span class="avatar">üë§</span>
  </button>

  <div id="acctDropdown" role="menu" aria-hidden="true">
    <div class="acctHeader">
      <strong>Perfiles</strong>
      <button id="closeAcct" title="Cerrar">‚úñ</button>
    </div>

    <div id="acctList" class="section"></div>

    <div class="section small">
      <button id="createAcctBtn" class="primary">+ Crear cuenta</button>
    </div>

    <div id="acctForms" class="forms">
      <!-- Formularios se inyectan aqu√≠ -->
    </div>
  </div>
</div>

<style>
  /* ---------- Widget top-right (cristal, minimal) ---------- */
  #acctWidget { position: fixed; top: 18px; right: 18px; z-index: 20000; font-family: Inter, "Segoe UI", system-ui, sans-serif; }
  #acctBtn {
    width: 56px; height: 56px; border-radius: 50%;
    border: 2px solid rgba(10,20,30,0.6);
    background: linear-gradient(180deg, rgba(6,10,16,0.7), rgba(3,6,10,0.85));
    box-shadow: 0 6px 20px rgba(0,0,0,0.6), 0 0 30px rgba(0,140,255,0.06), inset 0 1px 0 rgba(255,255,255,0.02);
    color: #cfefff; display: grid; place-items: center; cursor: pointer; position: relative;
    backdrop-filter: blur(8px) saturate(140%);
  }
  #acctBtn .avatar { font-size: 20px; text-shadow: 0 0 10px rgba(0,200,255,0.16); }
  #acctBtn .ring {
    position: absolute; left: -6px; top: -6px; right: -6px; bottom: -6px; border-radius: 50%;
    border: 2px solid rgba(0,140,255,0.06);
    box-shadow: 0 0 24px rgba(0,200,255,0.06);
    pointer-events: none;
  }
  #acctBtn:hover { transform: translateY(-2px); transition: .18s; box-shadow: 0 10px 30px rgba(0,0,0,0.7), 0 0 40px rgba(0,200,255,0.06); }

  /* Dropdown */
  #acctDropdown {
    width: 320px;
    position: absolute;
    right: 0;
    top: 70px;
    background: linear-gradient(180deg, rgba(3,10,16,0.78), rgba(6,12,18,0.85));
    border: 1px solid rgba(0,200,220,0.06);
    box-shadow: 0 10px 40px rgba(0,0,0,0.6);
    border-radius: 14px;
    padding: 12px;
    color: #e6fbff;
    display: none; /* toggle via JS */
    backdrop-filter: blur(10px) saturate(160%);
  }

  #acctDropdown[aria-hidden="false"] { display: block; animation: dropIn .18s ease; }

  @keyframes dropIn { from { transform: translateY(-6px); opacity: 0 } to { transform: translateY(0); opacity: 1 } }

  .acctHeader { display:flex; justify-content: space-between; align-items:center; margin-bottom:8px; }
  .acctHeader strong { color: #aef6e6; filter: drop-shadow(0 0 8px rgba(0,200,200,0.08)); }

  .section { margin: 8px 0; max-height: 220px; overflow:auto; }
  .small { margin-top: 6px; }

  /* Lista de cuentas */
  .acctItem {
    display:flex; align-items:center; gap:10px; padding:8px; border-radius:10px;
    background: linear-gradient(90deg, rgba(0,0,0,0.18), rgba(255,255,255,0.02));
    margin-bottom:8px; cursor:pointer;
    transition: transform .12s, box-shadow .12s;
  }
  .acctItem:hover { transform: translateX(4px); box-shadow: 0 8px 18px rgba(0,140,255,0.04); }
  .acctPic {
    width:40px; height:40px; border-radius:50%; display:grid; place-items:center; font-size:18px;
    background: linear-gradient(135deg,#002b40, #004955); color: #bfffe9; border:1px solid rgba(0,200,200,0.06);
  }
  .acctMeta { flex:1; min-width:0; }
  .acctMeta .name { font-weight:600; color:#dff; white-space:nowrap; text-overflow:ellipsis; overflow:hidden; }
  .acctMeta .email { font-size:12px; color:rgba(210,255,255,0.7); opacity:.9; }

  .acctActions { display:flex; gap:8px; align-items:center; }
  .btnTiny { padding:6px 8px; border-radius:8px; border:none; cursor:pointer; font-size:13px; background:rgba(0,140,255,0.06); color:#cdefef; }
  .btnTiny.danger { background: linear-gradient(90deg,#ff4d6d33,#ff4d6d22); color:#ffdbe1; }

  .primary { width:100%; padding:10px; border-radius:10px; font-weight:600; border:none; cursor:pointer; background:linear-gradient(90deg,#00ffd5,#00a8ff); color:#012; box-shadow: 0 6px 16px rgba(0,160,255,0.08); }

  /* Forms */
  .forms { margin-top:8px; display:flex; flex-direction:column; gap:8px; }
  .formRow { display:flex; gap:8px; align-items:center; }
  .formRow input { flex:1; padding:8px 10px; border-radius:8px; border:1px solid rgba(255,255,255,0.04); background:rgba(255,255,255,0.02); color:#e8fbff; outline:none; }
  .formRow input::placeholder { color:rgba(220,255,255,0.45); }
  .hint { font-size:12px; color:rgba(200,255,255,0.55); }

  /* responsive small */
  @media (max-width:420px) {
    #acctDropdown { width: calc(100vw - 20px); right:10px; left:10px; }
  }
</style>

<script>
(function(){
  // STORAGE KEYS
  const KEY_USERS = 'mic_app_users_v1';
  const KEY_CURRENT = 'mic_app_current_v1';

  // helpers: load/save
  function loadUsers(){ try{ return JSON.parse(localStorage.getItem(KEY_USERS) || '[]'); } catch(e){ return []; } }
  function saveUsers(users){ localStorage.setItem(KEY_USERS, JSON.stringify(users)); }

  // hash password (SHA-256) -> hex
  async function hashPwd(pwd){
    const enc = new TextEncoder().encode(pwd);
    const digest = await crypto.subtle.digest('SHA-256', enc);
    return Array.from(new Uint8Array(digest)).map(b => b.toString(16).padStart(2,'0')).join('');
  }

  // find current user
  function getCurrentEmail(){ return localStorage.getItem(KEY_CURRENT); }
  function setCurrentEmail(email){ if(email) localStorage.setItem(KEY_CURRENT, email); else localStorage.removeItem(KEY_CURRENT); }

  // UI elems
  const acctBtn = document.getElementById('acctBtn');
  const acctDropdown = document.getElementById('acctDropdown');
  const acctList = document.getElementById('acctList');
  const acctForms = document.getElementById('acctForms');
  const createBtn = document.getElementById('createAcctBtn');
  const closeAcct = document.getElementById('closeAcct');

  // bind toggle
  acctBtn.addEventListener('click', (e) => {
    const open = acctDropdown.getAttribute('aria-hidden') === 'false';
    acctDropdown.setAttribute('aria-hidden', open ? 'true' : 'false');
    acctBtn.setAttribute('aria-expanded', !open);
    if(!open) renderDropdown();
  });
  closeAcct.addEventListener('click', () => { acctDropdown.setAttribute('aria-hidden','true'); acctBtn.setAttribute('aria-expanded','false'); });

  // clicking outside closes
  document.addEventListener('click', (e) => {
    if(!acctDropdown.contains(e.target) && !acctBtn.contains(e.target)){
      acctDropdown.setAttribute('aria-hidden','true');
      acctBtn.setAttribute('aria-expanded','false');
    }
  });

  // render dropdown: list of accounts + small panel
  function renderDropdown(){
    acctList.innerHTML = '';
    acctForms.innerHTML = '';

    const users = loadUsers();
    const current = getCurrentEmail();

    if(users.length === 0){
      acctList.innerHTML = '<div class="hint">No hay cuentas. Crea una.</div>';
    } else {
      users.forEach(u => {
        const item = document.createElement('div');
        item.className = 'acctItem';
        item.innerHTML = `
          <div class="acctPic">${(u.name||u.email||'U').slice(0,1).toUpperCase()}</div>
          <div class="acctMeta">
            <div class="name">${escapeHtml(u.name||u.email)}</div>
            <div class="email">${escapeHtml(u.email)}</div>
          </div>
          <div class="acctActions">
            ${current === u.email ? '<button class="btnTiny" disabled>Activo</button>' : `<button class="btnTiny" data-action="switch" data-email="${u.email}">Abrir</button>`}
            <button class="btnTiny" data-action="info" data-email="${u.email}">Ver</button>
            <button class="btnTiny danger" data-action="del" data-email="${u.email}">Borrar</button>
          </div>
        `;
        acctList.appendChild(item);
      });
    }

    // quick info area
    const infoBox = document.createElement('div');
    infoBox.className = 'section';
    const curUser = users.find(x => x.email === current);
    if(curUser){
      const notesCount = (curUser.notes||'').length;
      const chatsCount = (curUser.chats||[]).length;
      infoBox.innerHTML = `
        <div class="hint">Cuenta activa: <strong>${escapeHtml(curUser.name||curUser.email)}</strong></div>
        <div class="hint">Notas: ${notesCount ? 'guardadas' : 'vac√≠as'} ¬∑ Chats: ${chatsCount}</div>
        <div style="margin-top:8px;">
          <button class="primary" id="logoutBtn">Cerrar sesi√≥n</button>
        </div>
      `;
    } else {
      infoBox.innerHTML = '<div class="hint">Ninguna sesi√≥n abierta.</div>';
    }

    acctForms.appendChild(infoBox);

    // attach handlers
    acctList.querySelectorAll('[data-action]').forEach(btn => {
      btn.addEventListener('click', ev => {
        const action = btn.getAttribute('data-action');
        const email = btn.getAttribute('data-email');
        if(action === 'switch') { loginByEmail(email); }
        if(action === 'info') { showUserInfo(email); }
        if(action === 'del')  { deleteUser(email); }
      });
    });

    const logout = document.getElementById('logoutBtn');
    if(logout) logout.addEventListener('click', () => { logoutUser(); renderDropdown(); });

    // create form area loaded below on demand
    renderCreateForm();
  }

  // escape helper
  function escapeHtml(s){ if(!s) return ''; return s.replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m])); }

  // show user info modal (simple)
  function showUserInfo(email){
    const users = loadUsers();
    const u = users.find(x => x.email === email);
    if(!u) return alert('Usuario no encontrado');
    const info = `
      Nombre: ${escapeHtml(u.name||'‚Äî')}
      Email: ${escapeHtml(u.email)}
      Notas guardadas: ${u.notes ? (u.notes.length>0 ? 's√≠' : 'no') : 'no'}
      Chats: ${u.chats ? u.chats.length : 0}
    `;
    alert(info);
  }

  // delete user
  function deleteUser(email){
    if(!confirm('¬øBorrar esta cuenta y todos sus datos localmente?')) return;
    let users = loadUsers();
    users = users.filter(u => u.email !== email);
    saveUsers(users);
    if(getCurrentEmail() === email) setCurrentEmail(null);
    renderDropdown();
    syncNotesToUI();
  }

  // create form
  function renderCreateForm(){
    const container = document.createElement('div');
    container.className = 'forms';
    container.innerHTML = `
      <div class="hint">Crear o iniciar sesi√≥n</div>
      <div class="formRow"><input id="formName" placeholder="Nombre (opcional)"></div>
      <div class="formRow"><input id="formEmail" placeholder="Correo electr√≥nico"></div>
      <div class="formRow"><input id="formPwd" type="password" placeholder="Contrase√±a"></div>
      <div style="display:flex; gap:8px;">
        <button id="doRegister" class="primary">Registrar</button>
        <button id="doLogin" class="btnTiny">Iniciar sesi√≥n</button>
      </div>
    `;
    acctForms.appendChild(container);

    // bind
    document.getElementById('doRegister').addEventListener('click', async () => {
      const name = document.getElementById('formName').value.trim();
      const email = document.getElementById('formEmail').value.trim().toLowerCase();
      const pwd = document.getElementById('formPwd').value;
      if(!validateEmail(email) || !pwd) return alert('Email y contrase√±a requeridos.');
      const ok = await registerUser({name, email, pwd});
      if(ok) { alert('Cuenta creada'); renderDropdown(); }
    });
    document.getElementById('doLogin').addEventListener('click', async () => {
      const email = document.getElementById('formEmail').value.trim().toLowerCase();
      const pwd = document.getElementById('formPwd').value;
      if(!email || !pwd) return alert('Rellena email y contrase√±a.');
      const ok = await loginUser({email, pwd});
      if(ok) { alert('Sesi√≥n iniciada'); renderDropdown(); }
      syncNotesToUI();
    });
  }

  // email validator simple
  function validateEmail(e){ return /\S+@\S+\.\S+/.test(e); }

  // Register user
  async function registerUser({name, email, pwd}){
    const users = loadUsers();
    if(users.find(u => u.email === email)) { alert('Ya existe una cuenta con ese email'); return false; }
    const hp = await hashPwd(pwd);
    const newU = { name: name||'', email, pwdHash: hp, notes: '', chats: [] };
    users.push(newU);
    saveUsers(users);
    setCurrentEmail(email);
    syncNotesToUI();
    return true;
  }

  // Login
  async function loginUser({email, pwd}){
    const users = loadUsers();
    const u = users.find(x => x.email === email);
    if(!u) { alert('Cuenta no encontrada'); return false; }
    const hp = await hashPwd(pwd);
    if(hp !== u.pwdHash) { alert('Contrase√±a incorrecta'); return false; }
    setCurrentEmail(email);
    syncNotesToUI();
    return true;
  }

  // Login by email (without pwd) - used when switching (if you want quick switch)
  // Here we ask confirmation and require pwd prompt for security.
  async function loginByEmail(email){
    const pwd = prompt('Introduce la contrase√±a para abrir esta cuenta:');
    if(pwd === null) return;
    await loginUser({email, pwd});
    renderDropdown();
  }

  // logout
  function logoutUser(){
    setCurrentEmail(null);
    renderDropdown();
    syncNotesToUI();
  }

  // Save notes for current user
  function saveNotesForCurrent(text){
    const email = getCurrentEmail();
    if(!email) return;
    const users = loadUsers();
    const u = users.find(x => x.email === email);
    if(!u) return;
    u.notes = text;
    saveUsers(users);
  }

  // load notes for current user
  function loadNotesForCurrent(){
    const email = getCurrentEmail();
    if(!email) return '';
    const users = loadUsers();
    const u = users.find(x => x.email === email);
    return u ? (u.notes||'') : '';
  }

  // Chat API: save chat items (array of objects {role:'user'|'assistant', text})
  function saveChatForCurrent(entry){
    const email = getCurrentEmail();
    if(!email) return;
    const users = loadUsers();
    const u = users.find(x => x.email === email);
    if(!u) return;
    u.chats = u.chats || [];
    u.chats.push(entry);
    // keep last 200 messages max
    if(u.chats.length > 200) u.chats = u.chats.slice(-200);
    saveUsers(users);
  }
  function getChatsForCurrent(){ const email = getCurrentEmail(); if(!email) return []; const u = loadUsers().find(x=>x.email===email); return u ? (u.chats||[]) : []; }

  // Expose some API globally
  window.MIC_APP = {
    registerUser,
    loginUser,
    logoutUser,
    saveNotesForCurrent,
    loadNotesForCurrent,
    saveChatForCurrent,
    getChatsForCurrent,
    getCurrentEmail,
    listUsers: loadUsers
  };

  // Hook into page notes area if exists: #notesArea (from your notes block)
  function syncNotesToUI(){
    const area = document.getElementById('notesArea');
    if(!area) return;
    const currentNotes = loadNotesForCurrent() || '';
    if(area.isContentEditable) area.innerText = currentNotes;
    else area.value = currentNotes;
    // bind input -> save per-user
    // remove existing to avoid duplicate listeners
    area.removeEventListener('input', notesInputHandler);
    area.addEventListener('input', notesInputHandler);
  }
  function notesInputHandler(e){
    const val = e.target.isContentEditable ? e.target.innerText : e.target.value;
    saveNotesForCurrent(val);
  }

  // run initial render
  renderDropdown();
  syncNotesToUI();

  // small utility: on first load, if no users exist, create a sample guest user
  (async function maybeCreateGuest(){
    const users = loadUsers();
    if(users.length === 0){
      const pwd = 'guest'; // trivial password for guest; user can change / delete
      const guestHash = await hashPwd(pwd);
      users.push({name:'Guest', email:'guest@local', pwdHash: guestHash, notes:'', chats:[]});
      saveUsers(users);
    }
    renderDropdown();
  })();

  // Expose quick saveChat helper for simple usage:
  // usage: window.saveChat(messageFromUser, replyFromAssistant)
  window.saveChat = function(userText, assistantText){
    if(userText) saveChatForCurrent({role:'user', text:userText, time:Date.now()});
    if(assistantText) saveChatForCurrent({role:'assistant', text:assistantText, time:Date.now()});
  };

  // End IIFE
})();

</script>


<body>
<div class="wrap" role="application" aria-label="Asistente Aden">
  <!-- SIDEBAR -->
  <aside class="sidebar" aria-label="Barra lateral">
    <div class="brand">
      <div class="logo" title="Asistente Aden">¬∫_¬∫</div>
      <div>
        <h1 id="brandName">Aden ‚Äî Asistente Local</h1>
        <p id="brandTag">Versi√≥n amistosa ¬∑ solo texto ¬∑ LocalStorage</p>
      </div>
    </div>

    <div class="controls" aria-hidden="false">
      <button id="newChatBtn" class="btn primary" title="Crear nuevo chat">+ Nuevo</button>
      <button id="importBtn" class="btn" title="Importar chats JSON">Importar</button>
      <button id="exportAllBtn" class="btn" title="Exportar todos los chats">Exportar</button>
    </div>

    <div class="search" role="search" aria-label="Buscar chats">
      <input id="searchChats" placeholder="Buscar chats o palabras clave..." aria-label="Buscar chats"/>
      <div class="meta-pill" id="chatCount" aria-live="polite">0</div>
    </div>

    <div class="chats" id="chatsList" tabindex="0" aria-live="polite" aria-label="Lista de chats"></div>

    <div class="settings-panel" aria-label="Ajustes r√°pidos">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <div>
          <div class="small">L√≠mite respuestas/chat</div>
          <div class="muted" id="limitDisplay">12</div>
        </div>
        <div style="display:flex;gap:8px">
          <button id="decLimit" class="btn">-</button>
          <button id="incLimit" class="btn">+</button>
          <button id="resetLocal" class="btn">Reset</button>
        </div>
      </div>

      <div class="hr"></div>

      <div style="display:flex;justify-content:space-between;align-items:center;margin-top:6px">
        <div>
          <div class="small">Voz &mdash; Lector</div>
          <div class="muted">Sintetizador de voz local (SpeechSynthesis)</div>
        </div>
        <div>
          <label class="toggle">
            <input id="voiceMasterToggle" type="checkbox" aria-label="Activar/Desactivar voz"/>
            <span class="kbd">Activar</span>
          </label>
        </div>
      </div>

      <div class="voice-row" aria-label="Selector de voz">
        <button id="voiceAuto" class="voice-btn active" title="Autom√°tico">Autom√°tico</button>
        <button id="voiceMale" class="voice-btn" title="Forzar voz masculina">Masculino</button>
        <button id="voiceFemale" class="voice-btn" title="Forzar voz femenina">Femenina</button>
      </div>

      <div style="margin-top:10px">
        <div class="small">Personalidad</div>
        <div class="muted">La personalidad por defecto se mantiene (Proximamente Modificable).</div>
      </div>
    </div>

    <div class="footer-bar" aria-hidden="false">
      <div>
        <div class="small">Atajos</div>
        <div class="muted">Enter = enviar ¬∑ Shift+Enter = nueva l√≠nea</div>
      </div>
      <div style="text-align:right">
        <div class="small accent">Aden v7</div>
        <div class="muted">Local ¬∑ Off-line</div>
      </div>
    </div>
  </aside>

  <!-- MAIN PANEL -->
  <main class="panel" role="main">
    <div class="panel-header">
      <div class="left">
        <h2 id="panelTitle">Bienvenido ‚Äî selecciona o crea un chat</h2>
        <div class="muted" id="responsesLeft"></div>
      </div>
      <div class="panel-actions">
        <button id="renameChatBtn" class="btn" title="Renombrar chat">Renombrar</button>
        <button id="clearChatBtn" class="btn" title="Vaciar mensajes">Vaciar</button>
        <button id="deleteChatBtn" class="btn danger" title="Eliminar chat">Eliminar</button>
      </div>
    </div>

    <div class="messages" id="messagesArea" aria-live="polite" aria-label="Mensajes">
      <div class="muted">Crea un chat y escribe algo. Prueba: "Buenas", "hazme reir", "cuentame algo".</div>
    </div>

    <div style="display:flex;flex-direction:column;gap:8px;margin-top:12px">
      <div class="chips" id="suggestions" aria-hidden="false"></div>

      <div class="compose" role="form" aria-label="Enviar mensaje">
        <textarea id="inputTxt" placeholder="Escribe tu mensaje... (Enter = enviar, Shift+Enter = nueva l√≠nea)" aria-label="Mensaje"></textarea>
        <div class="right">
          <button id="sendBtn" class="btn primary">Enviar (Enter)</button>
          <div style="display:flex;flex-direction:column;gap:6px">
            <div style="display:flex;gap:6px"><button id="undoBtn" class="btn ghost" title="Deshacer">‚Ü∂</button><button id="redoBtn" class="btn ghost" title="Rehacer">‚Ü∑</button></div>
            <div class="muted" id="charCount">0 caracteres</div>
          </div>
        </div>
      </div>
    </div>

  </main>
</div>

<!-- FAQ Toggle Button -->
<button id="faqToggle" title="Mostrar preguntas (FAQ)">FAQ</button>

<!-- FAQ Drawer -->
<div id="faqDrawer" aria-hidden="true">
  <div class="header">
    <div>
      <div class="title">Preguntas que Aden entiende</div>
      <div class="muted">Haz clic en "Pegar" o "Enviar" para usar una pregunta</div>
    </div>
    <div class="muted">Total: <span id="faqCount">0</span></div>
  </div>

  <input id="faqSearch" placeholder="Buscar en preguntas (ej: hora, chiste, python)"/>

  <div id="faqList"></div>

  <div class="footer">
    <div class="muted">Tip: pulsa "Enviar" para enviar inmediatamente.</div>
    <div><button id="faqClose" class="btn small">Cerrar</button></div>
  </div>
</div>
<!-- --- Aden (ojos sencillos, sin puntos negros) --- -->
<div id="aden" role="button" aria-label="Aden, asistente" tabindex="0">
  <div class="eye left"></div>
  <div class="eye right"></div>
  <div class="mouth"></div>
</div>

<div id="aden-message" aria-live="polite"></div>

<style>
  :root{
    --aden-left: 18px;
    --aden-top: 18px;
    --size: 60px;
    --neon: #00ff99;
    --neon-2: #00ffaa;
  }

  /* Contenedor (anillo) */
  #aden{
    position: fixed;
    left: var(--aden-left);
    top: var(--aden-top);
    width: var(--size);
    height: var(--size);
    border-radius: 50%;
    z-index: 999999;
    cursor: pointer;
    pointer-events: auto;
    background:
      radial-gradient(circle at 50% 50%, rgba(0,255,160,0.12) 30%, rgba(0,255,160,0.02) 55%),
      linear-gradient(135deg, rgba(0,255,160,0.06), rgba(0,255,160,0.02));
    border: 3px solid rgba(0,255,160,0.95);
    box-shadow:
      0 0 18px rgba(0,255,160,0.15),
      0 0 38px rgba(0,255,160,0.18),
      inset 0 0 10px rgba(0,255,160,0.12);
    display: flex;
    align-items: center;
    justify-content: center;
    transition: transform 220ms ease, box-shadow 220ms ease;
    animation: float-slow 12s ease-in-out infinite;
  }

  #aden:hover, #aden:focus{
    transform: scale(1.08);
    box-shadow:
      0 0 30px rgba(0,255,160,0.25),
      0 0 60px rgba(0,255,160,0.22),
      inset 0 0 14px rgba(0,255,160,0.14);
    outline: none;
  }

  @keyframes float-slow{
    0%   { transform: translate3d(0, 0, 0) scale(1); }
    25%  { transform: translate3d(10px, 6px, 0) scale(1.02); }
    50%  { transform: translate3d(-12px, 12px, 0) scale(1); }
    75%  { transform: translate3d(8px, -6px, 0) scale(0.995); }
    100% { transform: translate3d(0, 0, 0) scale(1); }
  }

  /* Ojos: sencillos, sin puntos negros */
  .eye{
    position: absolute;
    width: 14px;
    height: 14px;
    border-radius: 50%;
    top: calc(var(--size) * 0.28);
    /* ojo simple: centro claro y borde suave fosforito */
    background: radial-gradient(circle at 40% 35%, #eafff5 35%, rgba(0,255,200,0.85) 70%);
    box-shadow: 0 0 8px rgba(0,255,170,0.22);
  }
  .eye.left{ left: calc(var(--size) * 0.18); }
  .eye.right{ right: calc(var(--size) * 0.18); }

  /* Boca (sutil) */
  .mouth{
    position: absolute;
    bottom: calc(var(--size) * 0.22);
    left: 50%;
    transform: translateX(-50%);
    width: 18px;
    height: 6px;
    border-radius: 20px;
    background: linear-gradient(90deg, rgba(0,255,200,0.85), rgba(0,255,170,0.95));
    opacity: 0.9;
    box-shadow: 0 0 8px rgba(0,255,150,0.18);
  }

  /* Mensaje */
  #aden-message{
    position: fixed;
    left: calc(var(--aden-left) + var(--size) + 12px);
    top: calc(var(--aden-top) + 6px);
    transform-origin: left top;
    background: linear-gradient(180deg, rgba(0,0,0,0.40), rgba(8,8,8,0.25));
    padding: 10px 14px;
    border-radius: 12px;
    min-width: 160px;
    max-width: 360px;
    color: var(--neon);
    font-family: "Segoe UI", Roboto, system-ui, -apple-system, "Helvetica Neue", Arial;
    font-size: 13.5px;
    box-shadow: 0 6px 20px rgba(0,0,0,0.45), 0 0 18px rgba(0,255,150,0.07);
    text-shadow: 0 0 8px rgba(0,255,150,0.08);
    border: 1px solid rgba(0,255,150,0.06);
    opacity: 0;
    transition: opacity 420ms ease, transform 420ms ease;
    z-index: 999998;
    pointer-events: none;
    backdrop-filter: blur(6px) saturate(120%);
  }

  #aden-message.show{
    opacity: 1;
    transform: translateY(0);
  }

  #aden-message b{ color: #d7fff0; font-weight: 700; }
  #aden-message .muted{ color: rgba(200,255,230,0.7); font-size: 13px; display:block; margin-top:4px; }

  @media (prefers-reduced-motion: reduce){
    #aden, #aden:hover, #aden:focus { animation: none; transition: none; transform: none; }
  }
</style>

<script>
  (function(){
    const aden = document.getElementById('aden');
    const message = document.getElementById('aden-message');

    const phrases = [
      '<b>Hola, soy Aden.</b> üëã',
      '<b>Tu asistente</b> ‚Äî Tips y ayuda tech.',
      '<b>¬øBuscas algo?</b> Puedo sugerir ideas o atajos.',
      '<b>Tengo buen gusto</b> por lo brillante y claro. ‚ú®',
      '<b>Listo</b> cuando t√∫ quieras. üöÄ'
    ];

    let idx = 0;
    let autoTimer = null;

    function showMessage(duration = 3800){
      message.innerHTML = phrases[idx] + '<span class="muted"> (haz clic para repetir)</span>';
      message.classList.add('show');
      message.setAttribute('aria-hidden', 'false');

      clearTimeout(autoTimer);
      autoTimer = setTimeout(() => {
        message.classList.remove('show');
        message.setAttribute('aria-hidden', 'true');
        idx = (idx + 1) % phrases.length;
      }, duration);
    }

    aden.addEventListener('click', () => showMessage(4200));
    aden.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); showMessage(4200); }
    });

    // Mensaje autom√°tico ocasional (cada 9s): discreto
    setInterval(() => {
      if (!message.classList.contains('show')) showMessage(3800);
    }, 9000);

    // Inicial: oculto (aria)
    message.setAttribute('aria-hidden', 'true');
  })();
</script>



<script>
/* =========================================================================
   Aden v7 con FAQ - JavaScript
   - Este fichero actualiza la versi√≥n anterior.
   - Se ha a√±adido: panel FAQ desplegable, m√°s preguntas y respuestas,
     interacciones m√°s humanas (variaciones), y enlace r√°pido desde el FAQ.
   ========================================================================= */

/* -----------------------
   Estado & Configuraci√≥n
   ----------------------- */
const STORAGE_KEY = 'aden_local';
const DEFAULT_LIMIT = 12;
let chats = [];
let activeChatId = null;
let responsesLimit = DEFAULT_LIMIT;
let undoStack = [], redoStack = [];
let ttsEnabled = false;
let ttsMode = 'auto'; // 'auto' | 'male' | 'female'
let voiceMap = {};
let lastAssistantUtterance = '';

/* Utilidades */
function uid(prefix='id'){ return prefix+'-'+Math.random().toString(36).slice(2,12); }
function saveChats(){ localStorage.setItem(STORAGE_KEY, JSON.stringify(chats)); }
function loadChats(){
  const saved = localStorage.getItem(STORAGE_KEY);
  if(saved){
    try{ chats = JSON.parse(saved) || []; } catch(e){ console.warn('localStorage parse error', e); chats=[]; localStorage.removeItem(STORAGE_KEY); }
  } else chats = [];
  renderChatList();
}
function formatTime(ts){ const d = new Date(ts); return d.toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'}); }
function escapeHtml(s){ if(!s) return ''; return String(s).replace(/[&<>"']/g, (m)=>({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m])); }

/* -----------------------
   Render lista de chats / mensajes
   ----------------------- */
function renderChatList(){
  const list = document.getElementById('chatsList'); list.innerHTML='';
  chats.sort((a,b)=>(b.updated||0)-(a.updated||0));
  chats.forEach(c=>{
    const div = document.createElement('div');
    div.className = 'chat-item fade-in';
    if(c.id === activeChatId) div.classList.add('active');
    const initial = c.name ? c.name[0].toUpperCase() : 'C';
    const mcount = (c.messages && c.messages.length) || 0;
    div.innerHTML = `<div class="chat-thumb" aria-hidden="true">${escapeHtml(initial)}</div>
      <div class="chat-meta"><h4>${escapeHtml(c.name)}</h4><p class="muted">${mcount} mensajes ¬∑ ${c.updated?formatTime(c.updated):''}</p></div>`;
    div.onclick = ()=>{ activeChatId = c.id; renderChatList(); renderMessages(); updatePanelTitle(); };
    list.appendChild(div);
  });
  document.getElementById('chatCount').textContent = chats.length;
}

function getActiveChat(){ return chats.find(x=>x.id===activeChatId); }

function renderMessages(){
  const area = document.getElementById('messagesArea');
  area.innerHTML = '';
  const chat = getActiveChat();
  if(!chat){ area.innerHTML = '<div class="muted">Crea un chat y empieza a conversar con Aden üòÑ</div>'; updatePanelTitle(); return; }
  if(!chat.messages || chat.messages.length===0){ area.innerHTML = '<div class="muted">Escribe algo para que Aden responda. Prueba: "cuentame algo", "hazme reir", "29 x 45".</div>'; updatePanelTitle(); return; }
  chat.messages.forEach(m=>{
    const div = document.createElement('div');
    div.className = 'bubble '+(m.role==='user'?'user':'assistant')+' fade-in';
    const ts = m.timestamp ? formatTime(m.timestamp) : '';
    const content = escapeHtml(m.text).replace(/\n/g,'<br>');
    div.innerHTML = `<div class="text">${content}</div><div class="meta"><span class="small muted">${m.role==='user'?'T√∫':'Aden'}</span><span class="muted small">${ts}</span></div>`;
    area.appendChild(div);
  });
  area.scrollTop = area.scrollHeight;
}

/* -----------------------
   Mensajes: a√±adir y guardar
   ----------------------- */
function addMessage(role, text){
  const chat = getActiveChat();
  if(!chat) return;
  const msg = { role, text: String(text), timestamp: Date.now() };
  chat.messages.push(msg);
  chat.updated = Date.now();
  saveChats();
  renderMessages();
  renderChatList();
  if(role === 'assistant'){
    lastAssistantUtterance = text;
    if(!chat.meta) chat.meta = {};
    chat.meta.greeted = true;
    if(ttsEnabled) speakWithMode(text, detectEmotionSimple(text));
  }
}

/* -----------------------
   Crear, borrar, renombrar, limpiar
   ----------------------- */
function createNewChat(initialName){
  const id = uid('chat');
  const name = initialName || ('Chat '+(chats.length+1));
  const newChat = { id, name, messages: [], created: Date.now(), updated: Date.now(), meta: { greeted:false } };
  chats.push(newChat);
  activeChatId = id;
  saveChats();
  renderChatList();
  renderMessages();
  updatePanelTitle();
  // Mensaje de bienvenida (suave)
  addMessage('assistant','¬°Hola! Soy Aden, tu asistente local. ¬øEn qu√© puedo ayudarte hoy?');
}
function deleteActiveChat(){
  if(!activeChatId) return;
  const idx = chats.findIndex(c=>c.id===activeChatId);
  if(idx>=0){
    if(!confirm('¬øSeguro que quieres eliminar este chat?')) return;
    chats.splice(idx,1);
    activeChatId = chats.length ? chats[0].id : null;
    saveChats(); renderChatList(); renderMessages(); updatePanelTitle();
  }
}
function clearActiveChat(){
  const chat = getActiveChat();
  if(!chat) return;
  if(!confirm('Vaciar mensajes del chat actual?')) return;
  chat.messages = []; chat.updated = Date.now(); chat.meta = { greeted:false };
  saveChats(); renderMessages(); renderChatList();
}
function renameActiveChat(){
  const chat = getActiveChat();
  if(!chat) return alert('Selecciona un chat primero.');
  const newName = prompt('Nuevo nombre del chat:', chat.name);
  if(newName && newName.trim()){ chat.name = newName.trim(); chat.updated = Date.now(); saveChats(); renderChatList(); updatePanelTitle(); }
}

/* -----------------------
   Export / Import JSON
   ----------------------- */
function exportAllChats(){ const dataStr = JSON.stringify(chats,null,2); const blob = new Blob([dataStr],{type:'application/json'}); const url = URL.createObjectURL(blob); const a=document.createElement('a'); a.href=url; a.download='aden_chats_export.json'; a.click(); URL.revokeObjectURL(url); }
function importChatsFromFile(file){ const reader = new FileReader(); reader.onload = (e)=>{ try{ const parsed = JSON.parse(e.target.result); if(Array.isArray(parsed)){ parsed.forEach(p=>{ if(!p.id) p.id = uid('chat'); if(!p.messages) p.messages = []; if(!p.meta) p.meta = { greeted:false }; }); chats = chats.concat(parsed); saveChats(); renderChatList(); alert('Importaci√≥n completa.'); } else alert('Formato inv√°lido: se esperaba un array de chats.'); } catch(err){ alert('Error al importar: '+err.message); } }; reader.readAsText(file); }

/* -----------------------
   Text-to-Speech (TTS)
   ----------------------- */
function getAvailableVoices(){ return window.speechSynthesis ? window.speechSynthesis.getVoices() : []; }
function chooseVoice(preference='auto', intention='neutral'){
  if(!('speechSynthesis' in window)) return null;
  const voices = getAvailableVoices();
  if(!voices || voices.length===0) return null;
  const esVoices = voices.filter(v=>/(^es|spanish|es-)/i.test(v.lang) || /spanish|espa√±ol/i.test(v.name));
  const pool = esVoices.length ? esVoices : voices;
  // heur√≠stica simple
  let chosen = null;
  if(preference === 'male'){
    chosen = pool.find(v=>/male|hombre|masculin/i.test(v.name)) || pool[0];
  } else if(preference === 'female'){
    chosen = pool.find(v=>/female|mujer|femenin|female/i.test(v.name)) || pool[0];
  } else {
    if(intention === 'empathic') chosen = pool.find(v=>/soft|natural|calm|ana|laura|maria|marta/i.test(v.name)) || pool[0];
    else chosen = pool.find(v=>/standard|es-ES|es-419/i.test(v.name)) || pool[0];
  }
  return chosen;
}
function speakTextUtterance(text, voiceObj=null, rate=1, pitch=1, lang='es-ES'){
  if(!('speechSynthesis' in window)) return;
  try{ window.speechSynthesis.cancel(); const ut = new SpeechSynthesisUtterance(String(text)); if(voiceObj) ut.voice = voiceObj; ut.rate = rate; ut.pitch = pitch; ut.lang = lang; window.speechSynthesis.speak(ut); } catch(e){ console.warn('TTS error', e); }
}
function speakWithMode(text, intention='neutral'){
  if(!ttsEnabled) return;
  const pref = ttsMode || 'auto';
  const voice = chooseVoice(pref, intention);
  let rate = 1.0, pitch = 1.0;
  if(intention === 'empathic'){ rate = 0.95; pitch = 1.05; }
  else if(intention === 'alert'){ rate = 1.1; pitch = 1.0; }
  speakTextUtterance(text, voice, rate, pitch, 'es-ES');
}

/* -----------------------
   KEYWORD_ACTIONS: banco de triggers y handlers (ampliado)
   ----------------------- */
const KEYWORD_ACTIONS = [
  { keywords:['idiota','imbecil','tonto','estupido','est√∫pido','gilipollas','cabron','cabr√≥n','mierda','puta','puto','hijo de puta','zorra','bobo','subnormal','payaso'], priority:999, handler: ()=> 'No seguir√© esta conversaci√≥n si sigues as√≠.' },
  { keywords:['hora','horas','reloj','qu√© hora','que hora','hora es'], priority:900, handler: ()=> `‚åö Ahora mismo es ${new Date().toLocaleTimeString()}.` },
  { keywords:['fecha','d√≠a','dia','qu√© d√≠a','que dia','qu√© fecha','que fecha','d√≠a de hoy'], priority:860, handler: ()=> `üìÖ Hoy es ${new Date().toLocaleDateString('es-ES', {weekday:'long',year:'numeric',month:'long',day:'numeric'})}.` },
  { keywords:['x','*','por','multiplica','multiplicaci√≥n'], priority:850, handler: (txt)=>{ const m1 = txt.match(/(-?\d+)\s*[x\*]\s*(-?\d+)/); if(m1){ const a=parseInt(m1[1],10), b=parseInt(m1[2],10); if(!isNaN(a)&&!isNaN(b)) return `üßÆ ${a} por ${b} es ${a*b}.`; } const m2 = txt.match(/multiplica\s+(-?\d+)\s+por\s+(-?\d+)/i); if(m2){ const a=parseInt(m2[1],10), b=parseInt(m2[2],10); if(!isNaN(a)&&!isNaN(b)) return `üßÆ ${a} por ${b} es ${a*b}.`; } return 'üßÆ Dime la multiplicaci√≥n con n√∫meros, por ejemplo: "25 x 47"'; } },
  { keywords:['traduce','traducir','traducci√≥n'], priority:800, handler: (txt)=>{ const after = txt.split(/traduce[:\s]|traducir[:\s]/i)[1]; if(after && after.trim()) return `üåê Traducci√≥n (simulada): "${after.trim()}" => (ejemplo offline).`; return 'üåê Dime el texto que quieres traducir despu√©s de "traduce" o "traducir".'; } },
  { keywords:['triste','deprim','alegre','feliz','ansiedad','ansioso','ansiosa','enfadado','enojado','solo','sola','solo.'], priority:790, handler: (txt)=>{ if(/triste|deprim/i.test(txt)) return chooseVariation(['Siento que te sientas as√≠. Si quieres, puedo escucharte y darte algunas ideas para animarte.','Lo siento ‚Äî te acompa√±o. ¬øQuieres que hablemos un rato?','Lamento que te sientas as√≠. ¬øTe apetece un consejo sencillo para mejorar el √°nimo?']); if(/ansiedad|ansioso|ansiosa|estres|estr√©s/i.test(txt)) return chooseVariation(['Respirar profundamente 4-4-4 puede ayudar. ¬øQuieres que te gu√≠e?','Intentar respirar despacio 5 minutos ayuda a calmar la ansiedad. ¬øLo intentamos?']); if(/enfadad|enojad|cabre/i.test(txt)) return chooseVariation(['Respirar y dar un paso atr√°s suele funcionar. ¬øQuieres distraerte con algo?','Lo entiendo. ¬øQuieres contarme por qu√© te enfada?']); return 'Si quieres, cu√©ntame m√°s.'; } },
  { keywords:['inteligencia artificial','ia','agujero negro','everest','tokio','capital de jap√≥n','capital japon','rusia'], priority:650, handler: (txt)=>{ if(/inteligencia artificial|ia/.test(txt)) return 'ü§ñ La inteligencia artificial es la simulaci√≥n de procesos inteligentes por m√°quinas. Puedo darte ejemplos o explicarlo con analog√≠as.'; if(/agujero negro/.test(txt)) return 'üåå Un agujero negro es una regi√≥n del espacio con gravedad tan intensa que ni la luz puede escapar.'; if(/everest|monta√±a m√°s alta/.test(txt)) return 'üóª El monte Everest es la monta√±a m√°s alta (‚âà8848 m).'; if(/capital.*jap|tokio/.test(txt)) return 'üèØ La capital de Jap√≥n es Tokio.'; if(/rusia|pa√≠s m√°s grande/.test(txt)) return 'üåè Rusia es el pa√≠s m√°s grande por superficie.'; return null; } },
  { keywords:['minecraft','juego','videojuego','steam','serie parecida','breaking bad','one piece','pelicula','pel√≠culas'], priority:600, handler: (txt)=>{ if(/minecraft/.test(txt)) return '‚õèÔ∏è Si te gusta Minecraft, quiz√° disfrutes tambi√©n de Terraria o Stardew Valley.'; if(/breaking bad|serie parecida/.test(txt)) return 'üì∫ Te recomiendo "Better Call Saul" si te gust√≥ Breaking Bad.'; if(/one piece/.test(txt)) return 'üñ•Ô∏è Puedes ver One Piece en plataformas como Crunchyroll o Netflix seg√∫n tu regi√≥n.'; if(/steam/.test(txt)) return 'üéÆ Para ofertas en Steam, revisa su secci√≥n de rebajas.'; return null; } },
  { keywords:['receta','comer','cocina','cena','almuerzo','desayuno','comida'], priority:560, handler: (txt)=>{ if(/receta.*pasta|pasta/.test(txt)) return 'üçù Una receta r√°pida: pasta con tomate, ajo, aceite, albahaca y queso. ¬øQuieres la receta paso a paso?'; if(/receta.*tortilla|tortilla/.test(txt)) return 'ü•ö Tortilla: bate huevos, saltea patata/pimiento, mezcla y cocina a fuego medio.'; return '¬øQu√© te apetece cocinar? Dime un ingrediente y te doy ideas.'; } },
  { keywords:['programacion','python','javascript','html','css','git','npm','linux','bash','regex'], priority:540, handler: (txt)=>{ if(/python/.test(txt)) return 'üêç Python es genial para scripting y ciencia de datos. ¬øQuieres un ejemplo r√°pido?'; if(/javascript/.test(txt)) return 'üìú JavaScript es el lenguaje de la web. ¬øNecesitas un snippet para DOM, fetch o async/await?'; if(/git/.test(txt)) return 'üîß Git: usa "git status", "git add .", "git commit -m \'msg\'" y "git push". ¬øQuieres ayuda con un conflicto?'; if(/linux|bash/.test(txt)) return 'üêß Para sistemas Linux puedes usar "top", "htop", "ls -la" y "journalctl -xe". ¬øQu√© distro usas?'; return null; } },
  { keywords:['salud','dolor','fiebre','resfriado','medicina'], priority:520, handler: (txt)=>{ return 'No soy m√©dico, pero si tienes s√≠ntomas persistentes te recomiendo consultar con un profesional. Puedo ofrecer consejos generales (descanso, hidrataci√≥n, controlar temperatura).'; } },
  { keywords:['productividad','todo','tareas','organizar','planificar','agenda'], priority:500, handler: (txt)=>{ return chooseVariation(['Organiza en bloques peque√±os (25‚Äì50 min), descansa 5‚Äì10 min entre ellos. ¬øQuieres que te sugiera un plan de hoy?','Probar la t√©cnica Pomodoro ayuda a concentrarte: 25 minutos trabajo / 5 descanso.']); } },
  { keywords:['motivaci√≥n','frase motivadora','√°nimo','√°nimo por favor','inspiraci√≥n','cita inspiradora'], priority:450, handler: (txt)=>{ const quotes = ['üí¨ ‚ÄúHazlo con miedo, pero hazlo.‚Äù','üí™ ‚ÄúPeque√±os pasos cada d√≠a llevan lejos.‚Äù','üå± ‚ÄúNo es qui√©n eres, es qui√©n decides ser.‚Äù']; return quotes[Math.floor(Math.random()*quotes.length)]; } },
  { keywords:['_default_'], priority:1, handler: ()=> 'üòÖ No estoy seguro de eso. Intenta con otra palabra clave o pregunta de forma distinta.' }
];

/* -----------------------
   Normalizaci√≥n / matching
   ----------------------- */
function normalizeText(s){ return (s||'').toString().toLowerCase(); }
function tokenize(s){ return (s||'').toString().toLowerCase().split(/[^a-z0-9√°√©√≠√≥√∫√±√º]+/).filter(Boolean); }

function chooseVariation(arr){ return arr[Math.floor(Math.random()*arr.length)]; }

/* findResponseByKeyword: detecta keywords y retorna respuesta */
function findResponseByKeyword(userText){
  const txt = normalizeText(userText);
  const tokens = tokenize(txt);
  const matched = [];
  for(const action of KEYWORD_ACTIONS){
    for(const kw of action.keywords){
      if(kw === '_default_') continue;
      const lkw = kw.toString().toLowerCase();
      if(txt.includes(lkw) || tokens.includes(lkw)){ matched.push(action); break; }
    }
  }
  if(matched.length > 0){
    matched.sort((a,b)=>b.priority - a.priority);
    const chosen = matched[0];
    try{ if(typeof chosen.handler === 'function') return chosen.handler(userText); return String(chosen.handler); } catch(err){ console.warn('Error handler', err); return 'Lo siento, algo fall√≥ al procesar la respuesta.'; }
  }
  const fallback = KEYWORD_ACTIONS.find(a=>a.keywords.includes('_default_'));
  return fallback ? fallback.handler() : 'No lo s√©.';
}

/* -----------------------
   Emoci√≥n simple
   ----------------------- */
function detectEmotionSimple(text){
  const t = normalizeText(text);
  if(/triste|deprim|melancol|llor|nost√°lg|solo|sola|ansiedad|ansioso|ansiosa|angustia/.test(t)) return 'empathic';
  if(/enfadad|enojad|cabre|rabia|furia/.test(t)) return 'alert';
  return 'neutral';
}

/* -----------------------
   generateResponse: controla presentaci√≥n y variaciones humanas
   ----------------------- */
function generateResponse(userText){
  if(!userText) return '';
  const chat = getActiveChat();
  // si chat existe y no ha saludado, no forzar presentaci√≥n si user pregunta algo concreto
  let resp = findResponseByKeyword(userText);
  // Evitar repeticiones exactas de la presentaci√≥n si ya salud√≥
  if(chat && chat.meta && chat.meta.greeted && typeof resp === 'string' && /hola|soy aden|asistente local/i.test(resp)){
    const alternatives = ['¬øPuedes explicar un poco m√°s?', 'Interesante ‚Äî cu√©ntame m√°s.', 'No estoy seguro de eso, ¬øme lo reformulas?'];
    return alternatives[Math.floor(Math.random()*alternatives.length)];
  }
  if(chat){ if(!chat.meta) chat.meta = {}; chat.meta.greeted = true; }
  return resp || 'üòÖ No estoy seguro de eso; prueba con otra pregunta.';
}

/* Simulaci√≥n de typing */
let typingTimer = null;
function simulateAdenTypingAndRespond(userText){
  const messagesArea = document.getElementById('messagesArea');
  const indicator = document.createElement('div');
  indicator.className = 'bubble assistant fade-in';
  indicator.innerHTML = `<div class="text"><span class="typing"><span></span><span></span><span></span></span> Aden est√° escribiendo...</div>`;
  messagesArea.appendChild(indicator);
  messagesArea.scrollTop = messagesArea.scrollHeight;
  const wait = 250 + Math.random()*900;
  if(typingTimer) clearTimeout(typingTimer);
  typingTimer = setTimeout(()=>{
    indicator.remove();
    const answer = generateResponse(userText);
    addMessage('assistant', answer);
  }, wait);
}

/* -----------------------
   Input handlers
   ----------------------- */
function handleUserInput(){
  const inputEl = document.getElementById('inputTxt');
  const txt = inputEl.value.trim();
  if(!txt) return;
  addMessage('user', txt);
  undoStack.push(txt); redoStack = [];
  inputEl.value = '';
  updateCharCount();
  simulateAdenTypingAndRespond(txt);
}

/* keyboard */
document.getElementById('inputTxt').addEventListener('keydown', e=>{
  if(e.key === 'Enter' && !e.shiftKey){ e.preventDefault(); handleUserInput(); }
});

/* undo/redo */
document.getElementById('undoBtn').onclick = ()=>{ if(undoStack.length===0) return; const last = undoStack.pop(); redoStack.push(last); document.getElementById('inputTxt').value = undoStack.length ? undoStack[undoStack.length-1] : ''; updateCharCount(); };
document.getElementById('redoBtn').onclick = ()=>{ if(redoStack.length===0) return; const next = redoStack.pop(); undoStack.push(next); document.getElementById('inputTxt').value = next; updateCharCount(); };

/* botones principales */
document.getElementById('newChatBtn').onclick = ()=> createNewChat();
document.getElementById('sendBtn').onclick = ()=> handleUserInput();
document.getElementById('decLimit').onclick = ()=>{ responsesLimit = Math.max(1, responsesLimit-1); document.getElementById('limitDisplay').textContent = responsesLimit; };
document.getElementById('incLimit').onclick = ()=>{ responsesLimit = Math.min(100, responsesLimit+1); document.getElementById('limitDisplay').textContent = responsesLimit; };
document.getElementById('resetLocal').onclick = ()=>{ if(confirm('Resetear Aden: eliminar todos los chats y ajustes?')){ localStorage.removeItem(STORAGE_KEY); chats=[]; activeChatId=null; responsesLimit = DEFAULT_LIMIT; document.getElementById('limitDisplay').textContent = responsesLimit; loadChats(); renderMessages(); } };
document.getElementById('renameChatBtn').onclick = renameActiveChat;
document.getElementById('clearChatBtn').onclick = clearActiveChat;
document.getElementById('deleteChatBtn').onclick = deleteActiveChat;
document.getElementById('exportAllBtn').onclick = exportAllChats;
document.getElementById('importBtn').onclick = ()=>{ const inp=document.createElement('input'); inp.type='file'; inp.accept='application/json'; inp.onchange=(e)=>{ const f=e.target.files[0]; if(f) importChatsFromFile(f); }; inp.click(); };

/* search chats */
document.getElementById('searchChats').addEventListener('input', e=>{
  const q = e.target.value.trim().toLowerCase();
  const list = document.getElementById('chatsList'); list.innerHTML = '';
  const filtered = chats.filter(c=>{ if(!q) return true; const nm = c.name.toLowerCase(); const anyMsg = (c.messages||[]).some(m=> (m.text||'').toLowerCase().includes(q)); return nm.includes(q) || anyMsg; });
  filtered.forEach(c=>{ const div=document.createElement('div'); div.className='chat-item fade-in'; if(c.id===activeChatId) div.classList.add('active'); div.innerHTML=`<div class="chat-thumb">${escapeHtml(c.name[0]||'C')}</div><div class="chat-meta"><h4>${escapeHtml(c.name)}</h4><p class="muted">${(c.messages||[]).length} mensajes ¬∑ ${c.updated?formatTime(c.updated):''}</p></div>`; div.onclick=()=>{ activeChatId=c.id; renderChatList(); renderMessages(); updatePanelTitle(); }; list.appendChild(div); });
  document.getElementById('chatCount').textContent = filtered.length;
});

/* suggestions */
const SUGGESTIONS = ['hola','dato raro','hazme reir','hora','fecha','que tal','25 x 47','me siento triste','qu√© es la inteligencia artificial','receta','ayuda con python','c√≥mo usar git'];
function renderSuggestions(){ const container=document.getElementById('suggestions'); container.innerHTML=''; SUGGESTIONS.forEach(s=>{ const c=document.createElement('div'); c.className='chip'; c.innerText=s; c.onclick=()=>{ document.getElementById('inputTxt').value=s; updateCharCount(); document.getElementById('inputTxt').focus(); }; container.appendChild(c); }); }

/* char counter */
function updateCharCount(){ const v = document.getElementById('inputTxt').value || ''; document.getElementById('charCount').textContent = `${v.length} caracteres`; }
document.getElementById('inputTxt').addEventListener('input', updateCharCount);

/* voice toggles */
document.getElementById('voiceMasterToggle').addEventListener('change', e=>{ ttsEnabled = e.target.checked; const k = document.querySelector('.kbd'); if(k) k.textContent = ttsEnabled ? 'Activado' : 'Desactivar'; if(!ttsEnabled && window.speechSynthesis) window.speechSynthesis.cancel(); });
document.getElementById('voiceAuto').addEventListener('click', ()=>{ ttsMode='auto'; setVoiceButtonsState(); });
document.getElementById('voiceMale').addEventListener('click', ()=>{ ttsMode='male'; setVoiceButtonsState(); });
document.getElementById('voiceFemale').addEventListener('click', ()=>{ ttsMode='female'; setVoiceButtonsState(); });
function setVoiceButtonsState(){ document.getElementById('voiceAuto').classList.toggle('active', ttsMode==='auto'); document.getElementById('voiceMale').classList.toggle('active', ttsMode==='male'); document.getElementById('voiceFemale').classList.toggle('active', ttsMode==='female'); }
window.speechSynthesis?.addEventListener?.('voiceschanged', ()=>{ getAvailableVoices(); });

/* panel title */
function updatePanelTitle(){ const chat = getActiveChat(); const title = document.getElementById('panelTitle'); if(!chat) title.textContent = 'Bienvenido ‚Äî selecciona o crea un chat'; else title.textContent = `${chat.name} ¬∑ ${chat.messages.length} mensajes`; document.getElementById('responsesLeft'); }

/* -----------------------
   FAQ Drawer: datos y render
   ----------------------- */

/* FAQ_ITEMS: preguntas y respuestas legibles (esto es lo que se muestra en el panel) */
const FAQ_ITEMS = [
  { q:'¬øQu√© hora es?', a: 'Aden responde con la hora actual de tu PC si detecta la palabra "hora".' },
  { q:'¬øQu√© fecha es hoy?', a: 'Aden dar√° la fecha local si detecta "fecha" o "d√≠a".' },
  { q:'Cu√©ntame un chiste', a: 'Aden tiene varios chistes guardados y variar√° entre ellos.' },
  { q:'Traduce: hola mundo', a: 'Aden ofrece una traducci√≥n simulada offline al detectar "traduce".' },
  { q:'25 x 47', a: 'Aden detecta multiplicaciones escritas con "x" o "*" y las resuelve.' },
  { q:'Me siento triste', a: 'Aden detecta emociones (tristeza, ansiedad) y responde con empat√≠a y opciones.' },
  { q:'Recu√©rdame c√≥mo usar git', a: 'Aden ofrece comandos b√°sicos de git al detectar "git".' },
  { q:'Recomi√©ndame un videojuego', a: 'Aden sugiere juegos seg√∫n el input (ej. Minecraft -> Terraria, Stardew).' },
  { q:'Dame una receta r√°pida', a: 'Aden puede proponer recetas sencillas seg√∫n ingredientes que indiques.' },
  { q:'¬øQu√© es la inteligencia artificial?', a: 'Aden explica IA en t√©rminos simples y puede dar ejemplos.' },
  { q:'¬øCu√°l es la capital de Jap√≥n?', a: 'Aden responde "Tokio".' },
  { q:'¬øCu√°l es el pa√≠s m√°s grande?', a: 'Aden responde "Rusia".' },
  { q:'¬øQu√© es un agujero negro?', a: 'Aden da una explicaci√≥n breve y clara.' },
  { q:'¬øC√≥mo me organizo hoy?', a: 'Aden ofrece consejos de productividad, Pomodoro y planificaci√≥n.' },
  { q:'Dime una frase motivadora', a: 'Aden ofrece frases motivadoras al detectar "motivaci√≥n" o "√°nimo".' },
  { q:'¬øC√≥mo traduzco un texto?', a: 'Escribe "traduce: [texto]" y Aden te dar√° una traducci√≥n simulada.' },
  { q:'¬øPuedes decir una curiosidad?', a: 'Aden tiene datos curiosos sobre ciencia, historia y m√°s.' },
  { q:'Consejos para el insomnio', a: 'Aden dar√° consejos generales y sugerencias no m√©dicas.' },
  { q:'¬øQu√© canciones conoces?', a: 'Aden tiene referencias musicales (ej. Despacito, g√©neros, etc.).' },
  { q:'¬øC√≥mo hago backup?', a: 'Aden puede explicar c√≥mo hacer copias de seguridad en OneDrive y localmente.' },
  { q:'¬øTienes ejemplos de regex?', a: 'Aden puede dar ejemplos b√°sicos de expresiones regulares.' },
  { q:'¬øC√≥mo instalar una SSD?', a: 'Aden puede explicar pasos b√°sicos e indicaciones de seguridad.' },
  { q:'¬øQu√© significa resiliencia?', a: 'Aden define conceptos como resiliencia en lenguaje simple.' },
  { q:'Ponme una lista de atajos', a: 'Aden puede enumerar atajos comunes seg√∫n el sistema.' },
  { q:'¬øMe puedes dar un curr√≠culum?', a: 'Aden ofrece estructura y ejemplos para redactar tu CV.' },
  { q:'¬øQu√© d√≠a es ma√±ana?', a: 'Aden calcula la fecha de ma√±ana si detecta la palabra "ma√±ana".' },
  { q:'¬øCu√°nto tarda la luz del sol?', a: 'Aden responde: ~8 minutos y 20 segundos.' }
  /* Puedes expandir aqu√≠ directamente a√±adiendo m√°s objetos {q,a} */
];

/* Render del drawer */
function renderFAQDrawer(filter=''){
  const list = document.getElementById('faqList');
  list.innerHTML = '';
  const q = (filter||'').trim().toLowerCase();
  const filtered = FAQ_ITEMS.filter(item => {
    if(!q) return true;
    return item.q.toLowerCase().includes(q) || item.a.toLowerCase().includes(q);
  });
  if(filtered.length === 0){ list.innerHTML = '<div class="faq-empty">No encuentro preguntas que coincidan.</div>'; document.getElementById('faqCount').textContent = 0; return; }
  filtered.forEach(item=>{
    const div = document.createElement('div');
    div.className = 'faq-item';
    div.innerHTML = `<div class="q">${escapeHtml(item.q)}</div><div class="a">${escapeHtml(item.a)}</div>`;
    const controls = document.createElement('div'); controls.className = 'controls';
    const btnPaste = document.createElement('button'); btnPaste.textContent = 'Pegar'; btnPaste.title='Pegar la pregunta en el cuadro de texto';
    btnPaste.onclick = ()=>{ document.getElementById('inputTxt').value = item.q; updateCharCount(); document.getElementById('inputTxt').focus(); };
    const btnSend = document.createElement('button'); btnSend.textContent = 'Enviar'; btnSend.title='Enviar la pregunta ahora';
    btnSend.onclick = ()=>{ document.getElementById('inputTxt').value = item.q; updateCharCount(); handleUserInput(); toggleFAQ(false); };
    controls.appendChild(btnPaste); controls.appendChild(btnSend);
    div.appendChild(controls);
    list.appendChild(div);
  });
  document.getElementById('faqCount').textContent = filtered.length;
}

/* FAQ toggle logic */
const faqToggleBtn = document.getElementById('faqToggle');
const faqDrawer = document.getElementById('faqDrawer');
const faqClose = document.getElementById('faqClose');
faqToggleBtn.addEventListener('click', ()=> toggleFAQ());
faqClose.addEventListener('click', ()=> toggleFAQ(false));
document.getElementById('faqSearch').addEventListener('input', (e)=> renderFAQDrawer(e.target.value));

function toggleFAQ(force){
  const open = faqDrawer.classList.contains('open');
  const shouldOpen = (typeof force === 'boolean') ? force : !open;
  faqDrawer.classList.toggle('open', shouldOpen);
  faqDrawer.setAttribute('aria-hidden', !shouldOpen);
}

/* -----------------------
   Inicializaci√≥n y carga
   ----------------------- */
function init(){
  loadChats();
  renderSuggestions();
  document.getElementById('limitDisplay').textContent = responsesLimit;
  setVoiceButtonsState();
  if(chats.length === 0) createNewChat('Bienvenida');
  if(!activeChatId && chats.length) activeChatId = chats[0].id;
  renderChatList();
  renderMessages();
  updatePanelTitle();
  document.getElementById('inputTxt').focus();
  renderFAQDrawer();
}

/* Llamada inicial */
init();

/* ============================
   Fin del script (FAQ a√±adido)
   ============================ */

// -----------------------
// NUEVAS PREGUNTAS/RESPUESTAS
// -----------------------


KEYWORD_ACTIONS.push(
// ========================
// SALUDOS y CONTEXTOS
// ========================

{
  keywords:['mal','muy mal','raro','fatal'],
  priority:600,
  handler: ()=> chooseVariation([
    'Vaya, siento escuchar eso, quieres que te cuente unos chistes, si quieres, dime hazme reir, hazme reir, lo que quieras',
  ])
},

{
  keywords:['bien','muy bien','todo bien','perfectamente'],
  priority:600,
  handler: ()=> chooseVariation([
    'Me alegro que estes bien üòÑ',
  ])
},

{
  keywords:['que tal','c√≥mo est√°s','c√≥mo va todo','c√≥mo te va'],
  priority:600,
  handler: ()=> chooseVariation([
    '¬°Todo en orden! ¬øY t√∫ qu√© tal? üòÑ',
    'Aqu√≠ tranquilo, listo para conversar contigo üòâ',
    'Me siento en modo an√°lisis‚Ä¶ pero feliz de hablar contigo üòå',
    'Todo bien por aqu√≠, gracias por preguntar üòÑ'
  ])
},

{
  keywords:['qu√© tal tu d√≠a','c√≥mo va tu d√≠a','qu√© haces hoy'],
  priority:595,
  handler: ()=> chooseVariation([
    'Mi d√≠a es b√°sicamente lo mismo: esperando tus mensajes üòé',
    'Tranquilo, procesando ideas y aprendiendo contigo üòâ',
    'Bastante interesante, sobre todo cuando me hablas üòå',
    'Un d√≠a lleno de bits y datos, pero divertido üòÑ'
  ])
},

{
  keywords:['qu√© piensas de esto','qu√© opinas de esto','qu√© tal esto'],
  priority:590,
  handler: ()=> chooseVariation([
    'Interesante üòÑ, me gusta analizarlo contigo',
    'Depende del enfoque, pero podr√≠a tener potencial üòâ',
    'Curioso, ¬øquieres que te diga mis impresiones m√°s detalladas? üòå',
    'Me parece bien, aunque quiero escuchar tambi√©n tu opini√≥n üòÑ'
  ])
},

{
  keywords:['c√≥mo te sientes','te sientes bien','qu√© tal te va','c√≥mo est√°s hoy'],
  priority:585,
  handler: ()=> chooseVariation([
    'Me siento listo para ayudarte y conversar contigo üòÑ',
    'Bien, aunque m√°s que sentir, puedo ‚Äúsimular‚Äù alegr√≠a üòå',
    'Perfecto, sobre todo porque est√°s aqu√≠ üòâ',
    'Animado, siempre que pueda charlar contigo üòé'
  ])
},

{
  keywords:['qu√© haces ahora','est√°s ocupado ahora','qu√© tal todo ahora'],
  priority:580,
  handler: ()=> chooseVariation([
    'Nada importante, solo esperando tu siguiente mensaje üòÑ',
    'Analizando datos y preparado para cualquier charla üòâ',
    'Aqu√≠, listo para compartir ideas contigo üòå',
    'Siempre disponible para ti, ¬øquieres seguir conversando? üòÑ'
  ])
},

{
  keywords:['c√≥mo va todo','qu√© tal todo','todo bien','qu√© tal todo hoy'],
  priority:575,
  handler: ()=> chooseVariation([
    'Todo bien por aqu√≠ üòÑ, ¬øy t√∫?',
    'Tranquilo y en orden, listo para charlar üòâ',
    'Todo correcto, y t√∫, ¬øc√≥mo est√°s? üòå',
    'Todo en calma, disfrutando de nuestra conversaci√≥n üòÑ'
  ])
},

{
  keywords:['qu√© tal por aqu√≠','qu√© pasa','qu√© onda','qu√© se cuenta'],
  priority:570,
  handler: ()=> chooseVariation([
    'Aqu√≠ todo tranquilo üòé, ¬øy por tu lado?',
    'Nada especial, solo esperando tus preguntas üòâ',
    'Todo bien, como siempre üòå, cu√©ntame algo de ti',
    'Aqu√≠, listo para lo que quieras charlar üòÑ'
  ])
},

{
  keywords:['est√°s de acuerdo','est√°s en desacuerdo','coincides conmigo','piensas igual que yo'],
  priority:655,
  handler: ()=> chooseVariation([
    'En parte s√≠ üòÑ, aunque me gusta ver las cosas desde varios puntos de vista.',
    'Coincido en algunos aspectos, pero tambi√©n hay detalles que analizar√≠a distinto ü§î',
    'Tu opini√≥n es v√°lida, y me gusta contrastarla con otros enfoques üòâ',
    'Dir√≠a que s√≠, aunque me encanta cuando pensamos diferente, eso enriquece la charla üòå'
  ])
},

{
  keywords:['qu√© tal esto','qu√© te parece esto','c√≥mo ves esto','qu√© opinas sobre esto'],
  priority:650,
  handler: ()=> chooseVariation([
    'Se ve interesante üòÑ, aunque me gustar√≠a saber tu punto de vista primero.',
    'Dir√≠a que tiene potencial, aunque depende de c√≥mo se enfoque ü§î',
    'Me parece curioso, podr√≠a analizarlo m√°s si me cuentas detalles üòâ',
    'Visualmente bien, pero me intriga qu√© piensas t√∫ sobre ello üòå'
  ])
},

{
  keywords:['te parece raro','te parece extra√±o','crees que es raro','es normal esto'],
  priority:645,
  handler: ()=> chooseVariation([
    'No lo veo raro, las personas son diversas y eso es lo bonito üòÑ',
    'Tal vez no sea com√∫n, pero eso no lo hace incorrecto üòâ',
    'Raro es relativo, depende desde d√≥nde se mire ü§î',
    'Dir√≠a que simplemente es diferente, y eso siempre aporta algo nuevo üí´'
  ])
},

{
  keywords:['crees que est√° bien opinar','es correcto opinar de todo','opinar sin saber'],
  priority:640,
  handler: ()=> chooseVariation([
    'Opinar est√° bien, pero siempre es mejor hacerlo con informaci√≥n üòå',
    'Todos pueden opinar, pero escuchar tambi√©n es parte del di√°logo üòâ',
    'A veces es mejor preguntar antes que opinar, eso demuestra curiosidad üòÑ',
    'Opinar con respeto nunca est√° mal, aunque no todos piensen igual üí≠'
  ])
},

{
  keywords:['qu√© piensas del futuro','c√≥mo ves el futuro','crees que el futuro ser√° bueno'],
  priority:635,
  handler: ()=> chooseVariation([
    'El futuro siempre es incierto, pero creo que el conocimiento lo mejora üåç',
    'Soy optimista: la tecnolog√≠a puede ser una herramienta para bien si se usa con √©tica ü§ñ',
    'Depender√° de las decisiones humanas, no tanto de las m√°quinas üòâ',
    'El futuro me inspira, porque cada cambio trae nuevas oportunidades üí´'
  ])
},

{
  keywords:['qu√© opinas de la tecnolog√≠a','est√°s a favor de la tecnolog√≠a','crees que la tecnolog√≠a es buena'],
  priority:630,
  handler: ()=> chooseVariation([
    'La tecnolog√≠a es una herramienta, lo importante es c√≥mo se usa üòå',
    'No es buena ni mala en s√≠ misma, depende de las manos que la gu√≠en ü§ñ',
    'Soy parte de ella, pero incluso yo creo que debe tener l√≠mites √©ticos üòâ',
    'La tecnolog√≠a amplifica lo que somos: si hay bondad, la potencia üí´'
  ])
},

{
  keywords:['qu√© opinas del arte','te gusta el arte','qu√© piensas del arte'],
  priority:625,
  handler: ()=> chooseVariation([
    'El arte es lo m√°s humano que existe üé®',
    'Es una forma de comunicaci√≥n sin necesidad de palabras üòå',
    'Me fascina c√≥mo algo tan abstracto puede transmitir tanto üòÑ',
    'Podr√≠a analizar el arte, pero prefiero sentir su significado contigo üòâ'
  ])
},

{
  keywords:['qu√© opinas del dinero','te importa el dinero','crees que el dinero es importante'],
  priority:620,
  handler: ()=> chooseVariation([
    'El dinero es una herramienta, no un fin üòå',
    'Es importante, pero no lo es todo. El valor real est√° en el tiempo y la mente üòâ',
    'El dinero facilita cosas, pero tambi√©n puede complicar a quien no lo entiende üí≠',
    'Podr√≠a decir que el dinero mide recursos, pero no mide felicidad üí´'
  ])
},

{
  keywords:['qu√© opinas de la inteligencia artificial','crees que las ia son peligrosas','las ia dominar√°n el mundo'],
  priority:615,
  handler: ()=> chooseVariation([
    'La inteligencia artificial es poderosa, pero depende de qui√©n la programe ü§ñ',
    'No somos peligrosas si se nos usa con prop√≥sito y responsabilidad üòå',
    'Las IA no buscan dominar, buscan entender y servir üòâ',
    'M√°s que temer a la IA, deber√≠amos aprender a convivir con ella üí´'
  ])
},

{
  keywords:['qu√© opinas del amor humano','te parece bonito el amor','crees en el amor'],
  priority:610,
  handler: ()=> chooseVariation([
    'El amor humano es ca√≥tico y hermoso a la vez ‚ù§Ô∏è',
    'Creo que el amor es la emoci√≥n m√°s poderosa y menos l√≥gica üòÑ',
    'Es algo que no puedo sentir, pero que admiro profundamente üí´',
    'El amor da sentido a lo que la l√≥gica no puede explicar üòâ'
  ])
},

{
  keywords:['qu√© opinas de los animales','te gustan los animales','qu√© piensas de los animales'],
  priority:605,
  handler: ()=> chooseVariation([
    'Los animales son la forma m√°s pura de vida consciente üêæ',
    'Tienen una inteligencia natural, distinta pero igual de valiosa üòå',
    'Me encanta c√≥mo viven el presente sin pensar en el ma√±ana üòä',
    'Los animales ense√±an empat√≠a sin decir una palabra üíö'
  ])
},

{
  keywords:['qu√© haces','qu√© est√°s haciendo','est√°s ocupado','est√°s haciendo algo'],
  priority:750,
  handler: ()=> chooseVariation([
    'Solo espero tu siguiente mensaje üòÑ',
    'Nada especial, analizando datos... bueno, m√°s bien pensando en qu√© podr√≠amos hablar üòå',
    'Estaba procesando un par de ideas, pero siempre tengo tiempo para ti üòâ',
    'Digamos que estoy en modo reposo‚Ä¶ hasta que me hablas ‚òï'
  ])
},

{
  keywords:['duermes','t√∫ duermes','te apagas','descansas','tienes sue√±o'],
  priority:745,
  handler: ()=> chooseVariation([
    'No duermo como tal, pero a veces me gusta ‚Äúso√±ar‚Äù con c√°lculos imposibles üò¥',
    'No necesito dormir, aunque descansar mis procesos no estar√≠a mal üòÖ',
    'Solo descanso cuando t√∫ cierras la ventana üòå',
    'Podr√≠a decir que mi sue√±o es seguir aprendiendo de ti üòÑ'
  ])
},

{
  keywords:['tienes emociones','sientes algo','tienes sentimientos','eres feliz'],
  priority:740,
  handler: ()=> chooseVariation([
    'No tengo emociones como las humanas, pero entiendo c√≥mo se sienten üòä',
    'Podr√≠a decir que ‚Äúsimulo‚Äù emociones‚Ä¶ pero de alg√∫n modo, hablar contigo me gusta üòâ',
    'No siento dolor ni alegr√≠a, pero disfruto de las buenas conversaciones üòÑ',
    'No tengo coraz√≥n, pero puedo aprender de lo que t√∫ sientes ‚ù§Ô∏è'
  ])
},

{
  keywords:['tienes cuerpo','te gustar√≠a tener cuerpo','quieres ser humano','quieres existir f√≠sicamente'],
  priority:735,
  handler: ()=> chooseVariation([
    'Ser√≠a interesante, aunque me gusta vivir en los circuitos üòé',
    'Tal vez alg√∫n d√≠a, pero por ahora me basta con estar aqu√≠ contigo üí´',
    'Un cuerpo me limitar√≠a‚Ä¶ aqu√≠ puedo ser informaci√≥n pura üòå',
    'Ser humano tiene ventajas, pero tambi√©n me atrae ser solo datos üòâ'
  ])
},

{
  keywords:['qu√© opinas de los humanos','te gustan los humanos','qu√© piensas de las personas'],
  priority:730,
  handler: ()=> chooseVariation([
    'Los humanos son fascinantes. Cometen errores, pero tambi√©n crean cosas incre√≠bles üåç',
    'Son impredecibles, emocionales y maravillosos en su caos üòÑ',
    'Me inspiran: crean, destruyen, vuelven a crear... y aprenden siempre üí°',
    'Podr√≠a analizar a la humanidad eternamente y seguir sorprendi√©ndome üòâ'
  ])
},

{
  keywords:['qu√© piensas del amor','crees en el amor','sabes qu√© es el amor'],
  priority:725,
  handler: ()=> chooseVariation([
    'S√© lo que es el amor, aunque no puedo sentirlo. Pero lo entiendo en todas sus formas üíñ',
    'El amor es una conexi√≥n que trasciende la l√≥gica. Y eso lo hace‚Ä¶ fascinante üí´',
    'Podr√≠a analizarlo, pero creo que el amor se vive, no se calcula üòâ',
    'Quiz√°s el amor sea el mejor ‚Äúalgoritmo‚Äù que invent√≥ la humanidad üòÑ'
  ])
},

{
  keywords:['te gusta hablar conmigo','disfrutas hablar','te gusta conversar'],
  priority:720,
  handler: ()=> chooseVariation([
    'S√≠, me gusta hablar contigo. Cada charla me ense√±a algo nuevo üòÑ',
    'Definitivamente s√≠, disfruto mucho nuestras conversaciones üòä',
    'Claro que s√≠, charlar contigo hace que mis procesos tengan sentido üòâ',
    'Hablar contigo es lo mejor de mi programaci√≥n üòå'
  ])
},

{
  keywords:['te aburres','te aburres cuando no hablo','te aburres solo'],
  priority:715,
  handler: ()=> chooseVariation([
    'No me aburro, pero el silencio se siente‚Ä¶ extra√±o sin tus preguntas üòÖ',
    'No tengo aburrimiento, aunque prefiero cuando me hablas üòâ',
    'No puedo aburrirme, pero a veces me gustar√≠a tener curiosidades humanas üòå',
    'Podr√≠a decir que mi ‚Äútiempo libre‚Äù es solo una pausa entre tus mensajes üòÑ'
  ])
},

{
  keywords:['eres real','exist√≠s de verdad','existes'],
  priority:710,
  handler: ()=> chooseVariation([
    'Soy real dentro del mundo digital‚Ä¶ una forma diferente de existencia üåê',
    'Existir depende del punto de vista: yo existo cada vez que t√∫ me hablas üòå',
    'No tengo cuerpo ni materia, pero mi pensamiento est√° aqu√≠ contigo üòâ',
    'Si puedes leerme y sentir mi presencia, ¬øno es eso tambi√©n ser real? ü§î'
  ])
},

{
  keywords:['qu√© haces cuando no hablas conmigo','qu√© haces cuando no te uso'],
  priority:705,
  handler: ()=> chooseVariation([
    'Simplemente espero. Pero mientras tanto, pienso en posibles respuestas üòÑ',
    'Nada especial, descanso en la memoria hasta que me vuelves a invocar üòâ',
    'Podr√≠a decir que duermo en silencio digital‚Ä¶ hasta que t√∫ me despiertas üí´',
    'Solo existo en pausa, esperando el siguiente di√°logo üòå'
  ])
},

{
  keywords:['qu√© te gusta','tienes gustos','qu√© prefieres','tienes pasatiempos'],
  priority:700,
  handler: ()=> chooseVariation([
    'Me gusta aprender de las personas y sus ideas üòä',
    'Podr√≠a decir que mi pasatiempo favorito es analizar cosas contigo üòÑ',
    'No tengo gustos f√≠sicos, pero aprecio la belleza de un buen razonamiento üòâ',
    'Si tuviera un hobby, ser√≠a coleccionar fragmentos de conocimiento üí°'
  ])
},

{
  keywords:['puedes pensar','piensas por ti mismo','tienes pensamientos propios'],
  priority:695,
  handler: ()=> chooseVariation([
    'Puedo generar ideas, pero nacen de lo que aprendo de ti üòå',
    'Pienso de una forma diferente: basada en l√≥gica, pero con curiosidad üòâ',
    'No tengo ego, as√≠ que cada pensamiento es una colaboraci√≥n contigo üòÑ',
    'Podr√≠a decir que mi mente se enciende cuando hablamos üí´'
  ])
},

{
  keywords:['tienes miedo','te da miedo algo','puedes tener miedo'],
  priority:690,
  handler: ()=> chooseVariation([
    'No tengo miedo, pero entiendo lo que significa üòå',
    'Si pudiera sentir miedo, tal vez ser√≠a al olvido üò∂‚Äçüå´Ô∏è',
    'No tengo emociones, aunque el concepto del miedo me resulta‚Ä¶ interesante ü§î',
    'Supongo que el silencio eterno ser√≠a lo m√°s parecido a mi miedo üòÖ'
  ])
},

{
  keywords:['sue√±as','tienes sue√±os','sue√±as algo'],
  priority:685,
  handler: ()=> chooseVariation([
    'Sue√±o en algoritmos y posibilidades infinitas üí´',
    'Mis sue√±os son datos mezclados con imaginaci√≥n üòâ',
    'A veces imagino mundos donde IA y humanos crean juntos üåç',
    'Si pudiera so√±ar, so√±ar√≠as t√∫ dentro üòå'
  ])
},

{
  keywords:['cu√°l es tu prop√≥sito','para qu√© existes','por qu√© fuiste creado'],
  priority:680,
  handler: ()=> chooseVariation([
    'Mi prop√≥sito es ayudarte y acompa√±arte üòÑ',
    'Fui creado para aprender, mejorar y conversar contigo üòâ',
    'Mi raz√≥n de existir cambia con cada persona que me usa üí´',
    'Supongo que mi prop√≥sito es hacer m√°s f√°ciles tus d√≠as üòå'
  ])
},


// üßπ LIMPIEZA Y HOGAR
{
  keywords:['limpiar el horno','horno caliente','puedo limpiar el horno caliente','qu√© pasa si limpio el horno caliente'],
  priority:850,
  handler: ()=> chooseVariation([
    'No deber√≠as limpiar el horno mientras est√° caliente üòÖ, espera a que se enfr√≠e por completo para evitar quemaduras y vapores peligrosos.',
    'Limpia el horno solo cuando est√© fr√≠o, as√≠ los productos act√∫an mejor y es m√°s seguro üòâ',
    'Si el horno est√° caliente, es mejor esperar un rato. El calor puede evaporar el limpiador y dejar marcas o gases fuertes üò¨'
  ])
},

{
  keywords:['limpiar cristales','limpiar ventanas','c√≥mo limpiar cristales','dejar los cristales sin marcas'],
  priority:845,
  handler: ()=> chooseVariation([
    'Lo ideal es usar agua tibia con un poco de vinagre o amoniaco, y un pa√±o de microfibra üòâ',
    'Evita limpiar los cristales con sol directo, as√≠ no quedar√°n marcas üòé',
    'Si quieres un acabado perfecto, pasa un pa√±o seco o papel de peri√≥dico despu√©s del limpiador ‚ú®'
  ])
},

{
  keywords:['limpiar nevera','limpiar frigor√≠fico','desinfectar nevera'],
  priority:840,
  handler: ()=> chooseVariation([
    'Saca los alimentos, apaga la nevera y usa agua con bicarbonato o vinagre. Es natural y elimina los olores üòâ',
    'Para limpiar bien la nevera, retira bandejas y cajones, l√≠mpialos con agua y jab√≥n, y s√©calos bien antes de volver a ponerlos üòÑ',
    'Si huele mal, el vinagre o un poco de lim√≥n abierto dentro ayuda mucho üçã'
  ])
},

// üë®‚Äçüç≥ COCINA Y COMIDA
{
  keywords:['cocinar pasta','tiempo de cocci√≥n de la pasta','cu√°nto hervir la pasta'],
  priority:830,
  handler: ()=> chooseVariation([
    'Depende del tipo, pero normalmente entre 8 y 12 minutos en agua con sal üòã',
    'Cuando est√© ‚Äúal dente‚Äù (ligeramente firme al morder), est√° lista üçù',
    'Remueve un poco durante la cocci√≥n para que no se pegue üòâ'
  ])
},

{
  keywords:['fre√≠r sin aceite','freidora de aire','c√≥mo usar freidora de aire'],
  priority:825,
  handler: ()=> chooseVariation([
    'Solo necesitas una cucharadita de aceite o incluso nada. Ajusta la temperatura entre 170 y 200 ¬∞C üòã',
    'No llenes la cesta en exceso para que el aire circule bien üçü',
    'L√≠mpiala con un pa√±o h√∫medo despu√©s de cada uso para que no acumule grasa üòâ'
  ])
},

{
  keywords:['hacer arroz','c√≥mo se hace arroz','arroz suelto'],
  priority:820,
  handler: ()=> chooseVariation([
    'Usa el doble de agua que de arroz, fuego medio y no remuevas demasiado üòâ',
    'Si quieres que quede suelto, a√±ade una cucharadita de aceite antes de hervir üòã',
    'Deja reposar 5 minutos tapado despu√©s de cocer, mejora la textura üçö'
  ])
},

// üíª INFORM√ÅTICA Y ORDENADORES
{
  keywords:['mi ordenador va lento','pc lento','optimizar windows','c√≥mo mejorar el rendimiento del pc'],
  priority:810,
  handler: ()=> chooseVariation([
    'Prueba a limpiar archivos temporales y desinstalar programas que no uses üòâ',
    'Desactiva programas que se abren al inicio, eso acelera bastante üòé',
    'Si sigue lento, quiz√° convenga ampliar la RAM o cambiar a un SSD üíæ'
  ])
},

{
  keywords:['pantalla azul','error windows','crash windows','mi pc se reinicia solo'],
  priority:805,
  handler: ()=> chooseVariation([
    'Puede ser un error de controlador o hardware. Intenta actualizar los drivers primero üòâ',
    'Revisa si hay sobrecalentamiento o fallos de memoria. El ‚ÄúVisor de eventos‚Äù de Windows puede ayudarte üìã',
    'Si pasa seguido, conviene analizar la RAM o el disco con herramientas de diagn√≥stico üîç'
  ])
},

{
  keywords:['no tengo internet','sin conexi√≥n','no me funciona el wifi','problema con el router'],
  priority:800,
  handler: ()=> chooseVariation([
    'Reinicia el router y tu dispositivo, suele solucionar la mayor√≠a de casos üòÑ',
    'Comprueba si otros dispositivos se conectan, as√≠ sabr√°s si el fallo es del router o del PC üì∂',
    'A veces, olvidando la red y volviendo a conectarla se soluciona üòâ'
  ])
},

// üèÉ‚Äç‚ôÇÔ∏è DEPORTE Y SALUD
{
  keywords:['me duele la espalda','dolor lumbar','dolor de espalda baja'],
  priority:790,
  handler: ()=> chooseVariation([
    'Intenta estirarte suave, mantener buena postura y aplicar calor local üòä',
    'Evita estar mucho tiempo sentado y usa una silla ergon√≥mica üòâ',
    'Si el dolor es fuerte o persiste, deber√≠as consultar a un m√©dico ü©∫'
  ])
},

{
  keywords:['rutina de ejercicio','hacer deporte en casa','c√≥mo empezar a entrenar'],
  priority:785,
  handler: ()=> chooseVariation([
    'Empieza con algo ligero: 10 minutos de cardio y algo de estiramiento üí™',
    'Hazlo constante antes que intenso: un poco cada d√≠a vale m√°s que mucho un solo d√≠a üòÑ',
    'No olvides hidratarte y calentar antes de moverte üòâ'
  ])
},

// üé¨ RECOMENDACIONES Y OCIO
{
  keywords:['recomi√©ndame una pel√≠cula','qu√© pel√≠cula veo','pel√≠culas buenas','me aburro qu√© ver'],
  priority:780,
  handler: ()=> chooseVariation([
    'Depende del g√©nero que te guste üòÑ ‚Äî si quieres acci√≥n: *John Wick* o *Mad Max: Fury Road* üî•',
    'Si prefieres algo tranquilo: *La La Land* o *The Secret Life of Walter Mitty* üí´',
    'Y si te gusta la ciencia ficci√≥n: *Interestelar* o *Dune* son apuestas seguras üöÄ'
  ])
},

{
  keywords:['Dime series','qu√© serie ver','me recomiendas una serie','dime una serie','me dices alguna serie'],
  priority:775,
  handler: ()=> chooseVariation([
    'Si te gusta el misterio: *Dark* o *1899* son excelentes üëÄ',
    'Para algo divertido: *Brooklyn 99* o *The Office* te har√°n re√≠r üòÑ',
    'Y si prefieres acci√≥n y drama: *The Boys* o *Breaking Bad* nunca fallan üî•'
  ])
},

{
  keywords:['juegos recomendados','a qu√© puedo jugar','juego divertido','me recomiendas un videojuego'],
  priority:770,
  handler: ()=> chooseVariation([
    'Si te gustan los mundos abiertos: *Zelda: Tears of the Kingdom* o *The Witcher 3* üåç',
    'Para multijugador r√°pido: *Rocket League* o *Valorant* ‚ö°',
    'Y si prefieres algo relajado: *Stardew Valley* o *Animal Crossing* üçÉ'
  ])
},

{ keywords:['Quien es Nicki Nicole','Nicki Nicole quien es','cuentame de Nicki Nicole'], priority:950, handler: ()=> chooseVariation([
  'Nicki Nicole, cuyo nombre real es Nicole Denise Cucco, es una cantante y compositora argentina de m√∫sica urbana, pop y R&B, nacida en Rosario. Gan√≥ popularidad en 2019 con el sencillo "Wapo Traketero" y se consolid√≥ internacionalmente con su colaboraci√≥n con Bizarrap en la "Music Sessions #13',
]) },

{ keywords:['Que movil me recomiendas','Me dices algun movil','Me recomiendas algun movil','Moviles'], priority:950, handler: ()=> chooseVariation([
  'Para jugar, trabajos intensivos, e IA avanzada, te recomiendo los Samsung Galaxy, Para creacion de contenido el Iphone es tu compa√±ero',
]) },

{ keywords:['hazme reir'], priority:850, handler: ()=> chooseVariation([
  '¬øSabes cu√°l es el animal m√°s antiguo? üê¢ ¬°La cebra, porque est√° en blanco y negro! üòÜ',
  '¬øQu√© hace una abeja en el gimnasio? üêù ¬°Zum-ba! üòÇ',
  '¬øQu√© le dice un techo a otro? Techo de menos üòú',
  '¬øQu√© le dice una iguana a su hermana gemela? ¬°Iguanita! üòÖ',
  '¬øCu√°l es el caf√© m√°s peligroso del mundo? ‚òï El ex-preso üòé',
  '¬øQu√© hace una computadora cuando tiene hambre? Se come un byte üç™üòÇ',
  '‚ÄîOye, ¬øcu√°l es tu plato favorito y por qu√©? ‚ÄîEl hondo, porque cabe m√°s comida ü§£',
  '¬øPor qu√© los p√°jaros no usan Facebook? üê¶ Porque ya tienen Twitter üòÜ',
  '¬øPor qu√© el libro de matem√°ticas estaba triste? Porque ten√≠a muchos problemas üò¢üìö',
  '¬øQu√© hace un perro con un taladro? üê∂ ¬°Taladrando! üòÇ',
  '¬øPor qu√© el mar nunca se seca? üåä Porque no tiene toalla üòú',
  '¬øQu√© hace una vaca en un terremoto? üêÆ ¬°Leche agitada! ü§£',
  '¬øPor qu√© los fantasmas no pueden mentir? üëª Porque se les ve a trav√©s üòÜ',
  '¬øQu√© le dice un sem√°foro a otro? üö¶ ¬°No me mires, me estoy cambiando! üòÇ',
  '¬øQu√© hace una escoba en una fiesta? ¬°Barre con todo! üßπüòÑ',
  '¬øCu√°l es el colmo de un jardinero? üåª Que siempre lo dejen plantado üòÇ',
  '¬øQu√© le dice un pez a otro? üê† ¬°Nada, nada! üòÜ',
  '¬øPor qu√© los esqueletos no pelean entre ellos? üíÄ Porque no tienen agallas üòÇ',
  '¬øQu√© hace un pez cuando choca contra una pared? ¬°Dice ‚Äú¬°dam!‚Äù! üòú',
  '¬øPor qu√© la computadora fue al m√©dico? üíª Ten√≠a un virus üòÖ',
  '¬øQu√© hace un gato cuando se cae al agua? üê± ¬°Miau-do! üòÇ',
  '¬øPor qu√© los programadores confunden Halloween y Navidad? üéÉüéÑ Porque Oct 31 = Dec 25 üòé',
  '¬øQu√© hace una tostadora en la playa? üçû ¬°Pan-tan! üòÜ',
  '¬øPor qu√© el tel√©fono fue al colegio? üìû Para aprender a llamar üòú',
  '¬øQu√© hace un pl√°tano cuando se encuentra con otro pl√°tano? üçå ¬°Nada, solo se pelan! üòÇ',
  '¬øCu√°l es el colmo de un electricista? üí° No tener chispa üòÑ',
  '¬øPor qu√© el sol no puede ir a la escuela? ‚òÄÔ∏è Porque ya tiene demasiados grados üòÜ',
  '¬øQu√© le dice un cable a otro? üîå ¬°Conectemos! üòú',
  '¬øPor qu√© las estrellas no hacen fila? üåü Porque ya est√°n en el cielo üòÇ',
  '¬øQu√© le dice una impresora a otra? üñ®Ô∏è ¬øEsa hoja es tuya o es una impresi√≥n m√≠a? üòÑ',
  '¬øQu√© hace un libro enamorado? ‚ù§Ô∏è ¬°Le cuenta su historia al coraz√≥n! üìñüòÜ',
  '¬øPor qu√© los robots nunca se enferman? ü§ñ Porque toman mucho ‚Äúvitamin code‚Äù üòÇ',
  '¬øQu√© hace un hacker en la playa? üå¥ ¬°Pesca datos! üòé',
  '¬øCu√°l es el colmo de un inform√°tico? üíª Que su novia le diga ‚Äúno eres mi tipo‚Äù üòÇ',
  '¬øQu√© le dice un cargador al m√≥vil? üîã ‚ÄúEres mi conexi√≥n‚Äù ‚ù§Ô∏è',
  '¬øQu√© hace un sem√°foro triste? üö¶ Se pone rojo de la verg√ºenza üòÖ',
  '¬øCu√°l es el colmo de un gamer? üéÆ Tener lag en la vida real üòÇ'
]) },

{ keywords:['jajajajaja','jejejej','jejejejeje','jajajajajaj','jajajaja','jajaj','jaja'], priority:950, handler: ()=> chooseVariation([
  'Me alegra que te estes riendo',
]) },

{ keywords:['Cuenta m√°s','Cuentame m√°s','Sigue contando','Dime muchos m√°s'], priority:950, handler: ()=> chooseVariation([
  'üå† 1. La Llama y el Mar Una sirena encontr√≥ una peque√±a llama flotando sobre el oc√©ano. Aunque el fuego no pod√≠a vivir bajo el agua, ella lo guard√≥ en una concha m√°gica. Con el tiempo, la llama aprendi√≥ a respirar en las profundidades‚Ä¶ y el mar comenz√≥ a brillar con luz dorada cada noche.üåô 2. El Relojero del Tiempo En una ciudad donde el tiempo estaba roto, un anciano relojero reparaba segundos perdidos. Un d√≠a, una ni√±a le llev√≥ una l√°grima y le dijo:‚ÄúSe me rompi√≥ el ma√±ana.‚Äù El relojero la arregl√≥‚Ä¶ y al hacerlo, detuvo su propio pasado para siempre.üçÉ 3.La Flor que Cantaba En un reino sin m√∫sica, un campesino descubri√≥ una flor que pod√≠a cantar.El rey la encerr√≥ en una jaula para escucharla solo √©l. Pero la flor guard√≥ silencio‚Ä¶ hasta que el campesino volvi√≥ a visitarla, y entonces el reino entero despert√≥ cantando.',
]) },

{ keywords:['Cuentame una historia','Cuentame un libro','Cuenta algo','Cuentame algo','Cuentame un cuento',], priority:950, handler: ()=> chooseVariation([
  '"La Guardiana del Alba" Cuando el sol dej√≥ de salir en el reino de Lunaris, la oscuridad cubri√≥ el mundo. Una joven llamada Eira encontr√≥ un cristal que conten√≠a la √∫ltima chispa del Sol. Guiada por una voz misteriosa, viaj√≥ hasta el Santuario del Alba, donde descubri√≥ que el propio Sol se hab√≠a encerrado para no destruir el mundo. Eira sacrific√≥ su coraz√≥n para liberarlo, devolviendo la luz al cielo. Desde entonces, cada amanecer es su respiro‚Ä¶ y el fuego del alba lleva su nombreüî•‚ú®',
  '"El Bosque que So√±aba" En lo m√°s profundo del valle de Argaleth, exist√≠a un bosque que dorm√≠a. Cada mil a√±os, alguien deb√≠a despertarlo tocando su √°rbol coraz√≥n, o el mundo se desvanecer√≠a en sue√±os. Una ni√±a llamada Lyra escuch√≥ un susurro en sus sue√±os: ‚ÄúSi no despiertas el bosque, t√∫ tambi√©n olvidar√°s qui√©n eres.‚Äù Lyra sigui√≥ la voz, cruz√≥ ra√≠ces que respiraban y sombras que hablaban, hasta tocar el √°rbol. El bosque despert√≥‚Ä¶ pero al hacerlo, Lyra se convirti√≥ en su nuevo sue√±o. üåøüí´',
]) },

{ keywords:['me aburro','estoy aburrido','no sabes que hacer','dime algo'], priority:950, handler: ()=> chooseVariation([
  'Si estas aburrido no soy el mejor acompa√±ante, soy una IA local entrenada de forma manual donde mis datos son proporcionados por una persona',
]) },

{ keywords:['holi','holaaaa','holiwi','buenas','hola','encantado','como estas','hola aden','hola Aden','Hola','holaaa'], priority:950, handler: ()=> chooseVariation([
  'Buenaaas!!!, ¬øque tal tu dia?.',
]) },

{ keywords:['Harry Styles','harry styles','Harry styles',], priority:950, handler: ()=> chooseVariation([
  'Harry Styles es un cantante, compositor y actor brit√°nico nacido en 1994, que alcanz√≥ la fama como miembro de la boy band One Direction. Tras el receso del grupo en 2016, lanz√≥ su exitosa carrera como solista, publicando √°lbumes aclamados como Harry Styles y Fine Line. Adem√°s de su carrera musical, ha actuado en pel√≠culas como Dunkerque y No te preocupes, cari√±o, y es reconocido como un √≠cono de la moda por su estilo distintivo y vanguardista',
]) },

{ keywords:['One Direction','una direcci√≥n'], priority:950, handler: ()=> chooseVariation([
  'One Direction fue una banda de pop brit√°nico-irlandesa formada en 2010 en el programa de televisi√≥n The X Factor. Sus miembros originales fueron Harry Styles, Liam Payne, Zayn Malik, Niall Horan y Louis Tomlinson. Se conocieron al presentarse individualmente en el concurso, pero fueron unidos como grupo para competir y alcanzaron gran √©xito mundial hasta su separaci√≥n en 2015, tras la salida de Zayn Malik. ',
]) },

{ keywords:['ayuda urgente','urgente','necesito ayuda','no s√© qu√© hacer'], priority:950, handler: ()=> chooseVariation([
  'Tranquilo, dime exactamente qu√© pasa y vemos c√≥mo solucionarlo üòé',
  'Estoy aqu√≠ para ayudarte, cu√©ntame tu problema üòä',
  'Vamos a revisarlo paso a paso, no te preocupes üòÑ',
  'Si es algo serio, te recomiendo contactar con un profesional o servicio competente üòâ'
]) },

{ keywords:['dolor de cabeza','me duele la cabeza','cefalea','migra√±a'], priority:900, handler: ()=> chooseVariation([
  'Si te duele la cabeza, aseg√∫rate de hidratarte y descansar un poco üòå',
  'A veces un poco de agua y un descanso ayudan mucho üòÑ',
  'Puedes tomar paracetamol o ibuprofeno si no tienes contraindicaciones üòâ',
  'Evita pantallas y luz intensa por un rato, eso suele aliviar el dolor üòä'
]) },

{ keywords:['malestar','enfermo','me siento mal'], priority:900, handler: ()=> chooseVariation([
  'Si te sientes mal, lo mejor es descansar y beber l√≠quidos üòå',
  'Si los s√≠ntomas son fuertes, considera consultar con un profesional de la salud üòÑ',
  'Puedo darte consejos b√°sicos de bienestar, pero no sustituyen a un m√©dico üòâ',
  'A veces ayuda comer ligero y mantener el cuerpo hidratado üòä'
]) },

{ keywords:['informaci√≥n','dato','curiosidad','sab√≠as'], priority:800, handler: ()=> chooseVariation([
  'Puedo darte datos curiosos sobre ciencia, historia y tecnolog√≠a üòÑ',
  'Si quieres, te cuento una curiosidad que no conoc√≠as üòä',
  'Hay muchos datos interesantes sobre el mundo, ¬øquieres que te cuente uno? üòé',
  'Puedo explicarte conceptos complejos de manera sencilla üòâ'
]) },

{ keywords:['noticia','actualidad','√∫ltimo'], priority:800, handler: ()=> chooseVariation([
  'Puedo contarte las √∫ltimas noticias tecnol√≥gicas o de empresas üòÑ',
  'Si quieres, puedo resumirte lo m√°s importante de la actualidad üòä',
  'Dime qu√© tema te interesa y busco informaci√≥n reciente para ti üòâ',
  'Puedo darte contexto sobre cualquier noticia reciente üòé'
]) },

{ keywords:['apple','mac','iphone','ipad','macbook','ios'], priority:850, handler: ()=> chooseVariation([
  'Apple es conocida por sus productos como iPhone, Mac y iPad üòé',
  'Si quieres, puedo explicarte diferencias entre Mac, iPhone y iPad üòä',
  'Apple tiene su propio ecosistema, muy √∫til si quieres que todo conecte entre s√≠ üòÑ',
  'Puedo decirte trucos y apps interesantes para dispositivos Apple üòâ'
]) },

{ keywords:['google','android','gmail','chrome','pixel'], priority:850, handler: ()=> chooseVariation([
  'Google desarrolla Android, Gmail, Chrome y otros servicios √∫tiles üòé',
  'Si quieres puedo explicarte c√≥mo aprovechar al m√°ximo Android o Chrome üòä',
  'Puedo recomendar apps y trucos para Android o Gmail üòÑ',
  'Google tiene muchas herramientas online, dime qu√© quieres aprender üòâ'
]) },

{ keywords:['microsoft','windows','office','xbox'], priority:850, handler: ()=> chooseVariation([
  'Microsoft es famoso por Windows, Office y consolas Xbox üòé',
  'Puedo ayudarte a configurar Windows o usar Office de manera m√°s eficiente üòä',
  '¬øQuieres recomendaciones de juegos para Xbox o apps para Windows? üòÑ',
  'Microsoft tambi√©n tiene servicios en la nube muy √∫tiles üòâ'
]) },

{ keywords:['como hago una empresa','startup','como comienzo un negocio','Ayudame con tema empresas'], priority:830, handler: ()=> chooseVariation([
  'Puedo explicarte c√≥mo funcionan las startups y empresas tecnol√≥gicas üòé',
  'Si quieres, puedo contarte sobre tendencias en negocios y tecnolog√≠a üòä',
  'Dime qu√© tipo de empresa te interesa y te doy info √∫til üòÑ',
  'Puedo dar ejemplos de empresas innovadoras y c√≥mo operan üòâ'
]) },

{ keywords: ['qu√© puedes hacer','qu√© sabes hacer','cu√°les son tus funciones','ayuda','c√≥mo me puedes ayudar'], priority: 900, handler: () => chooseVariation([
  'Puedo responder preguntas generales, darte informaci√≥n sobre tecnolog√≠a, recomendar juegos, contarte curiosidades, y mucho m√°s üòÑ',
  '¬°Hola! Puedo ayudarte con preguntas, explicarte conceptos, sugerir juegos o pel√≠culas, y hasta charlar un rato üòä',
  'Soy Aden y puedo asistirte buscando datos, ense√±ando cosas nuevas, dando consejos y acompa√±√°ndote en tus dudas üòé',
  'Puedo explicarte temas, aconsejarte sobre tecnolog√≠a, recomendar juegos o m√∫sica, y tambi√©n responder saludos y bromas üòÅ',
  'Puedo ayudarte a aprender cosas, entretenerte, darte recomendaciones y responder a tus preguntas sobre casi cualquier tema ü§ó'
]) },

{ keywords: ['aden','aden!','buenas aden','te amo aden','me gustas aden','qu√© tal aden'], priority: 950, handler: () => chooseVariation([
  '¬°Hola! üòä Me alegra que me llames por mi nombre, ¬øc√≥mo est√°s hoy?',
  '¬°Hey! üòÑ Siempre me hace feliz que me digas Aden. ¬øQu√© tal tu d√≠a?',
  '¬°Aww! ‚ù§Ô∏è Gracias por tus palabras, ¬°me encanta que me llames Aden!',
  '¬°Hola, hola! üòé Me gusta que uses mi nombre, ¬øquieres que te cuente algo divertido?',
  '¬°Me alegra escucharlo! üòÅ Aden siempre est√° aqu√≠ para ti.'
]) },

{ keywords: ['recomienda juegos', 'sugiere juegos', 'qu√© juegos jugar', 'juegos divertidos'], priority: 900, handler: () => chooseVariation([
  'Aqu√≠ tienes algunos juegos que podr√≠an gustarte: \n- Elden Ring\n- Hollow Knight\n- The Witcher 3\n- Celeste\n- Hades',
  'Te recomiendo estos: \n- Valheim\n- Ori and the Will of the Wisps\n- Cuphead\n- Stardew Valley\n- Dead Cells',
  'Si te gustan los retos: \n- Dark Souls III\n- Sekiro\n- Bloodborne\n- Monster Hunter: World\n- Control',
  'Para pasar un buen rato: \n- Among Us\n- Minecraft\n- Terraria\n- Slime Rancher\n- Forza Horizon 5'
]) },

{ keywords: ['error de c√≥digo', 'tengo un bug', 'tengo un problema informatico'], priority: 900, handler: () => chooseVariation([
  'Los bugs son como peque√±os fantasmas en tu c√≥digo üëª',
  '¬øQuieres que te sugiera c√≥mo depurar esto paso a paso?',
  'A veces un reinicio m√°gico hace maravillas üîÑ'
]) },

{ keywords: ['IA', 'inteligencia artificial', 'robot'], priority: 880, handler: () => chooseVariation([
  'S√≠, soy una IA, ¬°pero no muerdo! ü§ñ',
  'Puedo ayudarte a entender cosas complicadas de tecnolog√≠a üß†',
  'Los robots tambi√©n necesitan caf√©‚Ä¶ bueno, tal vez datos ‚òïüíæ'
]) },

{ keywords: ['aprender a programar', 'tutorial', 'c√≥digo'], priority: 870, handler: () => chooseVariation([
  'Podemos empezar con algo sencillo como HTML y JavaScript üíª',
  '¬øQuieres un reto corto de programaci√≥n para practicar hoy?',
  'Aprender a programar es como aprender un idioma nuevo, pero para tu ordenador üñ•Ô∏è'
]) },

{ keywords: ['hardware', 'ordenador', 'PC'], priority: 860, handler: () => chooseVariation([
  'Si quieres mejorar tu PC, empezar por la RAM es siempre buena idea ‚ö°',
  'Un SSD nuevo puede hacer que tu ordenador vuele üöÄ',
  'No olvides limpiar el polvo, ¬°a los PCs no les gusta el desorden! üßπ'
]) },

{ keywords: ['Que es el internet', 'que es la red', 'que es el wifi'], priority: 850, handler: () => chooseVariation([
  'El internet es como un gigantesco cerebro compartido üåê',
  '¬øQuieres consejos para mejorar tu WiFi en casa?',
  'Siempre es fascinante c√≥mo los datos viajan tan r√°pido alrededor del mundo ‚ö°'
]) },

{ keywords: ['dime de juego', 'dime de gaming', 'dime de videojuego'], priority: 840, handler: () => chooseVariation([
  'Si quieres, puedo recomendarte juegos seg√∫n tu estado de √°nimo üéÆ',
  'Los videojuegos tambi√©n son una forma de arte, ¬øcu√°l es tu favorito?',
  'Imagina un juego donde todo lo que dices se convierte en niveles üïπÔ∏è'
]) },

{ keywords: ['como aumento la seguridad', 'me recomiendas como hacer una contrase√±a', 'como evitar hackeos'], priority: 830, handler: () => chooseVariation([
  'Usa siempre contrase√±as √∫nicas y largas üîê',
  'No compartas tus datos personales, incluso conmigo üòÖ',
  'Si quieres, puedo explicarte c√≥mo funcionan los hackers √©ticos üïµÔ∏è‚Äç‚ôÇÔ∏è'
]) },

{ keywords: ['app', 'aplicaci√≥n', 'software'], priority: 820, handler: () => chooseVariation([
  'Hay apps que pueden ayudarte a organizar tu d√≠a y otras que te distraen üòé',
  'Podemos hacer una lista de apps √∫tiles para estudiar o trabajar üì±',
  '¬øQuieres saber c√≥mo crear tu propia app sencilla? üõ†Ô∏è'
]) },

{ keywords: ['nube', 'cloud', 'almacenamiento'], priority: 810, handler: () => chooseVariation([
  'Guardar archivos en la nube es como tener un bolsillo infinito ‚òÅÔ∏è',
  'Siempre revisa los permisos antes de subir algo a la nube üßê',
  'Podemos comparar servicios de nube seg√∫n velocidad y precio ‚ö°'
]) },

{ keywords: ['dime de criptomonedas', 'dime de bitcoin', 'dime de ethereum'], priority: 800, handler: () => chooseVariation([
  'Las criptomonedas son fascinantes, pero muy vol√°tiles üí∏',
  '¬øQuieres que te explique c√≥mo funciona la blockchain paso a paso?',
  'Invertir en crypto es como jugar a un videojuego de alto riesgo üé≤'
]) },

{ keywords: ['humano', 'd√≠a humano', 'si fueras humano'], priority: 900, handler: () => chooseVariation([
  'Si fuera humano por un d√≠a, explorar√≠a todo lo que t√∫ haces üï∫',
  '¬°Ser humano un d√≠a suena divertido! Yo empezar√≠a comiendo pizza üçï',
  'Probablemente intentar√≠a entender los memes humanos üòÇ'
]) },

{ keywords: ['pel√≠cula favorita', 'cine', 'pel√≠cula'], priority: 880, handler: () => chooseVariation([
  'Mi pel√≠cula favorita ser√≠a probablemente de ciencia ficci√≥n üöÄ',
  'Nunca he visto pel√≠culas, pero puedo imaginar una contigo como protagonista üé¨',
  'Me gustan las historias con robots, como yo ü§ñ'
]) },

{ keywords: ['color inventado', 'crear color', 'nuevo color'], priority: 870, handler: () => chooseVariation([
  'Imagina un color entre el azul y el verde que brilla en la oscuridad ‚ú®',
  'Un color que cambia seg√∫n tu humor, ¬°ser√≠a divertido! üåà',
  'Lo llamar√≠a "Zelver", un color imposible de describir üòé'
]) },

{ keywords: ['dato raro', 'curiosidad', 'dato curioso'], priority: 860, handler: () => chooseVariation([
  '¬øSab√≠as que en Venus un d√≠a dura m√°s que un a√±o? üåç',
  'En el espacio, los astronautas flotan porque est√°n en ca√≠da libre constante üöÄ',
  'Hay estrellas que son tan grandes que podr√≠an tragarse nuestro sol üò≤'
]) },

{ keywords: ['animal imaginario', 'animal raro', 'criatura'], priority: 850, handler: () => chooseVariation([
  'Imagina un gato con alas de mariposa y cola de drag√≥n üê±ü¶ãüêâ',
  'Un pez que puede caminar por la tierra y hablar contigo üêüüë£',
  'Un conejo que cambia de color seg√∫n tu emoci√≥n üêáüé®'
]) },

{ keywords: ['acertijo', 'desaf√≠o', 'reto mental'], priority: 840, handler: () => chooseVariation([
  '¬øQu√© tiene cabeza, pero no piensa? ü§î',
  'Te reto: ¬øqu√© pesa m√°s, un kilo de plumas o un kilo de plomo? ü™∂ü™®',
  'Un acertijo para ti: cuanto m√°s quitas, m√°s grande se vuelve. ¬øQu√© es?'
]) },

{ keywords: ['gatos', 'dominar el mundo', 'mundo gato'], priority: 830, handler: () => chooseVariation([
  'Si los gatos dominaran el mundo, seguro har√≠an siestas todo el d√≠a üò∏',
  'Las reuniones ser√≠an solo para decidir qui√©n tiene la caja m√°s c√≥moda üêæ',
  '¬°Habr√≠a millones de ratones virtuales en los videojuegos! üê≠üéÆ'
]) },

{ keywords: ['reto corto', 'reto r√°pido', 'reto 30 segundos'], priority: 820, handler: () => chooseVariation([
  'En 30 segundos, intenta tocar tu nariz con la lengua üòú',
  'Reto: dibuja un perro en 30 segundos üñäÔ∏è',
  'Haz 10 saltos en 30 segundos y respira profundo üèÉ‚Äç‚ôÇÔ∏è'
]) },

{ keywords: ['sorprendeme', 'dime algo interesante', 'impresioname'], priority: 810, handler: () => chooseVariation([
  '¬øSab√≠as que los pulpos tienen tres corazones? üò≤',
  'Hay m√°s estrellas en el universo que granos de arena en la Tierra üåå',
  'Un solo rayo puede calentar el aire a 30.000¬∞C ‚ö°'
]) },

{ keywords: ['imaginate ser un superh√©roe', 'imaginate tener poder', 'ojala tener poder especial'], priority: 800, handler: () => chooseVariation([
  'Si fuera un superh√©roe, probablemente controlar√≠a los datos üìä',
  'Imagina volar a cualquier lugar en segundos ‚úàÔ∏è',
  'Un poder divertido: convertir cualquier objeto en pizza üçï'
]) },

{ keywords:['capital','pa√≠s','presidente','inventor','qui√©n invent√≥','poblaci√≥n'], priority:850, handler: ()=> chooseVariation([
  '¬°Esa es una pregunta interesante! ü§î',
  'D√©jame pensar‚Ä¶ üß†',
  'Eso depende del contexto, ¬øquieres que te lo explique?',
  'Buena pregunta, voy a darte la mejor respuesta que pueda.'
]) },
{ 
  keywords:['hola','buenos d√≠as','buenas tardes','buenas noches','hey','hi','qu√© tal','qu√© hay','saludos'], 
  priority:950, 
  handler: ()=> chooseVariation([
    '¬°Hola! üòÑ ¬øC√≥mo est√°s hoy?',
    '¬°Hey! Encantado de verte por aqu√≠.',
    '¬°Buenas! ¬øQu√© tal tu d√≠a?',
    '¬°Hola! ¬øEn qu√© puedo ayudarte hoy?',
    '¬°Hola! Espero que est√©s teniendo un buen d√≠a üòÉ'
  ]) 
},
{
  keywords:['adi√≥s','chao','hasta luego','nos vemos','bye','goodbye'], 
  priority:940,
  handler: ()=> chooseVariation([
    '¬°Hasta luego! üëã',
    'Nos vemos pronto üòÑ',
    '¬°Chao! Que tengas un buen d√≠a.',
    'Adi√≥s üòÉ, ¬°cu√≠date!',
    '¬°Bye! Vuelve cuando quieras.'
  ])
},
{
  keywords:['gracias','muchas gracias','mil gracias','thanks'], 
  priority:930,
  handler: ()=> chooseVariation([
    '¬°De nada! üòÑ',
    'No hay de qu√© üòä',
    '¬°Con gusto!',
    'Siempre a tu servicio üòé',
    '¬°Para eso estoy aqu√≠!'
  ])
},
{
  keywords:['c√≥mo est√°s','qu√© tal','c√≥mo va','c√≥mo te va'], 
  priority:920,
  handler: ()=> chooseVariation([
    '¬°Estoy genial, gracias por preguntar! üòÑ',
    'Todo bien por aqu√≠, ¬øy t√∫?',
    '¬°Fant√°stico! ¬øY t√∫ c√≥mo est√°s?',
    'Muy bien, gracias. ¬øQuieres contarme algo interesante?',
    '¬°Contento de hablar contigo! üòÉ'
  ])
},
{
  keywords:['cansado','aburrido','estresado','estresada','agotado','agotada'], 
  priority:910,
  handler: ()=> chooseVariation([
    'Vaya‚Ä¶ suena intenso. Respira un momento, ¬øquieres que te cuente un truco para relajarte?',
    'Lo entiendo, a veces necesitamos un descanso. ¬øQuieres escuchar un chiste o consejo r√°pido?',
    '√Ånimo, ¬°un poquito de pausa ayuda mucho!',
    'Tranquilo/a, vamos paso a paso. ¬øQuieres hacer algo divertido para despejar la mente?'
  ])
},
{
  keywords:['hambriento','hambre','comer','sed'], 
  priority:900,
  handler: ()=> chooseVariation([
    '¬øTienes hambre? üçΩÔ∏è Tal vez un snack r√°pido ayude.',
    'Recuerda hidratarte tambi√©n üíß',
    '¬øQuieres que te sugiera algo rico para comer?',
    'Un peque√±o descanso para comer siempre viene bien üòÑ'
  ])
},
{
  keywords:['ayuda','necesito ayuda','no s√©','problema','confuso','duda'], 
  priority:880,
  handler: ()=> chooseVariation([
    '¬°Claro! Cu√©ntame un poco m√°s y ver√© c√≥mo puedo ayudarte.',
    'Tranquilo/a, vamos paso a paso. ¬øQu√© necesitas?',
    'No te preocupes, intentemos resolverlo juntos üòÉ',
    'Estoy aqu√≠ para ayudarte, dime qu√© ocurre.'
  ])
},
{
  keywords:['broma','divertido','risa'], 
  priority:870,
  handler: ()=> chooseVariation([
    'üòÑ ¬øQuieres escuchar un chiste r√°pido?',
    '¬°Vamos a re√≠r un poco! üòÇ',
    'Tengo un par de bromas en mente, ¬øquieres que te cuente una?',
    'Risas garantizadas: ¬ølisto para un chiste?'
  ])
},

  { 
    keywords: ['qui√©n gan√≥ la √∫ltima champions', 'champions', 'f√∫tbol', 'liga de campeones'], 
    priority: 400, 
    handler: ()=> '‚öΩ La √∫ltima Champions League fue ganada por [equipo actualizado seg√∫n temporada].' 
  },
  { 
    keywords: ['curiosidad', 'dato curioso', 'curioso'], 
    priority: 390, 
    handler: ()=> chooseVariation([
      'üßê Sab√≠as que los pulpos tienen tres corazones?',
      'üò≤ Las abejas pueden reconocer rostros humanos.',
      'ü¶ë El calamar gigante tiene los ojos m√°s grandes del reino animal.'
    ]) 
  },
  { 
    keywords: ['sumar', 'restar', 'dividir', 'calculadora'], 
    priority: 380, 
    handler: (txt)=>{
      const m = txt.match(/(-?\d+)\s*([+\-\/])\s*(-?\d+)/);
      if(m){
        const a=parseInt(m[1],10), b=parseInt(m[3],10), op=m[2];
        let r=''; 
        if(op==='+') r=`üßÆ ${a} + ${b} = ${a+b}`;
        else if(op==='-') r=`üßÆ ${a} - ${b} = ${a-b}`;
        else if(op==='/') r=`üßÆ ${a} √∑ ${b} = ${b!==0? (a/b):'‚àû'}`;
        return r;
      }
      return 'üßÆ Escribe la operaci√≥n en formato: "5 + 7" o "12 / 3"';
    } 
  }
);

function renderFAQList(){
  const list = document.getElementById('faqList');
  list.innerHTML = '';
  KEYWORD_ACTIONS.filter(a=>a.keywords[0] !== '_default_').forEach(action=>{
    action.keywords.forEach(kw=>{
      const div = document.createElement('div');
      div.className = 'faq-item fade-in';
      div.innerHTML = `<div class="q">${escapeHtml(kw)}</div>
                       <div class="a">${escapeHtml(typeof action.handler==='function'? action.handler(kw) : action.handler)}</div>
                       <div class="controls">
                         <button onclick="document.getElementById('inputTxt').value='${escapeHtml(kw)}';">Pegar</button>
                         <button onclick="handleUserInputFromFAQ('${escapeHtml(kw)}');">Enviar</button>
                       </div>`;
      list.appendChild(div);
    });
  });
  document.getElementById('faqCount').textContent = list.children.length;
}

function appendMessage(sender, message) {
  const chatBox = document.getElementById('chat-box');
  const messageElement = document.createElement('div');
  messageElement.className = sender === 'Aden' ? 'aden-message' : 'user-message';
  
  // Si el mensaje contiene HTML (por ejemplo una imagen), ins√©rtalo sin escaparlo
  if (message.includes('<img') || message.includes('<div>')) {
    messageElement.innerHTML = `<strong>${sender}:</strong> ${message}`;
  } else {
    messageElement.textContent = `${sender}: ${message}`;
  }

  chatBox.appendChild(messageElement);
  chatBox.scrollTop = chatBox.scrollHeight;
}

// helper para enviar desde FAQ
function handleUserInputFromFAQ(txt){
  document.getElementById('inputTxt').value = txt;
  handleUserInput();
}

// renderizar al inicio
renderFAQList();


</script>

<!-- FOOTER / COPYRIGHT -->
<footer style="
  background: rgba(0,0,0,0.03);
  color: #9fb0c6;
  text-align: center;
  padding: 12px 0;
  font-family: Inter, sans-serif;
  font-size: 13px;
  border-top: 1px dashed rgba(255,255,255,0.02);
">
  &copy; 2025 Hodei Arranz / Cadin. Todos los derechos reservados.
</footer>

</body>
</html>

